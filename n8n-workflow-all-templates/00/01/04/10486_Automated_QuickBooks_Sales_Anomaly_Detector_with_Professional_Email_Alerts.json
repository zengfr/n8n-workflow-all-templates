{
  "id": "oM2nqKei3FUejaPF",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automated QuickBooks Sales Anomaly Detector with Professional Email Alerts",
    "wechat": "youandme10086",
    "id": 10486,
    "update_time": "2025-11-10"
  },
  "name": "Automated QuickBooks Sales Anomaly Detector with Professional Email Alerts (Under Review)",
  "tags": [],
  "nodes": [
    {
      "id": "d2715036-0d78-47cb-84e1-c52f1e5a1cfc",
      "name": "Create_Date_Range",
      "type": "n8n-nodes-base.set",
      "position": [
        -656,
        288
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "f14d7155-0e5c-406b-9723-53ba805465f1",
      "name": "Fetch_30Day_Invoices",
      "type": "n8n-nodes-base.quickbooks",
      "position": [
        -432,
        0
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "90c27fd1-a826-4713-a8f6-ad3ba1d235df",
      "name": "Filter_Paid_30Day_Invoices",
      "type": "n8n-nodes-base.filter",
      "position": [
        -144,
        0
      ],
      "parameters": {},
      "typeVersion": 2.2
    },
    {
      "id": "bc270132-a495-4a9a-90c5-934f983780a7",
      "name": "Fetch_30Day_Sales_Receipts",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -432,
        192
      ],
      "parameters": {},
      "typeVersion": 4.3
    },
    {
      "id": "982dc6ef-130f-4d09-affb-a5fb225f73fb",
      "name": "Sum_30Day_Totals",
      "type": "n8n-nodes-base.summarize",
      "position": [
        368,
        96
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "792d5926-e700-4d60-8710-6a36ee0480af",
      "name": "Calculate_30Day_Average",
      "type": "n8n-nodes-base.set",
      "position": [
        592,
        96
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "9813b1fa-3095-4b52-8f74-f2ae38fb31d4",
      "name": "Calculate_Deviation",
      "type": "n8n-nodes-base.set",
      "position": [
        1264,
        288
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "28d2c1ce-3f68-4787-ac9b-a8d7a8a0139b",
      "name": "Check_If_Anomaly",
      "type": "n8n-nodes-base.if",
      "position": [
        1568,
        288
      ],
      "parameters": {},
      "typeVersion": 2.2
    },
    {
      "id": "f670c98c-040f-4740-b04a-9b9c5412d5ed",
      "name": "Prepare_Email_Content",
      "type": "n8n-nodes-base.set",
      "position": [
        1920,
        288
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "d09e3d54-5f14-4fbd-8c97-ccd4dd972db5",
      "name": "Send_Alert_Email",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        2320,
        288
      ],
      "webhookId": "9189369f-15ba-4b9c-a29e-175985e248e0",
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "3b550e06-6309-4f04-a206-7294402593e3",
      "name": "Fetch_Yesterday_Invoices",
      "type": "n8n-nodes-base.quickbooks",
      "position": [
        -432,
        384
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "bdd0ff43-2844-4925-b973-6cd874f167a1",
      "name": "Fetch_Yesterday_Sales_Receipts",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -432,
        576
      ],
      "parameters": {},
      "typeVersion": 4.3
    },
    {
      "id": "dc0f316e-5c09-48e8-a680-58fcefb9e9b0",
      "name": "Filter_Paid_Yesterday_Invoices",
      "type": "n8n-nodes-base.filter",
      "position": [
        -144,
        384
      ],
      "parameters": {},
      "typeVersion": 2.2
    },
    {
      "id": "420a7697-9548-4bd4-9756-f455f6c80766",
      "name": "Total_30Day_Sales_Receipts",
      "type": "n8n-nodes-base.code",
      "position": [
        -144,
        192
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "95cd9852-11e6-4ca8-9f93-5dd5b3bdfe5d",
      "name": "Merging_30Day_Invoices_Sales_Receipts",
      "type": "n8n-nodes-base.merge",
      "position": [
        144,
        96
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "afceb5d0-b0d1-435e-8280-08d9e9d4f932",
      "name": "Merging_Yesterday_Invoices_Sales_Receipts",
      "type": "n8n-nodes-base.merge",
      "position": [
        144,
        480
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "132df91a-b498-4e48-9551-4f3ab1f2d4ee",
      "name": "Sum_Yesterday_Totals",
      "type": "n8n-nodes-base.summarize",
      "position": [
        368,
        480
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "11b1c80d-ecf6-444f-a5b9-0158d3aa5b1c",
      "name": "Combining_Overall_Invoices_Sales_Receipts",
      "type": "n8n-nodes-base.code",
      "position": [
        1040,
        288
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "989164aa-eece-4c7e-bcf2-b2217315f4f4",
      "name": "Run_Every_Morning",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -880,
        288
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "d38f399e-7d94-4888-b4a4-b62776eac1e1",
      "name": "Extract_Yesterday_Sales_Receipts",
      "type": "n8n-nodes-base.code",
      "position": [
        -144,
        576
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "8b5c6c01-e634-4279-bfc7-10aa302e1239",
      "name": "Combine_Final_Totals",
      "type": "n8n-nodes-base.merge",
      "position": [
        816,
        288
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "c1d915d4-ab91-4286-b69d-1387fdd49bdb",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2256,
        -160
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "992f43e4-9c63-45e6-8494-e9f8e45b7dc5",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -976,
        160
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "b6c86e28-2007-4391-9f05-be4ae843ffed",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -528,
        -160
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "63f83511-8da5-48db-bb9c-3af22c749dfe",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1456,
        160
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "c467e9e5-4df1-482f-a102-c52e4ee16f0f",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2208,
        160
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "9dc17266-ea65-459c-9efb-affbd6b0aa96",
  "connections": {
    "Check_If_Anomaly": {
      "main": [
        [
          {
            "node": "Prepare_Email_Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sum_30Day_Totals": {
      "main": [
        [
          {
            "node": "Calculate_30Day_Average",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create_Date_Range": {
      "main": [
        [
          {
            "node": "Fetch_30Day_Invoices",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch_30Day_Sales_Receipts",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch_Yesterday_Invoices",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch_Yesterday_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run_Every_Morning": {
      "main": [
        [
          {
            "node": "Create_Date_Range",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculate_Deviation": {
      "main": [
        [
          {
            "node": "Check_If_Anomaly",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine_Final_Totals": {
      "main": [
        [
          {
            "node": "Combining_Overall_Invoices_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch_30Day_Invoices": {
      "main": [
        [
          {
            "node": "Filter_Paid_30Day_Invoices",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sum_Yesterday_Totals": {
      "main": [
        [
          {
            "node": "Combine_Final_Totals",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Prepare_Email_Content": {
      "main": [
        [
          {
            "node": "Send_Alert_Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculate_30Day_Average": {
      "main": [
        [
          {
            "node": "Combine_Final_Totals",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch_Yesterday_Invoices": {
      "main": [
        [
          {
            "node": "Filter_Paid_Yesterday_Invoices",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch_30Day_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Total_30Day_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter_Paid_30Day_Invoices": {
      "main": [
        [
          {
            "node": "Merging_30Day_Invoices_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Total_30Day_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Merging_30Day_Invoices_Sales_Receipts",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Fetch_Yesterday_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Extract_Yesterday_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter_Paid_Yesterday_Invoices": {
      "main": [
        [
          {
            "node": "Merging_Yesterday_Invoices_Sales_Receipts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract_Yesterday_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Merging_Yesterday_Invoices_Sales_Receipts",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merging_30Day_Invoices_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Sum_30Day_Totals",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combining_Overall_Invoices_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Calculate_Deviation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merging_Yesterday_Invoices_Sales_Receipts": {
      "main": [
        [
          {
            "node": "Sum_Yesterday_Totals",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}