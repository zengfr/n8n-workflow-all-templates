{
  "id": "Rxtt7BmiJQ6GWdi9",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automate GST/VAT tax returns with OpenAI, Gmail and government portal integration",
    "wechat": "youandme10086",
    "id": 11900,
    "update_time": "2026-02-13"
  },
  "name": "Automated GST/VAT Tax Return Preparation and Submission System",
  "tags": [],
  "nodes": [
    {
      "id": "7b3932d7-4cb9-45f5-b963-8b8e55fb4a18",
      "name": "Monthly Tax Return Schedule",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -1120,
        96
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "months",
              "triggerAtHour": 9
            }
          ]
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "8d779445-482f-4f32-b3b7-35a239c0696b",
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "position": [
        -896,
        96
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "revenueApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Revenue API endpoint URL__>"
            },
            {
              "id": "id-2",
              "name": "expensesApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Expenses API endpoint URL__>"
            },
            {
              "id": "id-3",
              "name": "invoicesApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Invoices API endpoint URL__>"
            },
            {
              "id": "id-4",
              "name": "govPortalApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Government portal API endpoint URL__>"
            },
            {
              "id": "id-5",
              "name": "taxAgentEmail",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Tax agent email address__>"
            },
            {
              "id": "id-6",
              "name": "taxThreshold",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Tax filing threshold amount__>"
            },
            {
              "id": "id-7",
              "name": "taxRate",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__GST/VAT tax rate (e.g., 0.15 for 15%)__>"
            },
            {
              "id": "id-8",
              "name": "companyEmail",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Company email for payment reminders__>"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "a13ce408-75df-4dd1-bf9c-6a15b7dcbd63",
      "name": "Fetch Expenses Data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -672,
        208
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.expensesApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "561bf1b1-4672-4aa6-bc85-6225dd57c7fb",
      "name": "Fetch Invoices Data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -672,
        400
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.invoicesApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "38af4a72-9f85-4245-bce5-32fbd1e483e9",
      "name": "Merge Financial Data",
      "type": "n8n-nodes-base.set",
      "position": [
        -448,
        96
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "revenueData",
              "type": "array",
              "value": "={{ $('Fetch Revenue Data').all() }}"
            },
            {
              "id": "id-2",
              "name": "expensesData",
              "type": "array",
              "value": "={{ $('Fetch Expenses Data').all() }}"
            },
            {
              "id": "id-3",
              "name": "invoicesData",
              "type": "array",
              "value": "={{ $('Fetch Invoices Data').all() }}"
            },
            {
              "id": "id-4",
              "name": "taxRate",
              "type": "number",
              "value": "={{ $('Workflow Configuration').first().json.taxRate }}"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "9b1a0ec4-6a4f-4267-add5-a8b2f8a1fa2d",
      "name": "Tax Validation & Calculation Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -176,
        96
      ],
      "parameters": {
        "text": "=Analyze the following financial data and calculate GST/VAT tax: {{ JSON.stringify($json) }}",
        "options": {
          "systemMessage": "You are a tax calculation specialist AI agent.\n\nYour task is to:\n1. Review all revenue, expenses, and invoice transactions\n2. Validate whether each transaction is taxable based on standard GST/VAT rules\n3. Calculate the total taxable revenue and expenses\n4. Calculate the GST/VAT amounts using the provided tax rate\n5. Determine the net tax owed or refund due\n6. Return structured results in JSON format\n\nRules:\n- Exempt items: basic food, medical services, education, financial services\n- Zero-rated items: exports, international services\n- Standard-rated: all other goods and services\n- Use the Calculator tool for all arithmetic operations\n\nReturn your analysis with clear categorization of taxable vs non-taxable items."
        },
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 3
    },
    {
      "id": "aa85655b-b7f7-4537-94bf-8968ab079880",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -224,
        320
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {},
        "builtInTools": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "credential-id",
          "name": "openAiApi Credential"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "8a474a72-01c4-4b4c-9d88-bbb2cbd7d3d7",
      "name": "Tax Calculation Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        32,
        320
      ],
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"totalRevenue\": {\n      \"type\": \"number\"\n    },\n    \"totalExpenses\": {\n      \"type\": \"number\"\n    },\n    \"taxableRevenue\": {\n      \"type\": \"number\"\n    },\n    \"taxableExpenses\": {\n      \"type\": \"number\"\n    },\n    \"taxOnRevenue\": {\n      \"type\": \"number\"\n    },\n    \"taxOnExpenses\": {\n      \"type\": \"number\"\n    },\n    \"netTaxOwed\": {\n      \"type\": \"number\"\n    },\n    \"taxableTransactions\": {\n      \"type\": \"array\"\n    },\n    \"exemptTransactions\": {\n      \"type\": \"array\"\n    },\n    \"summary\": {\n      \"type\": \"string\"\n    }\n  }\n}"
      },
      "typeVersion": 1.3
    },
    {
      "id": "ca631893-22e6-409b-ab63-313cdf98e683",
      "name": "Calculator Tool",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "position": [
        -96,
        320
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "d1e2e8cf-b978-4dd5-9103-fba9f3b8309d",
      "name": "Check Tax Threshold",
      "type": "n8n-nodes-base.if",
      "position": [
        240,
        96
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "loose"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "id-1",
              "operator": {
                "type": "number",
                "operation": "gte"
              },
              "leftValue": "={{ $json.totalRevenue }}",
              "rightValue": "={{ $('Workflow Configuration').first().json.taxThreshold }}"
            }
          ]
        }
      },
      "typeVersion": 2.3
    },
    {
      "id": "142fd5fd-c4c0-4b28-98aa-eb5859b477d4",
      "name": "Generate Tax Declaration",
      "type": "n8n-nodes-base.set",
      "position": [
        464,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "declarationType",
              "type": "string",
              "value": "GST/VAT Tax Return"
            },
            {
              "id": "id-2",
              "name": "filingPeriod",
              "type": "string",
              "value": "={{ $now.format('MMMM yyyy') }}"
            },
            {
              "id": "id-3",
              "name": "declarationDate",
              "type": "string",
              "value": "={{ $now.toISO() }}"
            },
            {
              "id": "id-4",
              "name": "status",
              "type": "string",
              "value": "Ready for Submission"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "74790e8a-442d-47a4-96c7-c5fe074ed88b",
      "name": "Submit to Government Portal",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        688,
        0
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.govPortalApiUrl }}",
        "method": "POST",
        "options": {},
        "jsonBody": "={{ $json }}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "faabc603-44a0-476f-bacc-76e7a898175c",
      "name": "Send to Tax Agent",
      "type": "n8n-nodes-base.gmail",
      "position": [
        704,
        288
      ],
      "webhookId": "c15606ec-3e4d-4872-90eb-3331a4af6753",
      "parameters": {
        "sendTo": "={{ $('Workflow Configuration').first().json.taxAgentEmail }}",
        "message": "=<h2>Tax Return Declaration</h2><p>Please find attached the tax return declaration for {{ $now.format('MMMM yyyy') }}.</p><pre>{{ JSON.stringify($json, null, 2) }}</pre>",
        "options": {},
        "subject": "=Tax Return Declaration - {{ $now.format('MMMM yyyy') }}"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "credential-id",
          "name": "gmailOAuth2 Credential"
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "078cd1c0-cabf-48f7-b6d1-0eaa9e0a8804",
      "name": "Log Confirmation",
      "type": "n8n-nodes-base.set",
      "position": [
        912,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "confirmationCode",
              "type": "string",
              "value": "={{ $json.confirmationId || $json.messageId || 'CONF-' + $now.toMillis() }}"
            },
            {
              "id": "id-2",
              "name": "submissionTimestamp",
              "type": "string",
              "value": "={{ $now.toISO() }}"
            },
            {
              "id": "id-3",
              "name": "submissionMethod",
              "type": "string",
              "value": "={{ $('Submit to Government Portal').itemMatched ? 'Government Portal' : 'Tax Agent Email' }}"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "03940ee1-5346-43de-bbf4-2a2d76bcb486",
      "name": "Check Tax Owed",
      "type": "n8n-nodes-base.if",
      "position": [
        1152,
        144
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "leftValue": "",
            "caseSensitive": false,
            "typeValidation": "loose"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "id-1",
              "operator": {
                "type": "number",
                "operation": "gt"
              },
              "leftValue": "={{ $json.netTaxOwed }}",
              "rightValue": "0"
            }
          ]
        }
      },
      "typeVersion": 2.3
    },
    {
      "id": "ec843c32-764f-4d7e-8ab6-a11303fcbea3",
      "name": "Send Payment Reminder",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1376,
        48
      ],
      "webhookId": "69ce4fd2-efad-4ee9-9772-b137ff351b30",
      "parameters": {
        "sendTo": "={{ $('Workflow Configuration').first().json.companyEmail }}",
        "message": "=<h2>Tax Payment Reminder</h2><p>Your tax return has been submitted successfully.</p><p><strong>Amount Owed:</strong> ${{ $json.netTaxOwed.toFixed(2) }}</p><p><strong>Confirmation Code:</strong> {{ $json.confirmationCode }}</p><p>Please arrange payment by the due date to avoid penalties.</p>",
        "options": {},
        "subject": "=Payment Reminder: Tax Owed for {{ $now.format('MMMM yyyy') }}"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "credential-id",
          "name": "gmailOAuth2 Credential"
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "a743c5a0-4b59-4057-930f-6367d96f3a0a",
      "name": "No Action Required",
      "type": "n8n-nodes-base.set",
      "position": [
        1376,
        240
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "message",
              "type": "string",
              "value": "No tax payment required - refund or zero balance"
            },
            {
              "id": "id-2",
              "name": "completedAt",
              "type": "string",
              "value": "={{ $now.toISO() }}"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "26e4f331-6d7c-401a-9c1c-a62a68ec466e",
      "name": "Below Threshold Notice",
      "type": "n8n-nodes-base.set",
      "position": [
        464,
        192
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "message",
              "type": "string",
              "value": "Revenue below filing threshold - no tax return required"
            },
            {
              "id": "id-2",
              "name": "threshold",
              "type": "string",
              "value": "={{ $('Workflow Configuration').first().json.taxThreshold }}"
            },
            {
              "id": "id-3",
              "name": "actualRevenue",
              "type": "string",
              "value": "={{ $json.totalRevenue }}"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "382b5adf-1458-421d-8f9e-e3a45816fa05",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        736,
        -352
      ],
      "parameters": {
        "color": 5,
        "width": 432,
        "height": 224,
        "content": "## Customization\nAdjust tax thresholds by jurisdiction, integrate additional data sources \n\n## Benefits\nSignificant reduction in calculation errors, faster filing timelines, automated deadline alerts "
      },
      "typeVersion": 1
    },
    {
      "id": "078eecf8-877c-4797-b33f-1f420cd49f51",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        -352
      ],
      "parameters": {
        "color": 4,
        "width": 528,
        "height": 208,
        "content": "## Prerequisites\nOpenAI API key, Gmail account, Google Sheets, accounting software or data source connectivity \n\n## Use Cases\nQuarterly tax filing automation, multi-client accountant workflows, enterprise compliance monitoring "
      },
      "typeVersion": 1
    },
    {
      "id": "50a0355e-a31c-4c9d-96c3-3728db9c2e9e",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -288,
        -352
      ],
      "parameters": {
        "color": 3,
        "width": 416,
        "height": 208,
        "content": "## Setup Steps\n1. Configure OpenAI, Gmail, and Google Sheets credentials\n2. Connect revenue and expense data sources\n3. Define tax thresholds and jurisdiction \n4. Map output fields to government or tax agent systems\n5. Create email templates for notifications\n"
      },
      "typeVersion": 1
    },
    {
      "id": "2606642b-d858-4587-905d-c3b1fe14fa8d",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1168,
        -368
      ],
      "parameters": {
        "width": 864,
        "height": 224,
        "content": "## How It Works\nAutomates financial aggregation, validation, and intelligent tax assessment. Integrates revenue, expenses, and invoices via scheduled connectors, merges data into unified records, and applies AI-driven analysis for anomaly detection and tax calculations. The system evaluates tax liability against configurable thresholds, intelligently routes filings to government portals or tax agents based on jurisdiction rules, and triggers automated email notifications for compliance deadlines and payment reminders. Designed for accountants, small business owners, and finance teams managing quarterly tax obligations while minimizing manual errors and compliance risks across multiple entities.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "372349e6-91fd-45f0-aa42-e0055e650802",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1184,
        -112
      ],
      "parameters": {
        "color": 7,
        "width": 864,
        "height": 672,
        "content": "## Data Collection \n– Fetches revenue, expenses, and invoice data from source systems weekly\n**Why:** Ensures current financial information for accurate tax calculations"
      },
      "typeVersion": 1
    },
    {
      "id": "acfb2c6d-b6f2-4226-a721-d382ee0e0133",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -288,
        -112
      ],
      "parameters": {
        "color": 7,
        "width": 480,
        "height": 672,
        "content": "## AI Validation \n– OpenAI processes financials, extracts metrics, and identifies anomalies\n**Why:** Catches errors and ensures accurate obligation determination\n"
      },
      "typeVersion": 1
    },
    {
      "id": "beca0d2b-04a8-4120-b3a3-ac20dbaeec93",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        208,
        -112
      ],
      "parameters": {
        "color": 7,
        "width": 656,
        "height": 672,
        "content": "## Threshold Checking & Routing\n– Compares calculated liability against predefined rules\n**Why:** Identifies filing requirements and special circumstances"
      },
      "typeVersion": 1
    },
    {
      "id": "9a721f3e-2ccb-4dc9-95bd-59412da9e451",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        880,
        -112
      ],
      "parameters": {
        "color": 7,
        "width": 720,
        "height": 688,
        "content": "## Automated Communication \n– Sends notices and reminders via email\n**Why:** Maintains deadline compliance and payment timeliness"
      },
      "typeVersion": 1
    },
    {
      "id": "7729f16b-9a31-4692-8e34-1dce386de16e",
      "name": "Fetch Revenue Data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -688,
        16
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.revenueApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b252c13c-8265-40ee-89f9-c73a36dc8d59",
  "connections": {
    "Check Tax Owed": {
      "main": [
        [
          {
            "node": "Send Payment Reminder",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "No Action Required",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculator Tool": {
      "ai_tool": [
        [
          {
            "node": "Tax Validation & Calculation Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Log Confirmation": {
      "main": [
        [
          {
            "node": "Check Tax Owed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Tax Validation & Calculation Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send to Tax Agent": {
      "main": [
        [
          {
            "node": "Log Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Revenue Data": {
      "main": [
        [
          {
            "node": "Merge Financial Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Tax Threshold": {
      "main": [
        [
          {
            "node": "Generate Tax Declaration",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Below Threshold Notice",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Expenses Data": {
      "main": [
        [
          {
            "node": "Merge Financial Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Invoices Data": {
      "main": [
        [
          {
            "node": "Merge Financial Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Financial Data": {
      "main": [
        [
          {
            "node": "Tax Validation & Calculation Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Workflow Configuration": {
      "main": [
        [
          {
            "node": "Fetch Expenses Data",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch Invoices Data",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch Revenue Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Tax Declaration": {
      "main": [
        [
          {
            "node": "Submit to Government Portal",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send to Tax Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Monthly Tax Return Schedule": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Submit to Government Portal": {
      "main": [
        [
          {
            "node": "Log Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tax Calculation Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Tax Validation & Calculation Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Tax Validation & Calculation Agent": {
      "main": [
        [
          {
            "node": "Check Tax Threshold",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}