{
  "id": "E5xp8FRjYVzxXsub",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Predict tenant churn and manage retention with GPT-4, Gmail, Slack and your CRM",
    "wechat": "youandme10086",
    "id": 12038,
    "update_time": "2026-02-13"
  },
  "name": "Smart AI-Driven Tenant Experience & Retention Manager",
  "tags": [],
  "nodes": [
    {
      "id": "6be34c1a-88a9-4271-9b55-7fe2a0e621c6",
      "name": "Daily Tenant Analysis Schedule",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -2464,
        208
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 8
            }
          ]
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "80cbdf69-3b70-416c-a0c7-495a8561b179",
      "name": "Workflow Configuration",
      "type": "n8n-nodes-base.set",
      "position": [
        -2240,
        208
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "tenantApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Tenant API endpoint URL__>"
            },
            {
              "id": "id-2",
              "name": "serviceRequestApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Service Request API endpoint URL__>"
            },
            {
              "id": "id-3",
              "name": "feedbackApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Feedback API endpoint URL__>"
            },
            {
              "id": "id-4",
              "name": "crmApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__CRM API endpoint URL__>"
            },
            {
              "id": "id-5",
              "name": "dashboardApiUrl",
              "type": "string",
              "value": "<__PLACEHOLDER_VALUE__Dashboard API endpoint URL__>"
            },
            {
              "id": "id-6",
              "name": "churnRiskThreshold",
              "type": "number",
              "value": 70
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "8b648979-9e45-4b38-a14e-dca71cee1977",
      "name": "Fetch Tenant Data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -2016,
        112
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.tenantApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "494bd936-83ab-4c3d-afb6-be8a84a59671",
      "name": "Fetch Service Requests",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -2016,
        304
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.serviceRequestApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "f55241dc-e19d-4a35-98a8-75fbbd12669e",
      "name": "Fetch Feedback Data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -2016,
        496
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.feedbackApiUrl }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "4b1fe135-81ae-4b8e-a605-2030295a8d04",
      "name": "Merge Tenant Intelligence",
      "type": "n8n-nodes-base.set",
      "position": [
        -1792,
        208
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "tenantData",
              "type": "object",
              "value": "={{ $('Fetch Tenant Data').all() }}"
            },
            {
              "id": "id-2",
              "name": "serviceRequests",
              "type": "array",
              "value": "={{ $('Fetch Service Requests').all() }}"
            },
            {
              "id": "id-3",
              "name": "feedbackData",
              "type": "array",
              "value": "={{ $('Fetch Feedback Data').all() }}"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "9e15edba-51ef-4c51-ab80-2cbda639b47a",
      "name": "Tenant Analysis Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -1568,
        208
      ],
      "parameters": {
        "text": "=Analyze this tenant data: {{ JSON.stringify($json) }}",
        "options": {
          "systemMessage": "You are a tenant experience analyst specializing in predicting satisfaction and churn risk.\n\nYour task is to:\n1. Analyze tenant engagement patterns, service request history, and feedback data\n2. Calculate a satisfaction score (0-100) based on feedback sentiment, response times, and issue resolution\n3. Predict churn risk score (0-100) considering: unresolved issues, negative feedback trends, lease renewal proximity, engagement decline\n4. Classify churn risk level as low (<40), medium (40-70), or high (>70)\n5. Identify key issues affecting tenant satisfaction\n6. Recommend specific retention actions (personalized communications, loyalty rewards, lease incentives)\n7. Assess engagement level based on interaction frequency and responsiveness\n\nProvide comprehensive analysis with actionable insights for each tenant."
        },
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 3.1
    },
    {
      "id": "4d5867af-2d89-4288-a47b-9e0e01e9f251",
      "name": "OpenAI GPT-4",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -1568,
        432
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "id",
          "value": "gpt-4o"
        },
        "options": {},
        "builtInTools": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "credential-id",
          "name": "openAiApi Credential"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "8be35a26-e00b-45cf-8c9f-e1e743cd7da4",
      "name": "Analysis Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        -1440,
        432
      ],
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"tenantId\": {\n      \"type\": \"string\",\n      \"description\": \"Unique tenant identifier\"\n    },\n    \"tenantName\": {\n      \"type\": \"string\",\n      \"description\": \"Tenant name\"\n    },\n    \"satisfactionScore\": {\n      \"type\": \"number\",\n      \"description\": \"Overall satisfaction score from 0-100\"\n    },\n    \"churnRiskScore\": {\n      \"type\": \"number\",\n      \"description\": \"Churn risk score from 0-100, higher means more likely to leave\"\n    },\n    \"churnRiskLevel\": {\n      \"type\": \"string\",\n      \"description\": \"Risk level: low, medium, or high\"\n    },\n    \"keyIssues\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\": \"List of key issues affecting tenant satisfaction\"\n    },\n    \"recommendedActions\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\": \"Recommended retention actions\"\n    },\n    \"engagementLevel\": {\n      \"type\": \"string\",\n      \"description\": \"Engagement level: low, medium, or high\"\n    }\n  }\n}"
      },
      "typeVersion": 1.3
    },
    {
      "id": "d9d275c4-c530-4519-8fa4-66e081ec6256",
      "name": "Check Churn Risk Level",
      "type": "n8n-nodes-base.if",
      "position": [
        -1200,
        352
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "leftValue": "",
            "caseSensitive": false,
            "typeValidation": "loose"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "id-1",
              "operator": {
                "type": "number",
                "operation": "gte"
              },
              "leftValue": "={{ $('Tenant Analysis Agent').item.json.churnRiskScore }}",
              "rightValue": "={{ $('Workflow Configuration').first().json.churnRiskThreshold }}"
            }
          ]
        }
      },
      "typeVersion": 2.3
    },
    {
      "id": "ac66603d-b998-41c1-abe1-49ebfceae010",
      "name": "High Risk Communication Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -704,
        160
      ],
      "parameters": {
        "text": "=High-risk tenant detected: {{ $json.tenantName }} (ID: {{ $json.tenantId }}). Churn risk: {{ $json.churnRiskScore }}%. Key issues: {{ JSON.stringify($json.keyIssues) }}. Recommended actions: {{ JSON.stringify($json.recommendedActions) }}.",
        "options": {
          "systemMessage": "You are a tenant retention specialist focused on preventing churn for high-risk tenants.\n\nYour task is to:\n1. Use the Gmail Tool to send a personalized retention email to the tenant addressing their specific concerns and offering solutions (lease incentives, service improvements, or special accommodations)\n2. Use the Slack Tool to notify the property management team about the high-risk tenant with a summary of issues and recommended immediate actions\n3. Craft empathetic, solution-oriented communications that demonstrate care and commitment to tenant satisfaction\n4. Include specific incentives or offers based on the tenant's issues (rent discount, amenity upgrades, priority maintenance)\n\nExecute both communication actions and confirm completion."
        },
        "promptType": "define"
      },
      "typeVersion": 3.1
    },
    {
      "id": "ea4a89ec-0aa4-4260-bd70-fc467ae95c81",
      "name": "OpenAI GPT-4 for Communications",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -752,
        320
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "id",
          "value": "gpt-4o"
        },
        "options": {},
        "builtInTools": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "credential-id",
          "name": "openAiApi Credential"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "c2ad0c2b-b94c-428c-9406-6c24b9d90ebd",
      "name": "Gmail Tool",
      "type": "n8n-nodes-base.gmailTool",
      "position": [
        -624,
        320
      ],
      "webhookId": "caf7b624-f67a-4159-8068-cbef1a20f1ab",
      "parameters": {
        "sendTo": "={{ $fromAI('recipientEmail', 'Tenant email address', 'string') }}",
        "message": "={{ $fromAI('emailBody', 'Personalized email content in HTML format', 'string') }}",
        "options": {},
        "subject": "={{ $fromAI('emailSubject', 'Email subject line', 'string') }}"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "credential-id",
          "name": "gmailOAuth2 Credential"
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "18a3db0e-ee8d-4cd7-bfa4-36cd45df1051",
      "name": "Slack Tool",
      "type": "n8n-nodes-base.slackTool",
      "position": [
        -496,
        320
      ],
      "webhookId": "f937d47f-1aac-47b3-ba23-cd28d2249784",
      "parameters": {
        "text": "={{ $fromAI('slackMessage', 'Internal notification message about tenant risk', 'string') }}",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $fromAI('slackChannel', 'Slack channel ID for internal notifications', 'string') }}"
        },
        "otherOptions": {},
        "authentication": "oAuth2"
      },
      "credentials": {
        "slackOAuth2Api": {
          "id": "credential-id",
          "name": "slackOAuth2Api Credential"
        }
      },
      "typeVersion": 2.4
    },
    {
      "id": "311bf38f-6eb7-4833-b147-46c240969118",
      "name": "Low Risk Engagement",
      "type": "n8n-nodes-base.set",
      "position": [
        -976,
        496
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "emailSubject",
              "type": "string",
              "value": "Thank You for Being a Valued Tenant!"
            },
            {
              "id": "id-2",
              "name": "emailBody",
              "type": "string",
              "value": "=<html><body><h2>Dear {{ $json.tenantName }},</h2><p>We appreciate your continued tenancy and positive engagement with our community. As a token of our gratitude, we're pleased to offer you an exclusive loyalty reward.</p><p><strong>Your Reward:</strong> 10% off your next month's rent or a complimentary amenity upgrade.</p><p>Thank you for making our community a great place to live!</p><p>Best regards,<br>Property Management Team</p></body></html>"
            }
          ]
        },
        "includeOtherFields": true
      },
      "typeVersion": 3.4
    },
    {
      "id": "2619e033-a98a-4589-98e7-6cc2ddf61091",
      "name": "Send Loyalty Reward Email",
      "type": "n8n-nodes-base.gmail",
      "position": [
        -640,
        496
      ],
      "webhookId": "d1e72ebc-1d1d-4e3e-9fbc-9d86e615afeb",
      "parameters": {
        "sendTo": "={{ $json.tenantEmail || '<__PLACEHOLDER_VALUE__Tenant email field from data__>' }}",
        "message": "={{ $json.emailBody }}",
        "options": {},
        "subject": "={{ $json.emailSubject }}"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "credential-id",
          "name": "gmailOAuth2 Credential"
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "c28dfef1-fcf7-4444-8214-044114ed973a",
      "name": "Update CRM",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -288,
        352
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.crmApiUrl }}",
        "method": "POST",
        "options": {},
        "jsonBody": "={{ { tenantId: $json.tenantId, satisfactionScore: $json.satisfactionScore, churnRiskScore: $json.churnRiskScore, churnRiskLevel: $json.churnRiskLevel, lastAnalyzed: new Date().toISOString(), actionsTaken: $json.recommendedActions } }}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "cdc6188d-d63b-4b66-a1ec-dd1e3c5ee97b",
      "name": "Update Retention Dashboard",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -64,
        352
      ],
      "parameters": {
        "url": "={{ $('Workflow Configuration').first().json.dashboardApiUrl }}",
        "method": "POST",
        "options": {},
        "jsonBody": "={{ { tenantId: $json.tenantId, tenantName: $json.tenantName, satisfactionScore: $json.satisfactionScore, churnRiskScore: $json.churnRiskScore, churnRiskLevel: $json.churnRiskLevel, engagementLevel: $json.engagementLevel, timestamp: new Date().toISOString() } }}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "typeVersion": 4.3
    },
    {
      "id": "bf263785-4a2d-4363-ba7e-ec1c0800e795",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -976,
        -240
      ],
      "parameters": {
        "color": 6,
        "width": 400,
        "height": 208,
        "content": "## Customization\nAdjust churn risk algorithms and thresholds,  \n\n## Benefits\nPredicts churn before it happens, enables proactive retention "
      },
      "typeVersion": 1
    },
    {
      "id": "f7ce6d3b-927f-4a5e-bda8-8d617f51d381",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1344,
        -240
      ],
      "parameters": {
        "color": 5,
        "width": 336,
        "height": 208,
        "content": "## Prerequisites\nTenant/customer data source; service request system; feedback collection tool;  \n\n## Use Cases\nProperty management automating tenant retention across portfolios; "
      },
      "typeVersion": 1
    },
    {
      "id": "c4d21313-79f7-4a20-8ff4-1d7430005924",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1744,
        -240
      ],
      "parameters": {
        "width": 368,
        "height": 208,
        "content": "## Setup Steps\n1. Configure tenant data sources.\n2. Connect OpenAI GPT-4 API for risk analysis and churn prediction.\n3. Set up Gmail, Slack, and CRM credentials for communication and tracking.\n4. Define churn risk thresholds, retention messaging templates, and reward programs."
      },
      "typeVersion": 1
    },
    {
      "id": "29f73400-c02d-45b0-86cd-a1e03881ff0e",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2464,
        -240
      ],
      "parameters": {
        "width": 704,
        "height": 256,
        "content": "## How It Works\nAutomates daily tenant analytics, churn risk evaluation, and proactive retention by unifying tenant data from multiple sources, applying GPT-4â€“based risk scoring, detecting early churn indicators, routing high-risk tenants to retention specialists, and initiating targeted engagement campaigns. It retrieves tenant profiles, service requests, and feedback data, performs GPT-4 analysis with detailed churn risk insights, assesses engagement levels, escalates high-risk tenants to dedicated communication teams, delivers personalized loyalty incentives and engagement emails, and updates CRM systems and retention dashboards. Designed for property management companies and SaaS providers."
      },
      "typeVersion": 1
    },
    {
      "id": "9d7de854-37af-4666-9495-c19eb81867af",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1024,
        16
      ],
      "parameters": {
        "color": 7,
        "width": 1152,
        "height": 704,
        "content": "## Execute Retention Actions and Updates\nWhat: Sends personalized communications, loyalty rewards, and engagement campaigns .\nWhy: Delivers timely, relevant interventions that reduce churn and strengthen relationships."
      },
      "typeVersion": 1
    },
    {
      "id": "54a69055-4add-4319-961a-7b10c218d1b5",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1648,
        16
      ],
      "parameters": {
        "color": 7,
        "width": 608,
        "height": 672,
        "content": "## Assess Churn Risk\nWhat: Uses GPT-4 to analyze behavioral signals and assign churn risk scores.\nWhy: Identifies at-risk tenants early for proactive intervention."
      },
      "typeVersion": 1
    },
    {
      "id": "426843fa-ac33-400a-b6a8-c98308419f21",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2480,
        16
      ],
      "parameters": {
        "color": 7,
        "width": 816,
        "height": 672,
        "content": "## Consolidate Tenant Intelligence\nWhat: Merges tenant data from service requests, feedback, and engagement systems.\nWhy: Provides holistic view of tenant health and satisfaction across touchpoints."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "availableInMCP": false,
    "executionOrder": "v1"
  },
  "versionId": "739d80b4-ec66-4839-a888-6f2a369fe75e",
  "connections": {
    "Gmail Tool": {
      "ai_tool": [
        [
          {
            "node": "High Risk Communication Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Slack Tool": {
      "ai_tool": [
        [
          {
            "node": "High Risk Communication Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Update CRM": {
      "main": [
        [
          {
            "node": "Update Retention Dashboard",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI GPT-4": {
      "ai_languageModel": [
        [
          {
            "node": "Tenant Analysis Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Tenant Data": {
      "main": [
        [
          {
            "node": "Merge Tenant Intelligence",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Feedback Data": {
      "main": [
        [
          {
            "node": "Merge Tenant Intelligence",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Low Risk Engagement": {
      "main": [
        [
          {
            "node": "Send Loyalty Reward Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tenant Analysis Agent": {
      "main": [
        [
          {
            "node": "Check Churn Risk Level",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analysis Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Tenant Analysis Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Check Churn Risk Level": {
      "main": [
        [
          {
            "node": "High Risk Communication Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Low Risk Engagement",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Service Requests": {
      "main": [
        [
          {
            "node": "Merge Tenant Intelligence",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Workflow Configuration": {
      "main": [
        [
          {
            "node": "Fetch Tenant Data",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch Service Requests",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch Feedback Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Tenant Intelligence": {
      "main": [
        [
          {
            "node": "Tenant Analysis Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Loyalty Reward Email": {
      "main": [
        [
          {
            "node": "Update CRM",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "High Risk Communication Agent": {
      "main": [
        [
          {
            "node": "Update CRM",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Daily Tenant Analysis Schedule": {
      "main": [
        [
          {
            "node": "Workflow Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI GPT-4 for Communications": {
      "ai_languageModel": [
        [
          {
            "node": "High Risk Communication Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  }
}