{
  "id": "CQ33IAKSfdDbLzmK",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automated Gold Price Threshold Alerts via LINE with Web Scraping",
    "wechat": "youandme10086",
    "id": 6265,
    "update_time": "2025-11-10"
  },
  "name": "Gold Price Alert",
  "tags": [],
  "nodes": [
    {
      "id": "771277db-5553-4d8f-8519-a27e25107178",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -480,
        20
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "cf148eee-50dc-41a7-9555-a906676bbc81",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        360,
        20
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "6decc8be-9041-4975-b700-16f8360578b5",
              "operator": {
                "type": "number",
                "operation": "gt"
              },
              "leftValue": "={{ parseFloat($json['#DetailPlace_uc_goldprices1_lblBLBuy'].replace(/[^\\d.]/g, '')) }}",
              "rightValue": 52300
            },
            {
              "id": "553a009d-a08a-4746-b546-d1a43352b07f",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "f98523e4-4dbc-486c-9a7e-babb024aa907",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        -80
      ],
      "parameters": {
        "width": 260,
        "height": 260,
        "content": "Schedule to check every 6 hours to see the current gold price"
      },
      "typeVersion": 1
    },
    {
      "id": "62bd43cd-755c-44b7-b30d-27416d61f9a5",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -280,
        -80
      ],
      "parameters": {
        "color": 5,
        "width": 260,
        "height": 260,
        "content": "To get normal webpage, we can use HTTP request without any authoriation and the output will be HTML code"
      },
      "typeVersion": 1
    },
    {
      "id": "e6d39001-667e-4632-9b46-2890e2c9aa60",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        -80
      ],
      "parameters": {
        "color": 5,
        "width": 260,
        "height": 260,
        "content": "We would specify what we want from the HTML code earlier eg. Price -- You can find the element by right click > inspect "
      },
      "typeVersion": 1
    },
    {
      "id": "ec2e7f8b-1867-436a-8537-af9c69d9c726",
      "name": "Get Webpage",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -200,
        20
      ],
      "parameters": {
        "url": "https://www.goldtraders.or.th/",
        "options": {}
      },
      "typeVersion": 4.2
    },
    {
      "id": "35f7cac8-ce35-4ba8-893d-aa69e0ea5141",
      "name": "Extract Price",
      "type": "n8n-nodes-base.html",
      "position": [
        80,
        20
      ],
      "parameters": {
        "options": {},
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "#DetailPlace_uc_goldprices1_lblBLBuy",
              "cssSelector": "#DetailPlace_uc_goldprices1_lblBLBuy"
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "a8f8d4ed-124d-4921-a03a-25459a015100",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        280,
        -140
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 320,
        "content": "We do not want all the alerts. Thus, we only filter to alert once the price is more than the given number.\n\nIn order to compare, we also need to convert the text to number as well."
      },
      "typeVersion": 1
    },
    {
      "id": "1a3cce75-f2d0-4934-b0c9-7c7f8b4e5681",
      "name": "Send Line Message",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        660,
        -120
      ],
      "parameters": {
        "url": "https://api.line.me/v2/bot/message/push",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n    \"to\": \"Ue9cc622e33e5333e3784298412ec9aed\",\n    \"messages\":[\n        {\n            \"type\":\"text\",\n            \"text\":\"ราคาทองวันนี้  {{ $json['#DetailPlace_uc_goldprices1_lblBLBuy'] }}\"\n        }\n    ]\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "lKd3b2nc8uNJ148Z",
          "name": "Line @271dudsw MiniBear"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "b979a549-4717-49f1-8678-e3b699682dc9",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        580,
        -220
      ],
      "parameters": {
        "width": 260,
        "height": 260,
        "content": "When the condition is met, it'll send the message via line. This can be other platform such as telegram or email"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ac7f75f8-6820-4ec3-9934-0fbcc45cfad3",
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Send Line Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Webpage": {
      "main": [
        [
          {
            "node": "Extract Price",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Price": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get Webpage",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}