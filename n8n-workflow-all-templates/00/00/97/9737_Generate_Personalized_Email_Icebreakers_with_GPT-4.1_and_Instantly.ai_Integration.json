{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Generate Personalized Email Icebreakers with GPT-4.1 and Instantly.ai Integration",
    "wechat": "youandme10086",
    "id": 9737,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "eacefbd2-c1f8-42d9-96f2-a56445f789eb",
      "name": "Markdown",
      "type": "n8n-nodes-base.markdown",
      "onError": "continueRegularOutput",
      "position": [
        1072,
        160
      ],
      "parameters": {
        "html": "={{ $json.data ? $json.data : \"<div>empty</div>\" }}",
        "options": {}
      },
      "typeVersion": 1
    },
    {
      "id": "c8621573-2728-4e0a-9717-5548fa337880",
      "name": "Summarize Website Page",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "maxTries": 5,
      "position": [
        368,
        368
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You're a helpful, intelligent website scraping assistant."
            },
            {
              "content": "You're provided a Markdown scrape of a website page. Your task is to provide a two-paragraph abstract of content on their page.\n\nReturn in this JSON format:\n\n{\"abstract\":\"your abstract goes here\"}\n\nRules:\n- Your extract should be comprehensive—similar level of detail as an abstract to a published paper.\n- Use a straightforward, spartan tone of voice.\n- If it's empty, just say \"no content\"."
            },
            {
              "content": "={{ $json.data }}"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "kcZxf0FA03D9xVdd",
          "name": "Sycorda"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1.6,
      "waitBetweenTries": 5000
    },
    {
      "id": "c4295603-28b6-4c6a-a066-1827f9600b6d",
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "onError": "continueRegularOutput",
      "position": [
        704,
        368
      ],
      "parameters": {
        "options": {},
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "message.content.abstract"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "1a627984-9bca-429a-92b8-b6fe43f65362",
      "name": "Generate Multiline Icebreaker",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "maxTries": 5,
      "position": [
        912,
        368
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1",
          "cachedResultName": "GPT-4.1"
        },
        "options": {
          "temperature": 0.5
        },
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You're a helpful, intelligent sales assistant."
            },
            {
              "content": "=We just scraped a series of web pages for a business called Property Manager or Real estate. Your task is to take their summaries and turn them into one two line catchy, personalized openers for a cold email campaign to imply that the rest of the campaign is personalized.\n\nYou'll return your icebreakers in the following JSON format:\n\n{\n  \"icebreaker\": \"Really Loved {thing}, especially how you're {doing/managing/handling} {otherThing}\"\n}\nRules:\n- Write in a spartan/laconic tone of voice.\n- don't add this \"—\" anywhere.\n- Make sure to use the above format when constructing your icebreakers. We wrote it this way on purpose.\n- Shorten the company name wherever possible (say, \"XYZ\" instead of \"XYZ Agency\"). More examples: \"Love AMS\" instead of \"Love AMS Professional Services\", \"Love Mayo\" instead of \"Love Mayo Inc.\", etc.\n- Do the same with locations. \"San Fran\" instead of \"San Francisco\", \"BC\" instead of \"British Columbia\", etc.\n- For your variables, focus on small, non-obvious things to paraphrase. The idea is to make people think we *really* dove deep into their website, so don't use something obvious. Do not say cookie-cutter stuff like \"Love your website!\" or \"Love your take on marketing!\".\n\nVERY VERY IMPORTANT:\n\"Dont use any special characters\"\nDont Use hyphen ( - ) and compund words"
            },
            {
              "content": "=Profile: David Ross, Partner at Argo Property Group / Real Estate Design, Development, and Investment company based in Philadelphia PA\n\n\nWebsite: \n\n\"Argo Property Group is a Philadelphia-based developer focused on creating high-quality homes and communities. Their featured projects include Laurel Ridge, Wissahickon Place, and Paradise Peak, which offer distinctive new construction townhomes with amenities such as private garages and roof decks in neighborhoods like East Falls, Manayunk, and Paradise. The company also offers apartments that emphasize quality, energy efficiency, and comfortable living environments.\\n\\nIn addition to developing residential properties, Argo provides comprehensive developer services including entitlements, design, construction, and post-development. They cater to investors interested in social impact and sustainable design, offering investment options such as preferred return, equity, and lending. The website includes a contact form for prospective tenants, homeowners, and current residents to inquire about properties and services.\",\n\n\"Argo Property Group is a real estate development company focused on new construction and renovation projects primarily in Philadelphia neighborhoods such as Paradise, East Falls, Wissahickon, Manayunk, Germantown, Brewerytown, and Fairmount. Their current development portfolio includes several projects under construction, such as Laurel Ridge Estates with 21 townhomes, Paradise Peak with 24 townhomes, Wissahickon Place with six luxury townhomes, and Clearfield Court with 26 residences. They also have upcoming projects like Chelten Ave, a mixed-use building with 46 units plus commercial space, and a second phase at Laurel Ridge Estates adding 22 more townhomes for sale.\\n\\nThe company has completed over 200 homes and apartments, including notable projects like Chelten Terminal with 45 units plus commercial space, The Vale with 36 residences and commercial space, The Bordeaux, The Fairview, and several smaller residential developments in Brewerytown and Paradise. They also provide options for prospective tenants, homeowners, and current residents to contact them for inquiries related to properties such as The Vale, Chelten Terminal, The Bordeaux, and others. Argo Property Group operates out of Philadelphia and emphasizes residential and mixed-use development, combining new builds with renovations to support neighborhood growth.\",\n\"Argo Property Group offers rental apartments with a focus on customer service and leasing support. The website provides information about new lease incentives and encourages prospective tenants to inquire about available properties through direct email contact. Users can fill out a detailed contact form to request leasing information and check apartment availability, facilitating communication between the company and potential renters.\\n\\nAdditionally, the site features a messaging form for various inquiries, allowing users to specify their interest in specific properties such as The Vale, Chelten Terminal, The Bordeaux, and Milk Depot, or home sales. The form also collects essential contact details and distinguishes between prospective tenants, homeowners, and current occupants. The company's contact information, including email and physical address in Philadelphia, is prominently displayed to assist users in connecting with the group.\",\n\n\"Argo Property Group focuses on investment opportunities in Philadelphia real estate, emphasizing social impact, sustainable design, and consistent financial returns. Their portfolio primarily consists of projects within Qualified Opportunity Zones, including new construction and significant value-add developments. Investors can participate through preferred returns, equity, and lending options, targeting key markets in Philadelphia, PA. The company provides information on current and upcoming projects and offers direct contact via email for those interested in investing.\\n\\nThe website also facilitates communication with potential tenants, homeowners, and current residents through a message form that includes options related to specific properties and user status. Argo Property Group is based in Philadelphia and maintains a straightforward web presence with navigation links to home, projects, rent, news, invest, and about sections. Contact details and a copyright notice are provided at the bottom of the page.\",\n\n\"Argo Property Group is a vertically integrated real estate development firm located in Philadelphia, Pennsylvania. The company focuses on building vibrant, inclusive, and thriving communities through collaborative and transparent planning involving community groups, local businesses, and institutions. They emphasize energy-efficient and modern construction methods to preserve natural resources and promote healthy living. Argo values strong partnerships with debt and equity stakeholders to ensure robust returns while fostering sustainable community development.\\n\\nThe company provides multiple channels for engagement, including a contact form for prospective tenants, homeowners, and current residents to communicate specifically about various properties such as The Vale, Chelten Terminal, The Bordeaux, and Milk Depot. Located at 6024 Ridge Avenue in Philadelphia, Argo Property Group positions itself as a responsible steward for communities, the environment, and its business partnerships, aiming to deliver stable and sustainable real estate development outcomes."
            },
            {
              "role": "assistant",
              "content": "{\n  \"icebreaker\": \"Really Loved {thing}, especially how you're {doing/managing/handling} {otherThing}. Quick question  have you ever wondered how property managers are cutting repair approval times from 3 days to 30 minutes?\"\n}\n\nVERY VERY IMPORTANT:\n\"Dont use any special characters\"\nDont Use hyphen ( - ) and compund words"
            },
            {
              "content": "=Profile: {{ $('Loop Over Items').item.json.first_name }} {{ $('Loop Over Items').item.json.last_name }} {{ $('Get row(s)').item.json.Headline }}\n\nWebsite: {{ $json.abstract.join(\"/n\") }}\n\nVERY VERY IMPORTANT:\n\"Dont use any special characters\"\nDont Use hyphen ( - ) and compund words"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "kcZxf0FA03D9xVdd",
          "name": "Sycorda"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1.6,
      "waitBetweenTries": 5000
    },
    {
      "id": "1bb7958a-704c-421d-8494-1d29206131d8",
      "name": "Only Websites & Emails",
      "type": "n8n-nodes-base.filter",
      "position": [
        1264,
        -64
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "fc44a289-8c50-4682-8b50-c2e63cfc6514",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              },
              "leftValue": "={{ $json.organization_website_url }}",
              "rightValue": "/"
            },
            {
              "id": "f8e675e8-99cc-4c30-92e3-e08a659cff9b",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              },
              "leftValue": "={{ $json.email }}",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "85228edc-1afa-47fd-99b4-f21c87b2da53",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "onError": "continueRegularOutput",
      "position": [
        176,
        128
      ],
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "typeVersion": 3
    },
    {
      "id": "7a09e833-d264-42bb-878d-44e3da4daddc",
      "name": "Request web page for URL1",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueRegularOutput",
      "position": [
        448,
        144
      ],
      "parameters": {
        "url": "={{ $('Get row(s)').item.json.organization_website_url }}",
        "options": {}
      },
      "retryOnFail": true,
      "typeVersion": 4.2,
      "alwaysOutputData": true
    },
    {
      "id": "c62817ce-eb2e-4488-9c47-d32f8f50af34",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        704,
        144
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "d7785fea-b640-486c-80b6-0afca9215069",
              "operator": {
                "type": "string",
                "operation": "contains"
              },
              "leftValue": "={{ $json.name}}",
              "rightValue": "Error"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "a32dc508-b5bf-41e2-8444-802dc2faba24",
      "name": "Get row(s)",
      "type": "n8n-nodes-base.dataTable",
      "position": [
        448,
        -64
      ],
      "parameters": {
        "limit": 30,
        "filters": {
          "conditions": [
            {
              "keyName": "Email_Status"
            }
          ]
        },
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "mode": "list",
          "value": "mxmipfKkGdLWKEeH",
          "cachedResultUrl": "/projects/ZmzftZWWXg1Qbam3/datatables/mxmipfKkGdLWKEeH",
          "cachedResultName": "Real estate"
        }
      },
      "typeVersion": 1,
      "alwaysOutputData": false
    },
    {
      "id": "a3533448-2c06-4cac-9f5f-6126c623113d",
      "name": "Delete row(s)",
      "type": "n8n-nodes-base.dataTable",
      "onError": "continueRegularOutput",
      "position": [
        1312,
        128
      ],
      "parameters": {
        "filters": {
          "conditions": [
            {
              "keyValue": "={{ $('Get row(s)').item.json.id }}"
            }
          ]
        },
        "options": {},
        "operation": "deleteRows",
        "dataTableId": {
          "__rl": true,
          "mode": "list",
          "value": "mxmipfKkGdLWKEeH",
          "cachedResultUrl": "/projects/ZmzftZWWXg1Qbam3/datatables/mxmipfKkGdLWKEeH",
          "cachedResultName": "Real estate"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "bf3f167e-b42f-4d12-9947-398e590099da",
      "name": "Limit",
      "type": "n8n-nodes-base.limit",
      "position": [
        768,
        -64
      ],
      "parameters": {
        "maxItems": 30
      },
      "typeVersion": 1
    },
    {
      "id": "501c6e3a-3d6f-47af-a7c9-3dbd808cd864",
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        128,
        -64
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "7a3a8e3a-23d1-4a06-a15e-c704fb2cb794",
      "name": "Delete row(s)1",
      "type": "n8n-nodes-base.dataTable",
      "onError": "continueRegularOutput",
      "position": [
        1472,
        384
      ],
      "parameters": {
        "filters": {
          "conditions": [
            {
              "keyValue": "={{ $('Get row(s)').item.json.id }}"
            }
          ]
        },
        "options": {},
        "operation": "deleteRows",
        "dataTableId": {
          "__rl": true,
          "mode": "list",
          "value": "mxmipfKkGdLWKEeH",
          "cachedResultUrl": "/projects/ZmzftZWWXg1Qbam3/datatables/mxmipfKkGdLWKEeH",
          "cachedResultName": "Real estate"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "6ec90b5f-58ac-4176-8311-dc7ff0aa4ed8",
      "name": "Sending ice breaker to instantly",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1264,
        368
      ],
      "parameters": {
        "url": "https://api.instantly.ai/api/v1/lead/add",
        "method": "POST",
        "options": {
          "redirect": {
            "redirect": {}
          }
        },
        "jsonBody": "{\n  \"api_key\": \"\",\n  \"campaign_id\": \"00000000-0000-0000-0000-000000000000\",\n  \"skip_if_in_workspace\": false,\n  \"skip_if_in_campaign\": true,\n  \"leads\": [\n    {\n      \"email\": \"john@abc.com\",\n      \"first_name\": \"John\",\n      \"last_name\": \"Doe\",\n      \"company_name\": \"Instantly\",\n      \"personalization\": \"Loved your latest post\",\n      \"phone\": \"123456789\",\n      \"website\": \"instantly.ai\",\n      \"custom_variables\": {\n        \"favorite_restaurant\": \"Chipotle\",\n        \"language\": \"English\"\n      }\n    },\n    {\n      \"email\": \"jane@abc.com\",\n      \"first_name\": \"Jane\",\n      \"last_name\": \"Smith\",\n      \"company_name\": \"Instantly\",\n      \"personalization\": \"Will you be attending the conference in New York?\",\n      \"phone\": \"123456789\",\n      \"website\": \"instantly.ai\",\n      \"custom_variables\": {\n        \"favorite_restaurant\": \"Chipotle\",\n        \"language\": \"English\"\n      }\n    }\n  ]\n}",
        "sendBody": true,
        "specifyBody": "json"
      },
      "typeVersion": 4.2
    },
    {
      "id": "69d15f1a-da5b-4150-b5b4-82968c6193ff",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        480,
        -400
      ],
      "parameters": {
        "width": 496,
        "height": 288,
        "content": "STEP 1: Data Extraction & Filtering\nRetrieves prospect data from the database and filters for valid entries with websites and email addresses to ensure only actionable leads proceed through the workflow.\n\nKey Components:\n* Manual Trigger - Initiates the workflow execution on demand\n* Get row(s) - Pulls up to 30 records from Real estate data table based on Email_Status filter\n* Limit - Caps processing to 30 items per execution to manage API costs\n* Only Websites & Emails - Filters records to include only those with valid organization_website_url and email fields"
      },
      "typeVersion": 1
    },
    {
      "id": "4a090228-26a8-4442-a19d-56dd2c534736",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -512,
        96
      ],
      "parameters": {
        "width": 608,
        "height": 272,
        "content": "STEP 2: Batch Processing & Web Scraping\nProcesses filtered leads in batches, fetches their website content, and handles errors gracefully to ensure workflow continuity even when websites are inaccessible.\n\nKey Components:\n* Loop Over Items - Splits data into batches for sequential processing with reset disabled\n* Request web page for URL1 - Fetches HTML content from prospect websites with retry logic (5 attempts, 5s wait)\n* If (Error Handler) - Checks for HTTP errors in the response name field\n* Delete row(s) - Removes failed entries from database to prevent reprocessing\n* Markdown - Converts HTML to markdown format for AI analysis"
      },
      "typeVersion": 1
    },
    {
      "id": "ea476bd7-5956-4b94-98d8-aec63a5582e3",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -128,
        480
      ],
      "parameters": {
        "width": 624,
        "height": 240,
        "content": "STEP 3: AI-Powered Content Analysis & Personalization\nUses GPT models to scrape insights from websites and generate highly personalized icebreakers that reference specific, non-obvious details about each prospect's business.\n\nKey Components:\n* Summarize Website Page - GPT-4.1-mini creates comprehensive two-paragraph abstracts from scraped content with JSON output\n* Aggregate - Collects all page summaries into a single array for comprehensive analysis\n* Generate Multiline Icebreaker - GPT-4.1 creates personalized cold email openers using spartan tone, avoiding special characters and hyphens"
      },
      "typeVersion": 1
    },
    {
      "id": "baa92a29-4914-417d-b78b-ffe7de1fb4ce",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        912,
        576
      ],
      "parameters": {
        "width": 512,
        "height": 256,
        "content": "STEP 4: Campaign Integration & Data Cleanup\nDelivers personalized icebreakers to the email outreach platform and removes processed records from the database to maintain clean data flow.\n\nKey Components:\n* Sending ice breaker to instantly - Posts lead data with custom icebreakers to Instantly.ai API with campaign-specific configuration\n* Delete row(s)1 - Removes successfully processed records from Real estate data table\n* Loop feedback - Returns control to batch processor for next iteration until all leads are processed"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Delete row(s)",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Only Websites & Emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "Summarize Website Page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Generate Multiline Icebreaker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s)": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete row(s)": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete row(s)1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Request web page for URL1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Only Websites & Emails": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Website Page": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Request web page for URL1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Multiline Icebreaker": {
      "main": [
        [
          {
            "node": "Sending ice breaker to instantly",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sending ice breaker to instantly": {
      "main": [
        [
          {
            "node": "Delete row(s)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Get row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}