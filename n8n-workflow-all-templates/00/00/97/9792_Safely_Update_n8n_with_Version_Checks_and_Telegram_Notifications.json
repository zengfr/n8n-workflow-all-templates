{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Safely Update n8n with Version Checks and Telegram Notifications",
    "wechat": "youandme10086",
    "id": 9792,
    "update_time": "2025-11-10"
  },
  "name": "Auto update your n8n instance with Telegram alerts",
  "tags": [],
  "nodes": [
    {
      "id": "41b70a35-96ea-49db-9c85-b278100eeaf4",
      "name": "Get Current Version",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        -1072,
        -112
      ],
      "parameters": {
        "command": "n8n -v"
      },
      "typeVersion": 1
    },
    {
      "id": "bea35ae3-d0cc-46f2-b6db-e1d4e31b6d8f",
      "name": "Get Latest Version",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1072,
        48
      ],
      "parameters": {
        "url": "https://api.github.com/repos/n8n-io/n8n/releases/latest",
        "options": {}
      },
      "typeVersion": 1
    },
    {
      "id": "35b33f84-de31-4efb-aec8-d00f5581f148",
      "name": "Compare Versions",
      "type": "n8n-nodes-base.code",
      "position": [
        -624,
        -32
      ],
      "parameters": {
        "jsCode": "// Compare current and latest n8n versions\nconst current = $items()[0].json.stdout.trim();\nconst latest = $items()[1].json.tag_name.trim();\nconst c = current.replace(/^n8n@/, '').replace(/^v/, '');\nconst l = latest.replace(/^n8n@/, '').replace(/^v/, '');\nreturn [{ json: { current: c, latest: l, updateAvailable: c !== l } }];"
      },
      "typeVersion": 2
    },
    {
      "id": "036a3518-10ec-423e-a3c2-1ea4b0159291",
      "name": "Merge Versions",
      "type": "n8n-nodes-base.merge",
      "position": [
        -848,
        -32
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "1c89512c-df58-4c64-8501-db7597c88390",
      "name": "If Update Available?",
      "type": "n8n-nodes-base.if",
      "position": [
        -400,
        -32
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "conditions": [
            {
              "operator": {
                "type": "boolean",
                "operation": "true"
              },
              "leftValue": "={{ $json.updateAvailable }}"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "4fe63c4b-ff68-4691-a56b-55e2df352641",
      "name": "Get Executions",
      "type": "n8n-nodes-base.n8n",
      "position": [
        -176,
        64
      ],
      "parameters": {
        "filters": {},
        "options": {},
        "resource": "execution",
        "requestOptions": {}
      },
      "typeVersion": 1
    },
    {
      "id": "9a0f5841-33aa-40f3-a1fc-d2610565ca3f",
      "name": "Check Running Workflows",
      "type": "n8n-nodes-base.function",
      "position": [
        48,
        64
      ],
      "parameters": {
        "functionCode": "// Count running executions\nconst running = $items().filter(i => i.json.status === 'running');\nreturn [{ json: { canUpdate: running.length === 0, runningCount: running.length } }];"
      },
      "typeVersion": 1
    },
    {
      "id": "257d72b4-4969-45c2-88d7-38ea361d2ee4",
      "name": "If Can Update?",
      "type": "n8n-nodes-base.if",
      "position": [
        256,
        64
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "conditions": [
            {
              "operator": {
                "type": "boolean",
                "operation": "true"
              },
              "leftValue": "={{ $json.canUpdate }}"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "3a9c5814-95ce-49f9-b622-1e4392024013",
      "name": "Notify Update Start",
      "type": "n8n-nodes-base.telegram",
      "position": [
        688,
        96
      ],
      "webhookId": "3b8b8ffa-0516-426b-a57b-cebe41eb4894",
      "parameters": {
        "text": "Se va a proceder a actualizar n8n",
        "additionalFields": {}
      },
      "typeVersion": 1.2
    },
    {
      "id": "f33fa073-2bba-4ad6-9769-595604869715",
      "name": "Notify Latest Version",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -176,
        336
      ],
      "webhookId": "68901b1a-9c16-4268-8f63-6bcc1fbba778",
      "parameters": {
        "text": "=Tu n8n está en la última versión v{{ $json.latest }}",
        "additionalFields": {}
      },
      "typeVersion": 1.2
    },
    {
      "id": "317d92e4-725e-44dd-914c-0dc463a51b1b",
      "name": "Notify Update Available",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -176,
        -112
      ],
      "webhookId": "4d1dc698-fcaf-4b33-a1bf-b77add6d8362",
      "parameters": {
        "text": "Tienes una actualización disponible de n8n",
        "additionalFields": {}
      },
      "typeVersion": 1.2
    },
    {
      "id": "e85e6afb-d1a2-418d-8d11-ecd74f2fd175",
      "name": "Execute Update",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        688,
        256
      ],
      "parameters": {
        "command": "sudo npm install -g n8n && sudo systemctl restart n8n"
      },
      "typeVersion": 1
    },
    {
      "id": "88c8be56-8ff2-45d6-a730-521d9b7dca6b",
      "name": "Daily Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -1424,
        -112
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "e7f4e5a3-76a8-4ebd-91b2-b9887861019c",
      "name": "n8n Startup Trigger",
      "type": "n8n-nodes-base.n8nTrigger",
      "position": [
        -1424,
        48
      ],
      "parameters": {
        "events": [
          "init"
        ]
      },
      "typeVersion": 1
    },
    {
      "id": "876ca2fb-de61-415f-96a2-8e1e8d3334be",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        400,
        144
      ],
      "webhookId": "de02ff9f-e717-4667-bdd8-f30077455cfe",
      "parameters": {
        "unit": "minutes",
        "amount": 1
      },
      "typeVersion": 1.1
    },
    {
      "id": "68ebfa6b-a325-477f-8cfc-58c9eebf5f52",
      "name": "Sticky Note - Trigger",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1536,
        -240
      ],
      "parameters": {
        "width": 352,
        "height": 528,
        "content": "## Trigger & Version Check\nRuns daily and on startup to check for new n8n releases."
      },
      "typeVersion": 1
    },
    {
      "id": "29202df7-6330-4dfe-8094-a8a7400f0a4f",
      "name": "Sticky Note - Comparison",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1136,
        -240
      ],
      "parameters": {
        "color": 5,
        "width": 832,
        "height": 528,
        "content": "## Version Comparison\nCompares current vs latest n8n version and sets the `updateAvailable` flag."
      },
      "typeVersion": 1
    },
    {
      "id": "d849470b-a85e-488a-8e39-f2a2879f297e",
      "name": "Sticky Note - Notifications",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -256,
        -240
      ],
      "parameters": {
        "color": 3,
        "width": 864,
        "height": 720,
        "content": "## Notification Logic & Safe Update\nSends Telegram alerts and safely updates n8n only if no executions are running."
      },
      "typeVersion": 1
    },
    {
      "id": "415c19d1-2a27-4c23-a579-b89fe47ad679",
      "name": "Sticky Note - Command",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        624,
        -240
      ],
      "parameters": {
        "height": 736,
        "content": "## Update Command Info\nTo update manually, use:\n**Linux:**\n```\nsudo npm install -g n8n && sudo systemctl restart n8n\n```\n**Docker:**\n```\ndocker pull n8nio/n8n:latest\n```"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "",
  "connections": {
    "Wait": {
      "main": [
        [
          {
            "node": "Get Executions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Daily Trigger": {
      "main": [
        [
          {
            "node": "Get Current Version",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Latest Version",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Executions": {
      "main": [
        [
          {
            "node": "Check Running Workflows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Can Update?": {
      "main": [
        [
          {
            "node": "Notify Update Start",
            "type": "main",
            "index": 0
          },
          {
            "node": "Execute Update",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Versions": {
      "main": [
        [
          {
            "node": "Compare Versions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Compare Versions": {
      "main": [
        [
          {
            "node": "If Update Available?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Latest Version": {
      "main": [
        [
          {
            "node": "Merge Versions",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Get Current Version": {
      "main": [
        [
          {
            "node": "Merge Versions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "n8n Startup Trigger": {
      "main": [
        [
          {
            "node": "Get Latest Version",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Current Version",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Update Available?": {
      "main": [
        [
          {
            "node": "Notify Update Available",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Executions",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Notify Latest Version",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Running Workflows": {
      "main": [
        [
          {
            "node": "If Can Update?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}