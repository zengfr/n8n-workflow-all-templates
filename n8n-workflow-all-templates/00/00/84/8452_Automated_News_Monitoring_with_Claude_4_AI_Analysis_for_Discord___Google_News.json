{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automated News Monitoring with Claude 4 AI Analysis for Discord & Google News",
    "wechat": "youandme10086",
    "id": 8452,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "a5e2a571-bef0-4498-b722-9f5453b5ab7e",
      "name": "Anthropic Chat Model6",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -1568,
        320
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-20250514",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {
          "maxTokensToSample": 20000
        }
      },
      "credentials": {
        "anthropicApi": {
          "id": "WXQf5QsxCs3AyxlW",
          "name": "Anthropic account"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "9cdcef12-2602-45a4-a23b-008d3fd62ae8",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -4144,
        288
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * 1"
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "5e15d880-d042-4189-a56f-6f1bc8689c27",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -4336,
        112
      ],
      "parameters": {
        "width": 464,
        "height": 320,
        "content": "# Phase 1: Weekly Schedule Activation"
      },
      "typeVersion": 1
    },
    {
      "id": "52c71826-069e-492b-933f-ac89d35b462f",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -4336,
        480
      ],
      "parameters": {
        "width": 464,
        "height": 528,
        "content": "### What you do:\nConfigure the schedule trigger to set your preferred monitoring frequency (default: Mondays at 9 AM)\nDefine monitoring topics by adding search queries to the Google Sheets \"Query\" sheet\nEnsure Discord bot permissions are properly configured for the target channel\n\n### What the system does:\nTriggers workflow execution based on scheduled intervals (configurable via cron expression)\nInitiates comprehensive news monitoring cycle for all configured topics\nPrepares system for multi-topic news analysis and content generation\nCoordinates sequential processing of search queries and content delivery\n\n### Result:\n‚úÖ Automated news monitoring without manual intervention\n‚úÖ Customizable scheduling for optimal team communication timing\n‚úÖ Scalable monitoring for multiple industry topics and keywords\n‚úÖ Consistent intelligence gathering for competitive awareness"
      },
      "typeVersion": 1
    },
    {
      "id": "5a12383d-b330-4354-b4a7-96c8453e0a7a",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3824,
        112
      ],
      "parameters": {
        "color": 2,
        "width": 464,
        "height": 320,
        "content": "# Phase 2: Search Query Management and Topic Processing"
      },
      "typeVersion": 1
    },
    {
      "id": "1fd0f35d-a765-45f3-b50c-af5ada2ff98c",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3824,
        480
      ],
      "parameters": {
        "color": 2,
        "width": 464,
        "height": 464,
        "content": "### What you do:\nMaintain and update search queries in the designated Google Sheets document\nAdd new monitoring topics, keywords, or industry-specific terms as needed\nReview and refine query effectiveness based on delivered content quality\n\n### What the system does:\nRetrieves monitoring topics from Google Sheets \"Query\" sheet\nProcesses each search query individually for comprehensive coverage\nInitiates sequential news searches to avoid API rate limiting\nPrepares topic-specific news collection for analysis and synthesis\n\n### Result:\n‚úÖ Centralized management of monitoring topics and keywords\n‚úÖ Easy addition and modification of search parameters\n‚úÖ Systematic processing of all configured monitoring queries\n‚úÖ Flexible topic management for evolving business needs\n"
      },
      "typeVersion": 1
    },
    {
      "id": "dd0a5a17-a64d-47a7-a18d-3dbc2ee180e0",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3024,
        112
      ],
      "parameters": {
        "color": 3,
        "width": 464,
        "height": 320,
        "content": "# Phase 3: Comprehensive News Discovery and Collection"
      },
      "typeVersion": 1
    },
    {
      "id": "b0b5acf8-2190-4de3-812f-f538a9dbbeba",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3024,
        480
      ],
      "parameters": {
        "color": 3,
        "width": 464,
        "height": 512,
        "content": "### What the system does:\nExecutes Google News searches for each configured query using SerpAPI\nRetrieves top news results with comprehensive metadata (titles, sources, dates, snippets)\nProcesses and ranks news articles by relevance and publication date\nExtracts the top 3 most relevant articles per topic for detailed analysis\nHandles API rate limiting and retry logic for reliable data collection\n\n**News Collection Features:**\n- Real-time Google News integration via SerpAPI\n- Automatic relevance scoring and article ranking\n- Comprehensive metadata extraction (source, date, snippet)\n- Multi-topic parallel processing capability\n\n### Result:\n‚úÖ Comprehensive news coverage across all monitored topics\n‚úÖ Top-quality article selection based on relevance and recency\n‚úÖ Complete source attribution and publication timing\n‚úÖ Reliable news discovery with error handling and retry mechanisms\n"
      },
      "typeVersion": 1
    },
    {
      "id": "c8414abd-bf12-4f7e-b817-8c0d3dbdf689",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2528,
        112
      ],
      "parameters": {
        "color": 4,
        "width": 752,
        "height": 320,
        "content": "# Phase 4: Deep Content Analysis and Article Scraping"
      },
      "typeVersion": 1
    },
    {
      "id": "51f15952-d59b-46cb-a22d-30916e1dbfca",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2528,
        480
      ],
      "parameters": {
        "color": 4,
        "width": 752,
        "height": 416,
        "content": "### What the system does:\nScrapes full content from the top 3 selected articles per topic using Firecrawl\nConverts article content to clean markdown format for AI processing\nImplements retry logic and error handling for reliable content extraction\nPreserves article structure, headings, and key formatting elements\nHandles various website formats and content management systems\n\n**Content Extraction Capabilities:**\n- Full-text article scraping with clean formatting\n- Multi-website compatibility and format handling\n- Automatic content structure preservation\n- Error handling for inaccessible or protected content\n\n### Result:\n‚úÖ Complete article content captured for in-depth analysis\n‚úÖ Clean, formatted content ready for AI processing\n‚úÖ Comprehensive coverage of key industry developments\n‚úÖ Reliable content extraction despite varied website formats"
      },
      "typeVersion": 1
    },
    {
      "id": "a7562476-cab7-4d2f-bdd1-b86a2effeb85",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1728,
        112
      ],
      "parameters": {
        "color": 5,
        "width": 752,
        "height": 320,
        "content": "# Phase 5: AI-Powered Content Analysis and Synthesis"
      },
      "typeVersion": 1
    },
    {
      "id": "62f55f83-d899-48fd-a2e9-68234a41afdc",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1728,
        480
      ],
      "parameters": {
        "color": 5,
        "width": 752,
        "height": 416,
        "content": "### What the system does:\nProcesses scraped articles using Claude 4 Sonnet for intelligent analysis\nGenerates structured summaries following consistent formatting standards\nCreates topic-specific intelligence reports with key insights and implications\nMaintains professional tone and factual accuracy in all generated content\nFormats analysis results for optimal Discord presentation\n\n**AI Analysis Features:**\n- Advanced content comprehension and synthesis\n- Consistent formatting and structure across all topics\n- Key insight extraction and trend identification\n- Professional writing style suitable for business communication\n\n### Result:\n‚úÖ High-quality intelligence reports generated automatically\n‚úÖ Consistent professional formatting across all monitoring topics\n‚úÖ Key insights and implications clearly highlighted\n‚úÖ Actionable intelligence ready for team consumption"
      },
      "typeVersion": 1
    },
    {
      "id": "4deecbad-d7a8-4765-9c85-4a34373d0294",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -928,
        112
      ],
      "parameters": {
        "color": 6,
        "width": 752,
        "height": 320,
        "content": "# Phase 6: Content Optimization for Discord Delivery"
      },
      "typeVersion": 1
    },
    {
      "id": "048cadf3-dd2a-4d02-8e78-42cd2123a19a",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -928,
        496
      ],
      "parameters": {
        "color": 6,
        "width": 752,
        "height": 480,
        "content": "### What the system does:\nAggregates all topic analyses into comprehensive monitoring report\nImplements intelligent text segmentation to comply with Discord's 2000-character limit\nMaintains content coherence while splitting longer analyses into multiple messages\nPreserves formatting and readability across message segments\nOptimizes message flow for sequential delivery\n\n**Discord Optimization Features:**\n- Automatic message length compliance (under 2000 characters)\n- Intelligent text segmentation maintaining content flow\n- Formatting preservation across multiple messages\n- Sequential message preparation for smooth delivery\n\n### Result:\n‚úÖ Content perfectly formatted for Discord platform constraints\n‚úÖ Coherent message flow maintained across multiple segments\n‚úÖ Professional presentation optimized for team communication\n‚úÖ Automated compliance with platform messaging limitations\n"
      },
      "typeVersion": 1
    },
    {
      "id": "1d359a2a-0651-4aef-af45-40bba84ff1ac",
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -144,
        16
      ],
      "parameters": {
        "color": 7,
        "width": 928,
        "height": 592,
        "content": "# Phase 7: Automated Team Communication and Report Delivery"
      },
      "typeVersion": 1
    },
    {
      "id": "20e10826-e668-4b29-b696-e30cf25e9806",
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -144,
        656
      ],
      "parameters": {
        "color": 7,
        "width": 928,
        "height": 448,
        "content": "### What the system does:\nDelivers engaging introduction message to Discord channel with branded personality\nPosts segmented intelligence reports in proper sequence to maintain readability\nSends conclusion message to complete the monitoring cycle\nImplements message timing to ensure proper delivery order\nUses branded \"Claptrap\" persona for consistent team engagement\n\n**Discord Delivery Features:**\n- Branded bot persona for engaging team communication\n- Sequential message delivery maintaining proper flow\n- Professional intelligence reporting with personality elements\n- Automated conclusion and cycle completion messaging\n\n### Result:\n‚úÖ Professional intelligence reports delivered directly to team Discord channel\n‚úÖ Engaging branded communication maintaining team interest\n‚úÖ Complete monitoring cycle with clear beginning and conclusion\n‚úÖ Consistent timing and delivery for reliable team updates"
      },
      "typeVersion": 1
    },
    {
      "id": "e331e64c-75c1-4fd5-b80f-afcdc518c404",
      "name": "Get query",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -3648,
        288
      ],
      "parameters": {
        "options": {},
        "sheetName": {
          "__rl": true,
          "mode": "name",
          "value": "Query"
        },
        "documentId": {
          "__rl": true,
          "mode": "url",
          "value": "https://docs.google.com/spreadsheets/d/1k6v6DeL_3cZ0U9kANAlrIIUIIOil959MaykV7JNAXro/edit?gid=0#gid=0"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "wBRLUCktxqXE6DVJ",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "501d696f-cfe5-43de-a1e6-1a4d28e6b234",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -3280,
        288
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3
    },
    {
      "id": "bf9d4caa-a907-4f56-8538-f2dfef2b495c",
      "name": "Search GNews",
      "type": "n8n-nodes-serpapi.serpApi",
      "position": [
        -2944,
        288
      ],
      "parameters": {
        "q": "={{ $json.Query }}",
        "operation": "google_news",
        "requestOptions": {},
        "additionalFields": {}
      },
      "credentials": {
        "serpApi": {
          "id": "w1oDmQzMKE4Wcj2P",
          "name": "SerpAPI account"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1
    },
    {
      "id": "8b54630e-c333-49e3-8584-e7aaaf3f485d",
      "name": "Return URL only",
      "type": "n8n-nodes-base.code",
      "position": [
        -2736,
        288
      ],
      "parameters": {
        "jsCode": "// R√©cup√©rer les donn√©es d'entr√©e\nconst inputData = $input.all()[0].json;\n\n// Extraire les r√©sultats de news\nconst newsResults = inputData.news_results || [];\n\n// Trier par position (ordre croissant)\nconst sortedResults = newsResults.sort((a, b) => a.position - b.position);\n\n// Prendre les 3 premiers r√©sultats avec des propri√©t√©s nomm√©es\nconst top3Results = sortedResults.slice(0, 3);\n\n// Cr√©er un objet avec des propri√©t√©s distinctes pour chaque article\nconst result = {\n  article1: {\n    link: top3Results[0]?.link || null,\n    title: top3Results[0]?.title || null,\n    snippet: top3Results[0]?.snippet || null,\n    source: top3Results[0]?.source || null,\n    date: top3Results[0]?.date || null\n  },\n  article2: {\n    link: top3Results[1]?.link || null,\n    title: top3Results[1]?.title || null,\n    snippet: top3Results[1]?.snippet || null,\n    source: top3Results[1]?.source || null,\n    date: top3Results[1]?.date || null\n  },\n  article3: {\n    link: top3Results[2]?.link || null,\n    title: top3Results[2]?.title || null,\n    snippet: top3Results[2]?.snippet || null,\n    source: top3Results[2]?.source || null,\n    date: top3Results[2]?.date || null\n  },\n  // Pour compatibilit√© avec votre workflow existant\n  all_links: top3Results.map(result => result.link).filter(link => link !== null),\n  count: top3Results.length\n};\n\n// CORRECTION : Retourner un tableau avec un objet (format requis par n8n)\nreturn [{ json: result }];"
      },
      "typeVersion": 2
    },
    {
      "id": "1f05a8e6-5075-4b2b-880f-10456d773030",
      "name": "Scrape article 1",
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "onError": "continueRegularOutput",
      "maxTries": 5,
      "position": [
        -2448,
        288
      ],
      "parameters": {
        "url": "={{ $('Return URL only').item.json.article1.link }}",
        "operation": "scrape",
        "requestOptions": {}
      },
      "credentials": {
        "firecrawlApi": {
          "id": "E34WDB80ik5VHjiI",
          "name": "Firecrawl account"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1,
      "alwaysOutputData": false
    },
    {
      "id": "58ad1767-76a6-4f25-865c-05d8ab2e1cdf",
      "name": "Scrape article 2",
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "onError": "continueRegularOutput",
      "maxTries": 5,
      "position": [
        -2208,
        288
      ],
      "parameters": {
        "url": "={{ $('Return URL only').item.json.article2.link }}",
        "operation": "scrape",
        "requestOptions": {}
      },
      "credentials": {
        "firecrawlApi": {
          "id": "E34WDB80ik5VHjiI",
          "name": "Firecrawl account"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1
    },
    {
      "id": "76934d94-7ef5-4013-8b2a-bf4c7cea5b34",
      "name": "Scrape article 3",
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "onError": "continueRegularOutput",
      "maxTries": 5,
      "position": [
        -1936,
        288
      ],
      "parameters": {
        "url": "={{ $('Return URL only').item.json.article3.link }}",
        "operation": "scrape",
        "requestOptions": {}
      },
      "credentials": {
        "firecrawlApi": {
          "id": "E34WDB80ik5VHjiI",
          "name": "Firecrawl account"
        }
      },
      "retryOnFail": true,
      "typeVersion": 1
    },
    {
      "id": "93b2ad52-2ca1-4730-8bf4-4e7929a14bbe",
      "name": "R√©daction veille",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "maxTries": 5,
      "position": [
        -1392,
        208
      ],
      "parameters": {
        "text": "=Source 1\n\nURL : {{ $('Return URL only').item.json.article1.link }}\nDate : {{ $('Return URL only').item.json.article1.date }}\nContenu de l'article : {{ $('Scrape article 1').item.json.data.markdown }}\n\n\nSource 2 \n\nURL : {{ $('Return URL only').item.json.article2.link }}\nDate : {{ $('Return URL only').item.json.article2.date }}\nContenu de l'article : {{ $('Scrape article 2').item.json.data.markdown }}\n\nSource 3\n\nURL : {{ $('Return URL only').item.json.article3.link }}\nDate : {{ $('Return URL only').item.json.article3.date }}\nContenu de l'article : {{ $('Scrape article 3').item.json.data.markdown }}\n",
        "batching": {},
        "messages": {
          "messageValues": [
            {
              "message": "=Voil√† le contenu de 3 article sur le th√®me \"{{ $('Loop Over Items').item.json.Query }}\".\n\n\n# Mission\nAnalysez les articles fournis et produisez une synth√®se structur√©e.\n\n# Format de sortie requis\n\nUne fois au d√©but : Veille **{{ $('Loop Over Items').item.json.Query }}**\n\nPuis pour chaque article, suivez exactement cette structure :\n\n```\n# Article [Titre]\n\n**M√©dia :** [Nom du m√©dia]\n**Date :** [Date de publication]  \n**Lien :** [URL]\n**R√©sum√© :** [2-3 phrases sur le contenu principal]\n\n---\n```\n\n## Consignes\n- Respecter l'ordre : M√©dia ‚Üí Date ‚Üí Lien ‚Üí R√©sum√©\n- Num√©roter les articles dans l'ordre d'apparition\n- R√©sum√© maximum 3 phrases\n- Si une info manque, indiquer \"Non disponible\"\n\nSi il manque les informations d'un article ignore le et fait un rendu cons√©quent au nombre d'article que tu a pu traiter).\n\nTraitez maintenant le document fourni et donnez un rendu en fran√ßais."
            }
          ]
        },
        "promptType": "define"
      },
      "retryOnFail": true,
      "typeVersion": 1.7
    },
    {
      "id": "668e0ba3-9e69-4cfd-a672-9c246b7583de",
      "name": "Compilation donn√©es veilles",
      "type": "n8n-nodes-base.aggregate",
      "position": [
        -752,
        272
      ],
      "parameters": {
        "include": "specifiedFields",
        "options": {},
        "aggregate": "aggregateAllItemData",
        "fieldsToInclude": "text"
      },
      "typeVersion": 1
    },
    {
      "id": "cd75c9e8-42c3-4eec-85fe-30c9180ec044",
      "name": "D√©coupage message discord",
      "type": "n8n-nodes-base.code",
      "position": [
        -416,
        256
      ],
      "parameters": {
        "jsCode": "// Code pour node n8n - Division de texte pour Discord\n// Limite Discord : 2000 caract√®res par message\n\nconst DISCORD_CHAR_LIMIT = 2000;\nconst SAFETY_MARGIN = 50; // Marge de s√©curit√© pour √©viter les d√©passements\nconst EFFECTIVE_LIMIT = DISCORD_CHAR_LIMIT - SAFETY_MARGIN;\n\nfunction splitTextForDiscord(text) {\n  // Si le texte est plus court que la limite, on le retourne tel quel\n  if (text.length <= EFFECTIVE_LIMIT) {\n    return [text];\n  }\n\n  const messages = [];\n  let currentMessage = '';\n  \n  // Diviser le texte en paragraphes d'abord (s√©par√©s par \\n\\n ou ----)\n  const sections = text.split(/(?:\\n\\n|----)/);\n  \n  for (let i = 0; i < sections.length; i++) {\n    let section = sections[i].trim();\n    \n    // Si une section compl√®te d√©passe la limite, la diviser par phrases\n    if (section.length > EFFECTIVE_LIMIT) {\n      const sentences = section.split(/(?<=[.!?:])\\s+/);\n      \n      for (const sentence of sentences) {\n        // Si une phrase seule d√©passe la limite, la couper brutalement\n        if (sentence.length > EFFECTIVE_LIMIT) {\n          const chunks = splitByLength(sentence, EFFECTIVE_LIMIT);\n          for (const chunk of chunks) {\n            if (currentMessage.length + chunk.length + 1 > EFFECTIVE_LIMIT) {\n              if (currentMessage.trim()) {\n                messages.push(currentMessage.trim());\n              }\n              currentMessage = chunk;\n            } else {\n              currentMessage += (currentMessage ? ' ' : '') + chunk;\n            }\n          }\n        } else {\n          // Ajouter la phrase si elle rentre dans le message actuel\n          if (currentMessage.length + sentence.length + 1 <= EFFECTIVE_LIMIT) {\n            currentMessage += (currentMessage ? ' ' : '') + sentence;\n          } else {\n            // Sauvegarder le message actuel et commencer un nouveau\n            if (currentMessage.trim()) {\n              messages.push(currentMessage.trim());\n            }\n            currentMessage = sentence;\n          }\n        }\n      }\n    } else {\n      // La section rentre dans la limite, v√©rifier si elle rentre dans le message actuel\n      if (currentMessage.length + section.length + 2 <= EFFECTIVE_LIMIT) {\n        currentMessage += (currentMessage ? '\\n\\n' : '') + section;\n      } else {\n        // Sauvegarder le message actuel et commencer un nouveau\n        if (currentMessage.trim()) {\n          messages.push(currentMessage.trim());\n        }\n        currentMessage = section;\n      }\n    }\n  }\n  \n  // Ajouter le dernier message s'il existe\n  if (currentMessage.trim()) {\n    messages.push(currentMessage.trim());\n  }\n  \n  return messages.length > 0 ? messages : [text];\n}\n\nfunction splitByLength(text, maxLength) {\n  const chunks = [];\n  for (let i = 0; i < text.length; i += maxLength) {\n    chunks.push(text.slice(i, i + maxLength));\n  }\n  return chunks;\n}\n\n// Code principal pour n8n\nconst inputData = $input.all();\nconst outputItems = [];\n\nfor (let i = 0; i < inputData.length; i++) {\n  const item = inputData[i];\n  \n  // Extraire le texte √† diviser (adaptez selon votre structure de donn√©es)\n  // Exemple : si votre texte est dans item.json.content\n  let textToSplit = '';\n  \n  // Si c'est un tableau comme dans votre exemple\n  if (item.json.data && Array.isArray(item.json.data)) {\n    textToSplit = item.json.data.map(dataItem => dataItem.text || '').join('\\n\\n---\\n\\n');\n  } \n  // Si c'est directement du texte\n  else if (item.json.text) {\n    textToSplit = item.json.text;\n  }\n  // Si c'est dans un autre champ\n  else if (item.json.content) {\n    textToSplit = item.json.content;\n  }\n  // Fallback : convertir tout l'objet en texte\n  else {\n    textToSplit = JSON.stringify(item.json, null, 2);\n  }\n  \n  // Diviser le texte\n  const messages = splitTextForDiscord(textToSplit);\n  \n  // Cr√©er un item de sortie pour chaque message\n  messages.forEach((message, index) => {\n    outputItems.push({\n      json: {\n        message: message,\n        messageIndex: index + 1,\n        totalMessages: messages.length,\n        characterCount: message.length,\n        originalItemIndex: i\n      }\n    });\n  });\n}\n\nreturn outputItems;"
      },
      "typeVersion": 2
    },
    {
      "id": "35dbd95c-d20e-4d00-91dc-bac96b6fd922",
      "name": "Intro ",
      "type": "n8n-nodes-base.discord",
      "position": [
        -48,
        192
      ],
      "webhookId": "47593169-e23c-4303-b8e2-7e93386c4c7a",
      "parameters": {
        "content": "Hello everyone ! \n\nHere is your weekly dose of news !",
        "guildId": {
          "__rl": true,
          "mode": "list",
          "value": "919951151888236595",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595",
          "cachedResultName": "Institut du r√©f√©rencement"
        },
        "options": {},
        "resource": "message",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "1334455789284364309",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595/1334455789284364309",
          "cachedResultName": "üìù-veille-üìù"
        }
      },
      "credentials": {
        "discordBotApi": {
          "id": "wEzWTKJiOc3ZcZew",
          "name": "ClapTrap IDR"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "849159bf-0741-450a-abcf-be51597aee15",
      "name": "Veille",
      "type": "n8n-nodes-base.discord",
      "position": [
        368,
        368
      ],
      "webhookId": "f3ee61cf-fbfa-447c-9fa8-78b7e5e1c4f7",
      "parameters": {
        "content": "={{ $json.message }}",
        "guildId": {
          "__rl": true,
          "mode": "list",
          "value": "919951151888236595",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595",
          "cachedResultName": "Institut du r√©f√©rencement"
        },
        "options": {
          "flags": [
            "SUPPRESS_EMBEDS"
          ]
        },
        "resource": "message",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "1334455789284364309",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595/1334455789284364309",
          "cachedResultName": "üìù-veille-üìù"
        }
      },
      "credentials": {
        "discordBotApi": {
          "id": "wEzWTKJiOc3ZcZew",
          "name": "ClapTrap IDR"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "24aac0d1-4dcd-4264-bbd3-b5a10555d3f1",
      "name": "Conclusion",
      "type": "n8n-nodes-base.discord",
      "position": [
        576,
        224
      ],
      "webhookId": "47593169-e23c-4303-b8e2-7e93386c4c7a",
      "parameters": {
        "content": "ET VOIL√Ä MINIONS ORGANIQUES ! Claptrap a termin√© sa mission √âPIQUE - √† la semaine prochaine pour encore plus d'excellence robotique ! Bip boop ü§ñ‚ú®",
        "guildId": {
          "__rl": true,
          "mode": "list",
          "value": "919951151888236595",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595",
          "cachedResultName": "Institut du r√©f√©rencement"
        },
        "options": {},
        "resource": "message",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "1334455789284364309",
          "cachedResultUrl": "https://discord.com/channels/919951151888236595/1334455789284364309",
          "cachedResultName": "üìù-veille-üìù"
        }
      },
      "credentials": {
        "discordBotApi": {
          "id": "wEzWTKJiOc3ZcZew",
          "name": "ClapTrap IDR"
        }
      },
      "executeOnce": true,
      "typeVersion": 2
    },
    {
      "id": "7ef62d3a-64cc-48e8-826e-5ecb5f226065",
      "name": "Loop Over Items 2",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        144,
        304
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3
    },
    {
      "id": "ca7728e9-4c5e-4b04-a677-d540d379760b",
      "name": "Sticky Note20",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5440,
        240
      ],
      "parameters": {
        "width": 816,
        "height": 336,
        "content": "## Need more advanced automation solutions? Contact us for custom enterprise workflows!\n\n# Growth-AI.fr\n\n## https://www.linkedin.com/in/allanvaccarizi/\n## https://www.linkedin.com/in/hugo-marinier-%F0%9F%A7%B2-6537b633/"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Veille": {
      "main": [
        [
          {
            "node": "Loop Over Items 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get query": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search GNews": {
      "main": [
        [
          {
            "node": "Return URL only",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Compilation donn√©es veilles",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Search GNews",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Return URL only": {
      "main": [
        [
          {
            "node": "Scrape article 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape article 1": {
      "main": [
        [
          {
            "node": "Scrape article 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape article 2": {
      "main": [
        [
          {
            "node": "Scrape article 3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape article 3": {
      "main": [
        [
          {
            "node": "R√©daction veille",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items 2": {
      "main": [
        [
          {
            "node": "Conclusion",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Veille",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "R√©daction veille": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "R√©daction veille",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "D√©coupage message discord": {
      "main": [
        [
          {
            "node": "Loop Over Items 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Compilation donn√©es veilles": {
      "main": [
        [
          {
            "node": "D√©coupage message discord",
            "type": "main",
            "index": 0
          },
          {
            "node": "Intro ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}