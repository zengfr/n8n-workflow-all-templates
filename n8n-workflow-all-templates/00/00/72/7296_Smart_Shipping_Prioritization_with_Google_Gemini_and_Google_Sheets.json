{
  "id": "TEMPLATE_ID",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Smart Shipping Prioritization with Google Gemini and Google Sheets",
    "wechat": "youandme10086",
    "id": 7296,
    "update_time": "2025-11-10"
  },
  "name": "n8n Terminal",
  "tags": [],
  "nodes": [
    {
      "id": "3199f6ce-dacc-4749-b2ee-cf644d83abb5",
      "name": "Button",
      "type": "n8n-nodes-base.webhook",
      "position": [
        60,
        0
      ],
      "webhookId": "REPLACE_WITH_WEBHOOK_ID",
      "parameters": {
        "path": "REPLACE_WITH_PATH",
        "options": {},
        "responseMode": "responseNode"
      },
      "typeVersion": 2
    },
    {
      "id": "5dd0c8d7-fb91-486a-a0b6-223d01bd6727",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        280,
        0
      ],
      "parameters": {
        "text": "Select priority shipping. Answer with Json with idEnvio, nombre, direccion and detalle",
        "options": {
          "systemMessage": "=You are an assistant with access to these tools:\nDate and Time\nShipping sheet\n\nYour mission is to select one sheet row for next shipment.\n\nPriority order is oldest fechaOrden, but if the customer says that it could cancel in detalle column, that is priority."
        },
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 2
    },
    {
      "id": "12572d7a-a0e4-4aea-9f71-f59ac41829b5",
      "name": "Date & Time",
      "type": "n8n-nodes-base.dateTimeTool",
      "position": [
        440,
        300
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 2
    },
    {
      "id": "998c2ccb-8237-4e15-a7ce-1a2b877f10c1",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        800,
        300
      ],
      "parameters": {
        "jsonSchemaExample": "{\n\t\"idEnvio\": \"1\",\n  \"nombre\": \"John Doe\",\n\t\"direccion\": \"8345 NW 55 st\",\n  \"detalle\": \"I need it today\"\n}"
      },
      "typeVersion": "1.3"
    },
    {
      "id": "3e045185-102b-4705-b1cb-3c019484e1fd",
      "name": "Gemini Flash 2.5",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        220,
        300
      ],
      "parameters": {
        "options": {},
        "modelName": "models/gemini-2.5-flash-lite"
      },
      "credentials": {},
      "typeVersion": 1
    },
    {
      "id": "801cbafc-97be-4a14-9d06-eb971e2f1981",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        280,
        -200
      ],
      "parameters": {
        "content": "## n8n Terminal\nRead shipping sheet, determine priority with AI and update external screen. Connect a Shipments sheet with idEnvio, fechaOrden, nombre, direccion, detalle and enviado"
      },
      "typeVersion": 1
    },
    {
      "id": "41fdd632-92a9-4d43-872c-59986720fe11",
      "name": "Update",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        880,
        -60
      ],
      "parameters": {
        "columns": {
          "value": {
            "enviado": "X",
            "idEnvio": "={{ $node[\"AI Agent\"].json[\"output\"][\"idEnvio\"] }}"
          },
          "schema": [],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "idEnvio"
          ]
        },
        "options": {},
        "operation": "update",
        "sheetName": {
          "value": "REPLACE_WITH_SHEET_NAME"
        },
        "documentId": {
          "value": "REPLACE_WITH_DOC_ID"
        }
      },
      "credentials": {},
      "typeVersion": "4.6"
    },
    {
      "id": "22d24aee-9c7c-4760-89fe-0b1cf5df5470",
      "name": "Screen",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [
        880,
        100
      ],
      "parameters": {
        "options": {},
        "respondWith": "allIncomingItems"
      },
      "typeVersion": "1.4"
    },
    {
      "id": "1de34a45-f608-4fd9-bd0b-cf16ec17dda9",
      "name": "Shipping",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        620,
        300
      ],
      "parameters": {
        "options": {},
        "sheetName": {
          "value": "REPLACE_WITH_SHEET_NAME"
        },
        "documentId": {
          "value": "REPLACE_WITH_DOC_ID"
        },
        "descriptionType": "manual",
        "toolDescription": "Shipments sheet"
      },
      "credentials": {},
      "typeVersion": "4.6"
    }
  ],
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "TEMPLATE_VERSION_ID",
  "connections": {
    "Button": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Update",
            "type": "main",
            "index": 0
          },
          {
            "node": "Screen",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Shipping": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Gemini Flash 2.5": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    }
  }
}