{
  "id": "jmDZtl6juC1EHMa5",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Weekly Competitor Facebook Ads Intelligence Report with Airtop and Gmail",
    "wechat": "youandme10086",
    "id": 7272,
    "update_time": "2025-11-10"
  },
  "name": "Competitor Facebook Ads Intelligence Agent",
  "tags": [],
  "nodes": [
    {
      "id": "fd11f05c-a1c6-42be-b4c5-e8a2e7e2b51d",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        32,
        0
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtHour": 19
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "44dccd7d-9a84-42b4-a7c2-f967b5e09b55",
      "name": "Query Facebook Ad Library",
      "type": "n8n-nodes-base.airtop",
      "position": [
        256,
        0
      ],
      "parameters": {
        "url": "https://www.facebook.com/ads/library/?active_status=active&ad_type=all&country=US&is_targeted_country=false&media_type=all&search_type=page&view_all_page_id=15087023444",
        "prompt": "This is a Facebook ad library. Extract up to 30 ads for each ad, extract:\nMessage summary (1–2 concise sentences)\n\nMain topic (e.g., Discount, Awareness, Product Launch, Testimonial)\n\nCall-to-Action (CTA)** (e.g., Learn More, Book Now, Shop Now)\n\nHow long the ad has been active (days active or start date, if displayed)\n\nAd Language (Eng, Esp, et..)\n\nReverse engineered target audience (hypothesis)\n\nReturn the results in as a nice, HTML formatted report",
        "resource": "extraction",
        "operation": "query",
        "sessionMode": "new",
        "additionalFields": {}
      },
      "credentials": {
        "airtopApi": {
          "id": "Yi4YPNnovLVUjFn5",
          "name": "Airtop Official Org"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "a909ba2d-c1b2-4c89-ab6e-e788c44ccf56",
      "name": "Send Report",
      "type": "n8n-nodes-base.gmail",
      "position": [
        480,
        0
      ],
      "webhookId": "44e02ce2-b229-45a8-90f5-902a1aa5c4b7",
      "parameters": {
        "sendTo": "amir@airtop.ai",
        "message": "={{ $json.data.modelResponse }}",
        "options": {},
        "subject": "Facebook Ad Library Competitor Report:  "
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "975ZLOgWNQCTy54i",
          "name": "AA Gmail account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "602dc0cc-03ab-492b-a87b-23e65e42b7b9",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -912,
        -448
      ],
      "parameters": {
        "color": 6,
        "width": 896,
        "height": 944,
        "content": "README\n\n# Competitor Facebook Ads Intelligence Agent\n\n## Use Case\n\nMonitor a competitor’s active Facebook ads and get a weekly HTML intelligence brief by email — saving time on manual research and helping you spot messaging, offers, and creative trends quickly.\n\n## What This Automation Does\n\n* Runs weekly on a set schedule.\n* Uses **Airtop** to visit the competitor’s Facebook Ad Library page and extract up to 30 active ads.\n* Summarizes each ad with key points: message, topic, CTA, duration active, language, target audience.\n* Sends the compiled HTML report via Gmail.\n\n## How It Works\n\n1. **Schedule Trigger** – Fires once a week at the configured time.\n2. **Airtop Extraction** – Loads the Ad Library URL and runs a prompt to extract and format the ads into HTML.\n3. **Email Delivery** – Sends the HTML report to your specified recipient using Gmail.\n\n## Setup Requirements\n\n1. **Airtop API Key** — [Generate here](https://portal.airtop.ai/api-keys).\n2. **Airtop Credential in n8n** — Add your API key under “Airtop” in n8n.\n3. **Gmail OAuth2 Credential** — Connect the Gmail account to send reports.\n4. **Competitor’s Ad Library URL** — Replace the default `view_all_page_id` in the workflow with your target.\n\n## Next Steps\n\n* Duplicate the Airtop step for multiple competitors.\n* Enrich reports by visiting ad landing pages for deeper analysis.\n* Send outputs to Slack or archive in a shared workspace.\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c478d744-2601-41ea-86ed-fecc114d0067",
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Query Facebook Ad Library",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Query Facebook Ad Library": {
      "main": [
        [
          {
            "node": "Send Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}