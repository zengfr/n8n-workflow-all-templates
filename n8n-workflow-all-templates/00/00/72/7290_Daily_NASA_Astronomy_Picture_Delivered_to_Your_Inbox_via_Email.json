{
  "id": "UYpkraIlIwEP3v71",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Daily NASA Astronomy Picture Delivered to Your Inbox via Email",
    "wechat": "youandme10086",
    "id": 7290,
    "update_time": "2025-11-10"
  },
  "name": "NASA APOD",
  "tags": [],
  "nodes": [
    {
      "id": "06ddfc69-ba89-48ee-a6fd-b244e7a8a35e",
      "name": "Send email",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        688,
        336
      ],
      "webhookId": "5f65dfe3-f94e-4cbe-adc9-d2aeab8e6fb3",
      "parameters": {
        "html": "=<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Newsletter</title>\n</head>\n<body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 20px; background-color: #f9f9f9;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);\">\n      \n        <div style=\"text-align: center; border-bottom: 2px solid #e9ecef; padding-bottom: 20px; margin-bottom: 30px;\">        \n        <div style=\"margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #eee;\">\n        {{ $json.appended_message }}\n        </div>\n    </div>\n</body>\n</html>",
        "options": {
          "appendAttribution": false
        },
        "subject": "Astronomy Picture of the Day",
        "toEmail": "destination@email.com",
        "fromEmail": "NASA @N8N <you@gmail.com>"
      },
      "credentials": {
        "smtp": {
          "id": "JiVIi5PpnPuXudnT",
          "name": "SMTP account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "769bf971-1d99-46c6-a470-5a82ed416a11",
      "name": "Summarize",
      "type": "n8n-nodes-base.summarize",
      "position": [
        464,
        336
      ],
      "parameters": {
        "options": {},
        "fieldsToSummarize": {
          "values": [
            {
              "field": "message",
              "aggregation": "append"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "85a0f94f-60df-4496-9d3a-468925bf1aac",
      "name": "Set only important fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -224,
        336
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "1b769a4e-e8a7-47ad-8e4a-fc1b67bf45e1",
              "name": "Titre",
              "type": "string",
              "value": "={{ $json.title }}"
            },
            {
              "id": "e6d2769b-1a49-4e68-a72d-744409ff465b",
              "name": "Contenu",
              "type": "string",
              "value": "={{ $json[\"content:encoded\"] }}"
            },
            {
              "id": "de4870fc-57e1-44c6-acc2-8bb97723bead",
              "name": "Lien",
              "type": "string",
              "value": "={{ $json.link }}"
            },
            {
              "id": "f40b11e8-f737-4bfd-95ee-2df27fbe1df0",
              "name": "Date",
              "type": "string",
              "value": "={{ $json.pubDate }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "afd2683f-62ca-40fc-bd5b-d0fccfd5cba3",
      "name": "Filter only last 2 days",
      "type": "n8n-nodes-base.filter",
      "position": [
        16,
        336
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "33c627f6-98b2-48f9-9907-f53e7e0ddb73",
              "operator": {
                "type": "dateTime",
                "operation": "after"
              },
              "leftValue": "={{ $json.Date }}",
              "rightValue": "={{ $today.minus({ days: 2 }) }}"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "4a3e68ea-6632-4dae-9a50-4932ee930648",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -672,
        336
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 6,
              "triggerAtMinute": 21
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "4f72bd95-a7e8-4e6b-844e-f5f36bde52f9",
      "name": "Get APOD Data",
      "type": "n8n-nodes-base.rssFeedRead",
      "position": [
        -448,
        336
      ],
      "parameters": {
        "url": "https://apod.com/feed.rss",
        "options": {}
      },
      "typeVersion": 1.2
    },
    {
      "id": "8b93b547-93c3-4582-b84c-2f0ea19c3e1d",
      "name": "Aggregate data",
      "type": "n8n-nodes-base.set",
      "position": [
        240,
        336
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "ff3a65f7-679e-4501-b331-751eff73b337",
              "name": "message",
              "type": "string",
              "value": "=<article style=\"max-width: 600px; margin: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; font-family: Arial, sans-serif; background-color: #f9f9f9;\">\n  <h2 style=\"color: #333; margin: 0 0 15px 0; font-size: 1.4em; line-height: 1.3;\">\n    <a href=\"{{ $json.Lien }}\" \n       style=\"color: #0066cc; text-decoration: none;\" \n       target=\"_blank\">\n      {{ $json.Titre }}\n    </a>\n  </h2>\n  \n  <p style=\"color: #666; margin: 0 0 15px 0; line-height: 1.5; font-size: 1em;\">\n    {{ $json.Contenu }}\n  </p>\n  \n  <time style=\"color: #999; font-size: 0.9em; font-style: italic;\">\n    {{ $json.Date }}\n  </time>\n</article>"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "0aaed6d7-7f8d-41c9-be1a-18558d67dd99",
      "name": "Sticky Note16",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -512,
        192
      ],
      "parameters": {
        "color": 4,
        "width": 224,
        "height": 304,
        "content": "## 1\n\nGet data from the official NASA APOD RSS Feed using the url\n"
      },
      "typeVersion": 1
    },
    {
      "id": "165bc6ce-83c5-400a-8991-279d5f8c2e64",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -48,
        192
      ],
      "parameters": {
        "color": 4,
        "width": 224,
        "height": 304,
        "content": "## 2\n\nFilter the pictures to only get the one from the last 2 days (or the last one)\n"
      },
      "typeVersion": 1
    },
    {
      "id": "ec74718c-e06b-4ffa-9835-cff75f09fa33",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        624,
        48
      ],
      "parameters": {
        "color": 4,
        "width": 224,
        "height": 448,
        "content": "## 3\n\nConfigure an email sender. You can use Gmail for that, you'll just have to create a SMTP account with the correct API Keys. Also, you can change the HTML code as you like, to customize your daily APOD email :)\n"
      },
      "typeVersion": 1
    },
    {
      "id": "31cc085f-d273-49e6-99c5-3b1d6c74498c",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -512,
        48
      ],
      "parameters": {
        "color": 4,
        "width": 1104,
        "height": 112,
        "content": "## NASA Astronomy Picture of the Day\n\nGet the daily NASA APOD delivered by mail ! Simple workflow to understand RSS and Email automation. Customize the Schedule Trigger and the HTML Body of the email like you want !\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "319032bd-c00b-4c53-9d01-3ca24cfe3355",
  "connections": {
    "Summarize": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get APOD Data": {
      "main": [
        [
          {
            "node": "Set only important fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate data": {
      "main": [
        [
          {
            "node": "Summarize",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get APOD Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter only last 2 days": {
      "main": [
        [
          {
            "node": "Aggregate data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set only important fields": {
      "main": [
        [
          {
            "node": "Filter only last 2 days",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}