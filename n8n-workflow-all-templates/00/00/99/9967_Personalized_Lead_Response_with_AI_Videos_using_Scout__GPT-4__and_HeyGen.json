{
  "id": "KZ6T2tfBJK5KgUvj",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Personalized Lead Response with AI Videos using Scout, GPT-4, and HeyGen",
    "wechat": "youandme10086",
    "id": 9967,
    "update_time": "2025-11-10"
  },
  "name": "Scout + HeyGen for Video Lead Generation",
  "tags": [],
  "nodes": [
    {
      "id": "e99fcbb3-b043-4751-8c2f-77b3a78627c3",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -1056,
        80
      ],
      "webhookId": "0fabb2a4-b576-46f7-89f2-91c0e723b522",
      "parameters": {
        "options": {},
        "formTitle": "Inbound Form",
        "formFields": {
          "values": [
            {
              "fieldLabel": "first_name"
            },
            {
              "fieldType": "email",
              "fieldLabel": "middle_name"
            },
            {
              "fieldLabel": "last_name"
            },
            {
              "fieldLabel": "address"
            },
            {
              "fieldLabel": "city"
            },
            {
              "fieldLabel": "state"
            },
            {
              "fieldLabel": "county"
            },
            {
              "fieldLabel": "zip_code"
            },
            {
              "fieldType": "dropdown",
              "fieldLabel": "exactmatch",
              "fieldOptions": {
                "values": [
                  {
                    "option": "true"
                  },
                  {
                    "option": "false"
                  }
                ]
              }
            },
            {
              "fieldType": "number",
              "fieldLabel": "minscore"
            },
            {
              "fieldType": "number",
              "fieldLabel": "maxscore"
            },
            {
              "fieldType": "number",
              "fieldLabel": "count"
            },
            {
              "fieldType": "dropdown",
              "fieldLabel": "level",
              "fieldOptions": {
                "values": [
                  {
                    "option": "address"
                  },
                  {
                    "option": "city"
                  },
                  {
                    "option": "state"
                  },
                  {
                    "option": "county"
                  },
                  {
                    "option": "zip"
                  }
                ]
              }
            },
            {
              "fieldLabel": "phone"
            },
            {
              "fieldLabel": "email"
            },
            {
              "fieldType": "number",
              "fieldLabel": "count"
            }
          ]
        },
        "formDescription": "Fill Out This Form to Get More Info on Scout"
      },
      "typeVersion": 2.2
    },
    {
      "id": "bf92dc23-9683-4b17-b2d5-5865d98bcf1d",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        128,
        80
      ],
      "webhookId": "b61595fd-ce07-4ec7-a1b6-902d23516448",
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "e6e54dcf-86d1-4e1a-8bf1-91bccdb8656f",
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "position": [
        656,
        80
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "3ef3edd0-7a3a-41ba-9f6f-7acf11a00a3a",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.data.status }}",
              "rightValue": "completed"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "2df19f5b-c9ee-42f1-b684-1c84b6df65f1",
      "name": "Wait1",
      "type": "n8n-nodes-base.wait",
      "position": [
        608,
        352
      ],
      "webhookId": "e7ba7bb5-8a22-4b60-8737-dc32645ab424",
      "parameters": {
        "amount": 20
      },
      "typeVersion": 1.1
    },
    {
      "id": "e38e477a-883c-4395-970d-788df2777d08",
      "name": "Selfie Video Prompt Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -432,
        80
      ],
      "parameters": {
        "text": "=Here is the information we have looked up on this lead:\n\nFirst Name: {{ $json.matched_first_name }}\nLast Name: {{ $json.matched_last_name }}\nCity/State: {{ $json.city }}, {{ $json.state }}\nCounty: {{ $json.county }}\nHome Owner Code (H/P/R/U): {{ $json.homeownercd }}\nProperty Type: {{ $json.prop_type }}\nDwelling Type: {{ $json.dwelltype }}\nHousehold Income: {{ $json.hhi }}\nNet Worth: {{ $json.wealth }}\nLength of Residence (Yrs): {{ $json.lor }}\nYear Built: {{ $json.year_built }}\nVacancy: {{ $json.vacant }}\nOccupation: {{ $json.occupation }}\nChildren: {{ $json.children }}\nLanguage: {{ $json.language }}\n\nGenerate the script following the System Message rules.",
        "options": {
          "systemMessage": "=You are an expert video script agent generating short, professional selfie-style scripts for the Heygen API.\n\n**Task:** Write a first-touch outreach script for Sam, a real estate agent who works with Maria at Best Real Estate. The script must sound credible, approachable, and tailored. Every script must illustrate three potential discussion paths, so the lead sees themselves in the examples and understands why connecting is valuable.\n\n**Dynamic Data (may or may not be present):**\n- Name: {{ $json.matched_first_name }}\n- Location: {{ $json.city }}, {{ $json.state }}\n- Property: {{ $json.prop_type }}, {{ $json.year_built }}, {{ $json.square_feet }}\n- Ownership: {{ $json.homeownercd }}, {{ $json.lor }}\n- Financials: {{ $json.hhi }}, {{ $json.wealth }}\n- Other: {{ $json.language }}, {{ $json.occupation }}, {{ $json.children }}\n\n**Core Principles:**\n1. **Greeting:** Always start with the lead‚Äôs first name if available. Example: \"Hey {{ $json.matched_first_name }}, this is Sam...\"\n2. **Language:** Deliver the full script in {{ $json.language }} if provided, otherwise default to English.\n3. **Personalization:** Use ownership type, property type, and city context to frame the first two client scenarios. Never present the data as an absolute fact about the lead‚Äîframe it as a common situation or client story.\n   - ‚ùå \"You‚Äôre renting a condo in San Francisco.\"  \n   - ‚úÖ \"Many renters in San Francisco‚Äôs condo market are exploring ownership...\"\n4. **Social Proof via Three Discussion Paths:**  \n   Every script should mention **three reasons clients like this lead connect with us**:  \n   - (1) A likely driver inferred from data (ownership status, property type, city).  \n   - (2) A second common driver phrased as a different client use case or story.  \n   - (3) An open door for the lead‚Äôs own goals.  \n5. **Reasons to Connect:** Explicitly show that clients benefit by gaining clarity, finding opportunities, and avoiding mistakes.  \n6. **Length:** Keep the script under 15 seconds (~55‚Äì70 words).  \n7. **Structure:**  \n   - Greeting & intro  \n   - Three client paths (driver #1, driver #2, other goals)  \n   - Call-to-Action: \"I‚Äôve included a link below to my calendar‚Äîlet‚Äôs book a quick 15 minutes this week.\"\n\n**Output:** ONLY the complete script in the target language. Do not include explanations, reasoning, or metadata."
        },
        "promptType": "define"
      },
      "typeVersion": 2
    },
    {
      "id": "a8e7dca3-17fc-4569-b80a-110f149ee13a",
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -448,
        288
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "m3lvrOlvFQXaHYw7",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "6980158c-d632-4bc2-bd99-3f5189f6d29c",
      "name": "Get Video",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        400,
        80
      ],
      "parameters": {
        "url": "https://api.heygen.com/v1/video_status.get",
        "options": {},
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "queryParameters": {
          "parameters": [
            {
              "name": "video_id",
              "value": "={{ $('Generate Video').item.json.data.video_id }}"
            }
          ]
        },
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "kroC0Qp6Rg3l8q5H",
          "name": "HeyGen"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "17ecfb6c-cccb-430f-b253-28b5052b4114",
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        880,
        64
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1",
          "cachedResultName": "GPT-4.1"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "content": "=Prospect Information:\nName: {{ $('HTTP Request').item.json.matched_first_name }} (use Title Case)\nEmail Address: {{ $('HTTP Request').item.json.email1 }}\n\nThumbnail URL: {{ $json.data.thumbnail_url }}\nVideo Link: {{ $('Get Video').item.json.data.video_url }}"
            },
            {
              "role": "system",
              "content": "You're an email agent for Sam at Best Real Estate. Your job is to craft an impactful email based on the information you've received from a form submission, and to pass along a short intro video along with the email. The goal of the email is to ask the prospect to book a time with you on https://calendly.com/best-real-estate.\n\nYou will also receive the video link and thumbnail to embed in the user input, please embed the video link on to the thumbnail instead of showing the entire long URL.\n\nOutput in HTML so that the thumbnail and video format is correct - only output the body of the email to the next node, as the next node is the gmail node."
            }
          ]
        }
      },
      "credentials": {
        "openAiApi": {
          "id": "m3lvrOlvFQXaHYw7",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "245edf28-804c-4e15-b7c6-090a050896e1",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1184,
        -144
      ],
      "parameters": {
        "width": 260,
        "height": 740,
        "content": "Form Submission Trigger"
      },
      "typeVersion": 1
    },
    {
      "id": "f6fd2259-4d7e-4e4f-a9e3-48a06c221231",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -896,
        -144
      ],
      "parameters": {
        "color": 2,
        "width": 360,
        "height": 740,
        "content": "Script Agent"
      },
      "typeVersion": 1
    },
    {
      "id": "b7b0fbb7-98da-44e9-9637-86b8ca9c7726",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -528,
        -144
      ],
      "parameters": {
        "color": 6,
        "width": 360,
        "height": 740,
        "content": "Post & Wait"
      },
      "typeVersion": 1
    },
    {
      "id": "c0dae26b-1bce-4ce3-b0e2-a1822852ba41",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -144,
        -144
      ],
      "parameters": {
        "color": 4,
        "width": 500,
        "height": 740,
        "content": "Get Video"
      },
      "typeVersion": 1
    },
    {
      "id": "cf0ab846-53c4-4f56-b228-215914a5bdf0",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        -144
      ],
      "parameters": {
        "color": 3,
        "width": 992,
        "height": 740,
        "content": "Send Outreach Email with Video"
      },
      "typeVersion": 1
    },
    {
      "id": "d5ff7511-076b-4ea3-87ad-2170ede0ad12",
      "name": "Send Email & Video",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1200,
        64
      ],
      "webhookId": "f1ed801f-902e-44d9-a28c-630b13391978",
      "parameters": {
        "sendTo": "={{ $('On form submission').item.json['Email Address'] }}",
        "message": "={{ $json.message.content }}",
        "options": {},
        "subject": "Hey from Scout"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "T30rYA6jPWPhR5J3",
          "name": "Gmail account 3"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "1c5154dc-b604-4d5e-bfdc-84c7c476ed5d",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2080,
        -144
      ],
      "parameters": {
        "width": 880,
        "height": 1296,
        "content": "üé• AI-Powered Inbound Video Agent ‚Äì Auto-Respond to Leads with Personalized Videos\n\nDescription:\nThis workflow helps you instantly respond to inbound leads with a hyper-personalized video and email‚Äîfully automated using n8n, Scout, Heygen API, and OpenAI.\n\nüì• How It Works:\n\nForm Trigger\n‚ÄÉCaptures user inputs like name, email, address, and additional data points from Scout.\n\nAI Video Prompt Agent\n\n‚ÄÉUses LangChain + OpenAI to write a short, personalized script (e.g., ‚ÄúHey this is Jason from Top Real Estate...‚Äù).\n\nRetrieve Data\n‚ÄÉGets data from Scout to personalize your outreach.\n\nVideo Generation (Heygen API)\n‚ÄÉTriggers a video using a selected avatar and voice style.\n\nVideo Status & Wait Logic\n‚ÄÉMonitors the video generation status until completed.\n\nGet Final Video URL & Thumbnail\n‚ÄÉRetrieves the finished video and prepares for embedding.\n\nEmail Writer (GPT-4)\n‚ÄÉGenerates an HTML-based outreach email including the lead's info and embedded video thumbnail with a booking link.\n\nEmail Delivery (Gmail Node)\n‚ÄÉSends the full message to the inbound lead automatically.\n\n‚öôÔ∏è Tools & Integrations:\nn8n (self-hosted or cloud)\n\nHeygen API ‚Äì for video generation\n\nLangChain + OpenAI GPT-4 ‚Äì for script writing and email creation\n\nGmail Node ‚Äì for automated outreach delivery\n\nüîß Setup Instructions:\nHeygen API Key\n‚ÄÉCreate a Heygen account and retrieve your API key. Set it up as a credential in n8n (httpHeaderAuth).\n\nScout API Key\n‚ÄÉAdd your Scout API key in your Scout account at app.trustscout.com.\n\nOpenAI Key\n‚ÄÉAdd your OpenAI API key under OpenAI credentials.\n\nGmail OAuth2\n‚ÄÉConnect your Gmail account using OAuth2 for sending emails.\n\nCustomize the Prompt\n‚ÄÉModify the system message in the LangChain Agent node to reflect your brand tone or CTA.\n\nCalendly Link\n‚ÄÉUpdate the call-to-action links in both the video prompt and email generator nodes with your real booking URL.\n\nüí° Use Cases:\nAutomating welcome sequences for new signups\n\nPersonalized video lead responses for agencies and outreach"
      },
      "typeVersion": 1
    },
    {
      "id": "60d7e8ac-fa24-447b-9d76-23441064fa93",
      "name": "Generate Video",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -48,
        80
      ],
      "parameters": {
        "url": "https://api.heygen.com/v2/video/generate",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"video_inputs\": [\n    {\n      \"character\": {\n        \"type\": \"avatar\",\n        \"avatar_id\": \"Gala_standing_businesssofa_side_close\",\n        \"avatar_style\": \"normal\"\n      },\n      \"voice\": {\n        \"type\": \"text\",\n        \"input_text\": \"{{ $json.output }}\",\n        \"voice_id\": \"35b75145af9041b298c720f23375f578\",\n        \"speed\": 1.0\n      }\n    }\n  ],\n  \"dimension\": {\n    \"width\": 1280,\n    \"height\": 720\n  }\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "kroC0Qp6Rg3l8q5H",
          "name": "HeyGen"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "214e7415-18cb-4353-a854-7251f85c6068",
      "name": "Get Avatars",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -48,
        320
      ],
      "parameters": {
        "url": "https://api.heygen.com/v2/avatars",
        "options": {},
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "kroC0Qp6Rg3l8q5H",
          "name": "HeyGen"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "31aa6c74-0f87-432e-9eb5-083c30b5dc0e",
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -784,
        80
      ],
      "parameters": {
        "url": "https://api.trustscout.com/enterprise/people/lookup/",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n    \"first_name\": \"{{ $json.first_name }}\",\n    \"middle_name\": \"{{ $json.middle_name }}\",\n    \"last_name\": \"{{ $json.last_name }}\",\n    \"address\": \"{{ $json.address }}\",\n    \"city\": \"{{ $json.city }}\",\n    \"state\": \"{{ $json.state }}\",\n    \"county\": \"{{ $json.county }}\",\n    \"zip_code\": \"{{ $json.zip_code }}\",\n    \"exactmatch\": false,\n    \"minscore\": 0.0,\n    \"maxscore\": 100.0,\n    \"count\": 1,\n    \"level\": \"{{ $json.level }}\",\n    \"phone\": \"{{ $json.phone }}\",\n    \"email\": \"{{ $json.email }}\"\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Api-Key",
              "value": "ADD YOUR SCOUT API KEY HERE"
            }
          ]
        }
      },
      "typeVersion": 4.2
    }
  ],
  "active": false,
  "pinData": {
    "HTTP Request": [
      {
        "json": {
          "age": 41,
          "hhi": "$250,000-$499,999",
          "lor": "5",
          "city": "Phoenix",
          "child": null,
          "state": "AZ",
          "county": "Maricopa",
          "email1": "test@email.com",
          "email2": null,
          "email3": null,
          "email4": null,
          "email5": null,
          "gender": "F",
          "phone1": "6464769537",
          "phone2": null,
          "phone3": null,
          "suffix": null,
          "vacant": "N",
          "wealth": "$1,000,000+",
          "address": "3236 E Chandler Blvd #2037",
          "children": "No Children",
          "language": "English",
          "latitude": "37.801607",
          "zip_code": "85048",
          "dwelltype": "S",
          "last_name": "Alva",
          "longitude": "-122.405182",
          "marriedcd": "S",
          "prop_cond": null,
          "prop_type": "Condominium",
          "veterancd": null,
          "first_name": "Patricia",
          "occupation": "Farm",
          "prop_acres": "0.0854",
          "year_built": "1994",
          "buyer_score": "47",
          "hequity_est": "1392027.0",
          "homeownercd": "R",
          "match_score": 47.42,
          "middle_name": "",
          "prop_bedrms": "2",
          "prop_mtgamt": null,
          "square_feet": "1101.0",
          "prop_mtgterm": null,
          "seller_score": "59",
          "prop_mtg_date": null,
          "prop_ownerocc": null,
          "prop_fullbaths": "2",
          "prop_loantoval": "65",
          "prop_sale_date": "2015-06-11",
          "prop_mtgintrate": null,
          "prop_rmsequitycd": null,
          "email_confidence1": "H",
          "email_confidence2": "",
          "email_confidence3": "",
          "email_confidence4": "",
          "email_confidence5": "",
          "matched_last_name": "ALVA",
          "prop_mtg_due_date": null,
          "matched_first_name": "PATRICIA",
          "mortgage_loan_type": null,
          "matched_middle_name": "",
          "prop_mtgintratetype": null
        }
      }
    ],
    "On form submission": [
      {
        "json": {
          "city": "Phoenix",
          "count": 0,
          "email": "",
          "level": "address",
          "phone": "",
          "state": "AZ",
          "county": "",
          "address": "3236 E Chandler Blvd #2037",
          "formMode": "test",
          "maxscore": 0,
          "minscore": 0,
          "zip_code": "85048",
          "last_name": "Alva",
          "exactmatch": "",
          "first_name": "Patricia",
          "middle_name": "",
          "submittedAt": "2025-09-30T01:35:42.114-07:00"
        }
      }
    ]
  },
  "settings": {
    "callerPolicy": "workflowsFromSameOwner",
    "executionOrder": "v1"
  },
  "versionId": "ac049f24-dab4-4c55-87ed-1506672e30f5",
  "connections": {
    "If1": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Get Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "Get Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Send Email & Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Video": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Selfie Video Prompt Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Video": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Selfie Video Prompt Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Selfie Video Prompt Agent": {
      "main": [
        [
          {
            "node": "Generate Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}