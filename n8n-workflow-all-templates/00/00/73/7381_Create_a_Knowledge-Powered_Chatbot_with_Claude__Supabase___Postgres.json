{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Create a Knowledge-Powered Chatbot with Claude, Supabase & Postgres ",
    "wechat": "youandme10086",
    "id": 7381,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "480327a5-b4d1-4b33-a916-b3e8e00e0a01",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        320,
        -16
      ],
      "parameters": {
        "options": {
          "systemMessage": "You are a helpful assistant"
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "67ee572c-648c-42aa-a87b-f54a427676e8",
      "name": "Anthropic Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -48,
        736
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-20250514",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {}
      },
      "credentials": {
        "anthropicApi": {
          "id": "WXQf5QsxCs3AyxlW",
          "name": "Anthropic account"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "8f42d1b6-bb2a-4413-a067-b029af99c30e",
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "position": [
        608,
        736
      ],
      "parameters": {},
      "credentials": {
        "postgres": {
          "id": "Bs4YHHIz76Yg6LAA",
          "name": "Postgres account - Sigma"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "af4b62d7-e68d-48f6-95a1-476f22c0c8a2",
      "name": "Supabase Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "position": [
        1056,
        256
      ],
      "parameters": {
        "mode": "retrieve-as-tool",
        "options": {},
        "tableName": {
          "__rl": true,
          "mode": "id",
          "value": "=Your_database"
        },
        "toolDescription": "Data base"
      },
      "credentials": {
        "supabaseApi": {
          "id": "H0kInY9i7zSLf3eu",
          "name": "IDR"
        }
      },
      "typeVersion": 1.3
    },
    {
      "id": "c4adc458-83dd-4fdd-a90b-afd7f64b4e14",
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "position": [
        1680,
        288
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "Wk5dyBYFy6HDwml2",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "057a14db-e155-4612-ba4d-2bca36615613",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        -96
      ],
      "parameters": {
        "width": 480,
        "height": 224,
        "content": "# Chat trigger"
      },
      "typeVersion": 1
    },
    {
      "id": "437859f1-984a-43e0-9793-ea36aa901b3e",
      "name": "Chat trigger",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        -384,
        -16
      ],
      "webhookId": "9ce2709c-faa0-4977-a3ce-5e9adb6d62f1",
      "parameters": {
        "options": {}
      },
      "typeVersion": 1.3
    },
    {
      "id": "dfc9591e-58df-4434-9d58-5e3aac5c5dda",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        160
      ],
      "parameters": {
        "width": 480,
        "height": 352,
        "content": "### Role: Entry point for all user interactions\n\n### Function:\n\nReceives incoming messages from users via webhook\nInitiates the conversation flow for each user query\nHandles multiple concurrent conversations simultaneously\nProvides secure endpoint for chat interface integration\n\n### What you need to configure:\n\nSet up the webhook URL in your chat interface\nEnsure proper security settings for public access\nConfigure any rate limiting if needed"
      },
      "typeVersion": 1
    },
    {
      "id": "21aa7507-a959-4f3d-8c18-7bd93d2fa9c6",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        -96
      ],
      "parameters": {
        "color": 2,
        "width": 480,
        "height": 224,
        "content": "# AI Agent"
      },
      "typeVersion": 1
    },
    {
      "id": "de90b230-1d56-431d-ba35-220052cd7ffe",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        160
      ],
      "parameters": {
        "color": 2,
        "width": 480,
        "height": 384,
        "content": "### Role: Central orchestrator and conversation manager\n\n### Function:\n\nCoordinates all system components to generate responses\nManages the conversation flow and context switching\nDecides when to use tools like the knowledge base search\nIntegrates multiple AI capabilities into coherent responses\nMaintains conversation coherence across multiple exchanges\n\n### Critical success factors:\n\nWrite a comprehensive system prompt that defines the agent's personality, expertise, and behavior\nDefine clear instructions for when and how to use available tools\nEstablish conversation boundaries and appropriate response styles\nInclude specific domain knowledge and response guidelines\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "05c58432-7c3f-4cf4-a08b-5bb71335450b",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        656
      ],
      "parameters": {
        "color": 3,
        "width": 480,
        "height": 224,
        "content": "# Anthropic Chat Model"
      },
      "typeVersion": 1
    },
    {
      "id": "db58fda4-7c44-4938-bbc7-e298680a0276",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        912
      ],
      "parameters": {
        "color": 3,
        "width": 480,
        "height": 416,
        "content": "### Role: Primary language processing engine\n\n### Function:\n\nGenerates human-like responses with advanced reasoning capabilities\nUnderstands context and nuance in user queries\nProvides high-quality text generation for complex topics\nHandles multi-turn conversations with sophisticated understanding\nProcesses complex instructions and maintains consistent personality\n\n### Why this model:\n\nSuperior reasoning and analysis capabilities\nExcellent context retention across long conversations\nStrong performance with technical and professional content\nReliable safety and alignment features\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "15fef62a-870d-4f9c-8b22-8a8a643e5b2d",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        656
      ],
      "parameters": {
        "color": 4,
        "width": 480,
        "height": 224,
        "content": "# Postgres Chat Memory"
      },
      "typeVersion": 1
    },
    {
      "id": "4ad56b77-386c-4889-ae85-d08a35f0b292",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        912
      ],
      "parameters": {
        "color": 4,
        "width": 480,
        "height": 416,
        "content": "### Role: Conversation history and context retention\n\n### Function:\n\nStores conversation history for each user session\nMaintains context across multiple interactions\nEnables personalized responses based on previous conversations\nProvides continuity in long-form discussions\nHandles user preferences and conversation state\n\n### Setup requirements:\n\nConfigure PostgreSQL database connection\nEnsure proper table structure for conversation storage\nSet up appropriate retention policies for data management\nImplement user session management"
      },
      "typeVersion": 1
    },
    {
      "id": "83d9952b-0754-46a9-bbb5-f127927b8d36",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        944,
        192
      ],
      "parameters": {
        "color": 5,
        "width": 480,
        "height": 224,
        "content": "# Supabase Vector Store"
      },
      "typeVersion": 1
    },
    {
      "id": "e6bc04eb-0ae6-4d5d-8910-8e384f101dcc",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        944,
        448
      ],
      "parameters": {
        "color": 5,
        "width": 480,
        "height": 448,
        "content": "### Role: Knowledge base and intelligent document retrieval\n\n### Function:\n\nStores your proprietary knowledge in searchable vector format\nPerforms semantic search to find relevant information\nRetrieves contextually appropriate documents and data\nEnables RAG (Retrieval Augmented Generation) capabilities\nProvides tool functionality for the AI agent to access knowledge\n\n### Critical success factors:\n\nCurate high-quality source documents that are comprehensive and accurate\nOrganize content logically with clear structure and formatting\nInclude diverse content types covering your domain expertise\nRegularly update the knowledge base with new information\nEnsure document quality - well-written, factual, and relevant content\nUse descriptive metadata to improve search accuracy\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "f8788f28-5a17-4190-98db-f704401bed00",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1472,
        192
      ],
      "parameters": {
        "color": 6,
        "width": 480,
        "height": 224,
        "content": "# OpenAI Embeddings"
      },
      "typeVersion": 1
    },
    {
      "id": "3e4bcf71-9884-4e2f-9dfe-c9fb4afa9191",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1472,
        448
      ],
      "parameters": {
        "color": 6,
        "width": 480,
        "height": 448,
        "content": "### Role: Text vectorization engine for knowledge search\n\n### Function:\n\nConverts text into numerical vectors for semantic search\nEnables similarity matching between user queries and knowledge base\nPowers the search functionality of the vector store\nProvides consistent encoding for both queries and stored documents\n\n### Technical considerations:\n\nUses OpenAI's embedding model for high-quality vector representations\nHandles multiple languages effectively\nProvides stable and consistent embeddings for reliable search\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "feae8c69-ea1e-4f39-879b-43f32b928663",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1760,
        -192
      ],
      "parameters": {
        "color": 7,
        "width": 992,
        "height": 1728,
        "content": "# System Prompt Development\nEssential elements for the AI Agent:\n\nDefine the agent's role and expertise area clearly\nEstablish personality and communication style\nSet behavioral guidelines for professional interactions\nSpecify when to use the knowledge base tool\nInclude fallback instructions for unknown topics\nDefine response formatting and structure preferences\n\n## Example structure:\nYou are an expert [domain] consultant with [X years] experience.\nYour role is to provide accurate, helpful information about [topic area].\n\n## Guidelines:\n- Always search the knowledge base before providing detailed answers\n- Maintain a professional but approachable tone\n- If information isn't in the knowledge base, clearly state this\n- Provide specific, actionable advice when possible\n\n### Knowledge Base Optimization\nContent preparation:\n\nStructure documents with clear headings and sections\nInclude comprehensive coverage of your domain topics\nUse consistent terminology throughout all documents\nAdd context and examples to improve understanding\nUpdate regularly with new insights and information\n\n## Document types to include:\n\nProduct or service documentation\nFAQ responses and common questions\nIndustry best practices and guidelines\nCase studies and examples\nTechnical specifications and procedures\n\n### Conversation Management\nMemory optimization:\n\nConfigure appropriate session lengths\nSet up user identification for personalized experiences\nImplement conversation reset capabilities\nMonitor conversation quality and adjust prompts accordingly\n\n## Expected User Experience\n### What users can do:\n\nAsk questions about your domain expertise\nGet personalized responses based on conversation history\nAccess your knowledge base through natural language queries\nHave multi-turn conversations with context retention\nReceive accurate information backed by your curated content\n\n### What the system provides:\n✅ Intelligent responses powered by advanced AI\n✅ Access to your proprietary knowledge base\n✅ Conversation memory and personalization\n✅ Professional, consistent communication style\n✅ Reliable information retrieval and synthesis\n✅ Scalable support for multiple concurrent users\n## Success Metrics and Optimization\nMonitor these key indicators:\n\nResponse accuracy and relevance\nUser satisfaction with answers\nKnowledge base search effectiveness\nConversation completion rates\nSystem response times\n\nContinuous improvement strategies:\n\nRegularly review conversation logs\nUpdate system prompts based on user interactions\nExpand knowledge base with frequently asked topics\nOptimize vector search performance\nRefine agent instructions for better tool usage\n"
      },
      "typeVersion": 1
    },
    {
      "id": "15042b89-0808-4625-8861-6c2fd61f6f5f",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1024,
        -400
      ],
      "parameters": {
        "width": 816,
        "height": 336,
        "content": "## Need more advanced automation solutions? Contact us for custom enterprise workflows!\n\n# Growth-AI.fr\n\n## https://www.linkedin.com/in/allanvaccarizi/\n## https://www.linkedin.com/in/hugo-marinier-%F0%9F%A7%B2-6537b633/"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Chat trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  }
}