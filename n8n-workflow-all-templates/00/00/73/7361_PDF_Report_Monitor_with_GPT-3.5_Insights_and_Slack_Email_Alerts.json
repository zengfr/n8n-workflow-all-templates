{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "PDF Report Monitor with GPT-3.5 Insights and Slack/Email Alerts",
    "wechat": "youandme10086",
    "id": 7361,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "system-info",
      "name": "Alert System Info",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        250,
        150
      ],
      "parameters": {
        "content": "## Document Alert System\n\nMonitors:\n- FTP folders\n- Email attachments\n- Cloud storage\n- Direct URLs\n\nSends alerts via Slack & Email"
      },
      "typeVersion": 1
    },
    {
      "id": "schedule-check",
      "name": "Check Every 15 Minutes",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        450,
        300
      ],
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute",
              "minute": 15
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "check-folder",
      "name": "Check Report Folder",
      "type": "n8n-nodes-base.ftp",
      "position": [
        650,
        300
      ],
      "parameters": {
        "folder": "/reports/incoming",
        "operation": "list"
      },
      "typeVersion": 1
    },
    {
      "id": "filter-new-pdfs",
      "name": "Filter New PDFs",
      "type": "n8n-nodes-base.if",
      "position": [
        850,
        300
      ],
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.name.endsWith('.pdf') }}",
              "value2": "true"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "pdfvector-parse",
      "name": "PDF Vector - Parse Report",
      "type": "n8n-nodes-pdfvector.pdfVector",
      "position": [
        1050,
        300
      ],
      "parameters": {
        "useLlm": "auto",
        "resource": "document",
        "operation": "parse",
        "documentUrl": "={{ $json.url }}"
      },
      "typeVersion": 1
    },
    {
      "id": "extract-insights",
      "name": "Extract Key Insights",
      "type": "n8n-nodes-base.openAi",
      "position": [
        1250,
        300
      ],
      "parameters": {
        "model": "gpt-3.5-turbo",
        "options": {
          "responseFormat": {
            "type": "json_object"
          }
        },
        "messages": {
          "values": [
            {
              "content": "Extract key information from this report:\n\n{{ $json.content }}\n\nIdentify:\n1. Report type and date\n2. Key metrics or KPIs\n3. Important findings or alerts\n4. Action items\n5. Overall sentiment (positive/neutral/negative)\n\nReturn as structured JSON."
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "format-alerts",
      "name": "Format Alerts",
      "type": "n8n-nodes-base.code",
      "position": [
        1450,
        300
      ],
      "parameters": {
        "functionCode": "const insights = JSON.parse($json.content);\nconst fileName = $node['Check Report Folder'].json.name;\n\n// Determine alert priority\nlet priority = 'normal';\nif (insights.sentiment === 'negative' || insights.alerts?.length > 0) {\n  priority = 'high';\n}\n\n// Format message\nconst slackBlocks = [\n  {\n    type: 'header',\n    text: {\n      type: 'plain_text',\n      text: `ðŸ“„ New Report: ${insights.reportType || fileName}`\n    }\n  },\n  {\n    type: 'section',\n    fields: [\n      {\n        type: 'mrkdwn',\n        text: `*Date:* ${insights.date || 'Not specified'}`\n      },\n      {\n        type: 'mrkdwn',\n        text: `*Priority:* ${priority}`\n      }\n    ]\n  }\n];\n\nif (insights.metrics) {\n  slackBlocks.push({\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `*Key Metrics:*\\n${Object.entries(insights.metrics).map(([k, v]) => `â€¢ ${k}: ${v}`).join('\\n')}`\n    }\n  });\n}\n\nif (insights.findings) {\n  slackBlocks.push({\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `*Key Findings:*\\n${insights.findings.map(f => `â€¢ ${f}`).join('\\n')}`\n    }\n  });\n}\n\nreturn {\n  fileName,\n  insights,\n  priority,\n  slackBlocks,\n  emailContent: insights\n};"
      },
      "typeVersion": 1
    },
    {
      "id": "slack-alert",
      "name": "Send Slack Alert",
      "type": "n8n-nodes-base.slack",
      "position": [
        1650,
        250
      ],
      "parameters": {
        "blocks": "={{ $json.slackBlocks }}",
        "channel": "#reports",
        "attachments": []
      },
      "typeVersion": 1
    },
    {
      "id": "email-alert",
      "name": "Send Email Alert",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        1650,
        350
      ],
      "parameters": {
        "html": "=<h2>New Report Available</h2>\n<p><strong>Report:</strong> {{ $json.fileName }}</p>\n<p><strong>Type:</strong> {{ $json.insights.reportType }}</p>\n<p><strong>Date:</strong> {{ $json.insights.date }}</p>\n\n<h3>Key Metrics</h3>\n<ul>\n{{ Object.entries($json.insights.metrics || {}).map(([k, v]) => `<li>${k}: ${v}</li>`).join('\\n') }}\n</ul>\n\n<h3>Findings</h3>\n<ul>\n{{ ($json.insights.findings || []).map(f => `<li>${f}</li>`).join('\\n') }}\n</ul>\n\n<h3>Action Items</h3>\n<ul>\n{{ ($json.insights.actionItems || []).map(a => `<li>${a}</li>`).join('\\n') }}\n</ul>",
        "subject": "=New Report Alert: {{ $json.insights.reportType }}",
        "toEmail": "team@company.com"
      },
      "typeVersion": 1
    },
    {
      "id": "log-processed",
      "name": "Log Processed Report",
      "type": "n8n-nodes-base.postgres",
      "position": [
        1650,
        450
      ],
      "parameters": {
        "table": "processed_reports",
        "columns": "filename,report_type,processed_at,insights,priority",
        "operation": "insert"
      },
      "typeVersion": 1
    }
  ],
  "connections": {
    "Format Alerts": {
      "main": [
        [
          {
            "node": "Send Slack Alert",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send Email Alert",
            "type": "main",
            "index": 0
          },
          {
            "node": "Log Processed Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter New PDFs": {
      "main": [
        [
          {
            "node": "PDF Vector - Parse Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Report Folder": {
      "main": [
        [
          {
            "node": "Filter New PDFs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Key Insights": {
      "main": [
        [
          {
            "node": "Format Alerts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Every 15 Minutes": {
      "main": [
        [
          {
            "node": "Check Report Folder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PDF Vector - Parse Report": {
      "main": [
        [
          {
            "node": "Extract Key Insights",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}