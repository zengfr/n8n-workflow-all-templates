{
  "id": "n5U2rBeNhgNSj3Dw",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Comprehensive SEO Keyword Research & Analysis with DataForSEO and Airtable",
    "wechat": "youandme10086",
    "id": 8722,
    "update_time": "2025-11-10"
  },
  "name": "Keyword research",
  "tags": [
    {
      "id": "02JXiKxnNYVhqGLC",
      "name": "keyword research",
      "createdAt": "2025-09-09T14:27:49.190Z",
      "updatedAt": "2025-09-09T14:27:49.190Z"
    }
  ],
  "nodes": [
    {
      "id": "7613b783-7f7e-4299-90f7-46ffd266eca3",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1488,
        1024
      ],
      "parameters": {
        "color": 6,
        "width": 640,
        "height": 320,
        "content": "## Get Primary Keyword from Airtable\nAirtable triggers the workflow with send data automation to n8n. \n\nGet airtable record gets the fields for D4SEO api enpoints. Fields are set for use later in workflow."
      },
      "typeVersion": 1
    },
    {
      "id": "2f87d091-2c02-4ac8-8a3e-394530d2c3f6",
      "name": "Related API Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        80,
        144
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/related_keywords/live",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"keyword\": \"{{ $json['Primary Keyword'] }}\",\n        \"location_name\": \"{{ $json.Location }}\",\n        \"language_name\": \"{{ $json.Language }}\",\n        \"include_serp_info\": true,\n        \"include_seed_keyword\": true,\n        \"limit\": {{ $json.Limit }},\n  \"depth\":{{ $json.Depth }}\n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "d8cb4966-58c1-4a77-87d3-e5dd51830d4b",
      "name": "Get Primary Keyword",
      "type": "n8n-nodes-base.airtable",
      "position": [
        -1008,
        1168
      ],
      "parameters": {
        "id": "=recYwGySY79Qrp0ZJ",
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblcHAo24deaAxfRk",
          "cachedResultUrl": "https://airtable.com/appsGSh5ZZW53Vt1w/tblcHAo24deaAxfRk",
          "cachedResultName": "Primary Keywords"
        },
        "options": {}
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "50301d86-1244-44be-a9d5-adaf87a43889",
      "name": "Split Out Result Items",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        304,
        144
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].items"
      },
      "typeVersion": 1
    },
    {
      "id": "3acbffe2-88aa-45f1-827e-fe7c2b1a2415",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "parameters": {
        "color": 5,
        "width": 760,
        "height": 320,
        "content": "## Get Related Keywords from DFSEO and Create Airtable Records in the Master All Keyword Variations table.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "e560f396-0d9a-4dde-a21b-e414480194dc",
      "name": "KW Suggestions API Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        80,
        464
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/keyword_suggestions/live",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"keyword\": \"{{ $json['Primary Keyword'] }}\",\n        \"location_name\": \"{{ $json.Location }}\",\n        \"language_name\": \"{{ $json.Language }}\",\n        \"include_serp_info\": true,\n        \"include_seed_keyword\": false,\n\"ignore_synonyms\": true,\n        \"limit\": {{ $json.Limit }}\n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "efe6fb34-93fd-4e38-bdd0-5840e11b3910",
      "name": "Split Out Suggested KWs",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        304,
        464
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].items"
      },
      "typeVersion": 1
    },
    {
      "id": "afee46f9-578c-4c58-b3ec-269e8138446a",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        368
      ],
      "parameters": {
        "color": 5,
        "width": 760,
        "height": 300,
        "content": "## Get Keyword Suggestions from DFSEO and Create Airtable Record\n\nNote: Some API data is hardcoded for now."
      },
      "typeVersion": 1
    },
    {
      "id": "cf463908-0b29-4fac-8c6d-5990db91435a",
      "name": "KW Ideas API Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        80,
        800
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/dataforseo_labs/google/keyword_ideas/live",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"keywords\": [ \n          \"{{ $json['Primary Keyword'] }}\"],\n        \"location_name\": \"{{ $json.Location }}\",\n        \"language_name\": \"{{ $json.Language }}\",\n        \"include_serp_info\": true,\n        \"include_seed_keyword\": false,\n        \"ignore_synonyms\": false,\n        \"closely_variants\": true,\n        \"limit\": {{ $json.Limit }}\n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "0d2b0ae3-593a-403e-9806-9e6ef3dd4c6f",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        704
      ],
      "parameters": {
        "color": 5,
        "width": 760,
        "height": 300,
        "content": "## Get Keyword Ideas from DFSEO and Create Airtable Record\n\nNote: Some API data is hardcoded for now."
      },
      "typeVersion": 1
    },
    {
      "id": "ea998f74-0503-4eac-99c4-43ae909005ef",
      "name": "Split Out Autocomplete",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        304,
        1152
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].items"
      },
      "typeVersion": 1
    },
    {
      "id": "4a3d1aed-5ae8-4dc2-ad49-6d4727b53ad4",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        1040
      ],
      "parameters": {
        "color": 5,
        "width": 760,
        "height": 300,
        "content": "## Get autocomplete from DFSEO\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "30d2e6bc-6780-4e9c-8e71-804c0a6131a4",
      "name": "Serp API Request1",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        64,
        1488
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/serp/google/organic/live/advanced",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"keyword\": \"{{ $json['Primary Keyword'] }}\",\n        \"location_name\": \"{{ $json.Location }}\",\n        \"language_name\": \"{{ $json.Language }}\",\n        \"depth\": 25,\n        \"people_also_ask_click_depth\": 1\n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "e1cde771-c7d3-43de-9eb3-dcf7db8ad864",
      "name": "Autocomplete API Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        80,
        1152
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/serp/google/autocomplete/live/advanced",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"keyword\": \"{{ $json['Primary Keyword'] }}\",\n        \"location_name\": \"{{ $json.Location }}\",\n        \"language_name\": \"{{ $json.Language }}\",\n        \"client\": \"gws-wiz-serp\"\n        \n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "fe954aea-a56c-4e2f-8a14-13f9fa10cf8e",
      "name": "Split Out SERP",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        304,
        1488
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].items"
      },
      "typeVersion": 1
    },
    {
      "id": "e5543b46-9885-4ca9-81bc-94306862f8f6",
      "name": "Create SERPS",
      "type": "n8n-nodes-base.airtable",
      "position": [
        928,
        1488
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tbl3V1Zz2nGtlc5xI",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tbl3V1Zz2nGtlc5xI",
          "cachedResultName": "SERP Results"
        },
        "columns": {
          "value": {
            "Type": "SERP",
            "Title": "={{ $json.title }}",
            "Domain": "={{ $json.domain }}",
            "SERP URL": "={{ $json.url }}",
            "Description": "={{ $json.description }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}"
          },
          "schema": [
            {
              "id": "SERP URL",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "SERP URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Title",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Description",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "f6996d46-ffb6-4f30-891f-30ce9e20d7a5",
      "name": "Split Out People Also Ask",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        720,
        1664
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "items"
      },
      "typeVersion": 1
    },
    {
      "id": "0037579e-624c-42ae-8b5c-8b23bdb5a27a",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        1392
      ],
      "parameters": {
        "color": 5,
        "width": 1080,
        "height": 440,
        "content": "## Get SERP from DFSEO for SERP Results and People Also Ask\n\nNote: SERP depth hardcoded to 25 and people also ask depth set to 1."
      },
      "typeVersion": 1
    },
    {
      "id": "7e099806-6903-44d3-86cf-db10fe6ffd43",
      "name": "Generate Subtopics API Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        64,
        1968
      ],
      "parameters": {
        "url": "https://api.dataforseo.com/v3/content_generation/generate_sub_topics/live",
        "method": "POST",
        "options": {},
        "jsonBody": "=[{\n        \"topic\": \"{{ $json['Primary Keyword'] }}\"\n        \n    }]",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth"
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "ZgMgrFPj4Lw8G8Zu",
          "name": "DataforSEO"
        },
        "httpHeaderAuth": {
          "id": "6r9kSTIMPsTKk37e",
          "name": "DataforSEO"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "169de71d-76d6-43c0-89c3-18e7b08889ed",
      "name": "Split Out Subtopics",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        320,
        1968
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].sub_topics"
      },
      "typeVersion": 1
    },
    {
      "id": "081338f0-f25e-453b-9fe8-993cf4856845",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        1872
      ],
      "parameters": {
        "color": 5,
        "width": 780,
        "height": 300,
        "content": "## Get Subtopics from DataForSEO\n\nNote: Some API data is hardcoded for now."
      },
      "typeVersion": 1
    },
    {
      "id": "f40f7411-f3e8-489b-b3f0-4ef46da83b46",
      "name": "Set Fields for API Request",
      "type": "n8n-nodes-base.set",
      "position": [
        -608,
        1168
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "6b75ee21-f3f7-49c9-8483-8cf0652d9cae",
              "name": "Primary Keyword",
              "type": "string",
              "value": "={{ $json['Primary Keyword'] }}"
            },
            {
              "id": "786af268-6e97-4658-b25c-52e90ca3451e",
              "name": "Location",
              "type": "string",
              "value": "={{ $json.Location }}"
            },
            {
              "id": "63424bac-a8eb-4e2a-8d07-329690707b59",
              "name": "Language",
              "type": "string",
              "value": "={{ $json.Language }}"
            },
            {
              "id": "92c703b4-e45f-4976-b033-39e5104c6b42",
              "name": "Limit",
              "type": "string",
              "value": "={{ $json.Limit }}"
            },
            {
              "id": "cf2fb225-4616-4e45-a63e-e9b6237cdd18",
              "name": "Depth",
              "type": "string",
              "value": "={{ $json.Depth }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "bebc2273-1b80-4d96-b6a6-8e109c57ee32",
      "name": "Set KW Suggestion Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        512,
        464
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "6157f47a-e94c-4376-abcd-007640a41169",
              "name": "keyword suggestion",
              "type": "string",
              "value": "={{ $json.keyword }}"
            },
            {
              "id": "a32d363d-ab61-4b41-b493-59758bb3b63c",
              "name": "msv",
              "type": "number",
              "value": "={{ $json.keyword_info.search_volume }}"
            },
            {
              "id": "bdb9e1ef-3aab-47bd-8049-124598a99490",
              "name": "search intent",
              "type": "string",
              "value": "={{ $json.search_intent_info.main_intent }}"
            },
            {
              "id": "4182ed56-b8ec-4948-b5c5-ce46b37f1e55",
              "name": "kw difficulty",
              "type": "number",
              "value": "={{ $json.keyword_properties.keyword_difficulty }}"
            },
            {
              "id": "e22a02ec-3176-426e-9307-9e0d36e52f31",
              "name": "competition",
              "type": "string",
              "value": "={{ $json.keyword_info.competition_level }}"
            },
            {
              "id": "a1bd2420-7eeb-4565-bdab-dd8ecc770664",
              "name": "type",
              "type": "string",
              "value": "KW Suggestion"
            },
            {
              "id": "1b16babf-4939-4a34-94a9-80fd8d582664",
              "name": "CPC",
              "type": "string",
              "value": "={{ $json.keyword_info.cpc }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "4c107e0d-97eb-4b7f-9605-b158d1806224",
      "name": "Set KW Related Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        512,
        144
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "69bd646b-3cdf-406a-bd27-02e76189ccc0",
              "name": "related keyword",
              "type": "string",
              "value": "={{ $json.keyword_data.keyword }}"
            },
            {
              "id": "3c2ffca8-0088-4c96-a39b-e173456a8d39",
              "name": "msv",
              "type": "string",
              "value": "={{ $json.keyword_data.keyword_info.search_volume }}"
            },
            {
              "id": "f242821d-13ea-4cca-a65c-e7ce1dd70098",
              "name": "search intent",
              "type": "string",
              "value": "={{ $json.keyword_data.search_intent_info.main_intent }}"
            },
            {
              "id": "8f3f803e-2a0f-44a9-b200-e7228b0e384a",
              "name": "KW Difficulty",
              "type": "string",
              "value": "={{ $json.keyword_data.keyword_properties.keyword_difficulty }}"
            },
            {
              "id": "654c01f6-6cc4-463c-9ec8-fecb52e91649",
              "name": "Competition",
              "type": "string",
              "value": "={{ $json.keyword_data.keyword_info.competition_level }}"
            },
            {
              "id": "ae49e383-99de-4707-9577-bc02a4d7df6f",
              "name": "type",
              "type": "string",
              "value": "KW Related"
            },
            {
              "id": "3d6cf607-2a2a-40f6-90e3-ee1a64ed4ecf",
              "name": "CPC",
              "type": "string",
              "value": "={{ $json.keyword_data.keyword_info.cpc }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "7eac52e7-a686-4226-b98e-7c7a50320443",
      "name": "Split Out KW Ideas",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        304,
        800
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "tasks[0].result[0].items"
      },
      "typeVersion": 1
    },
    {
      "id": "9d87c94b-8da5-44aa-9346-067ba6370d54",
      "name": "Set Keyword Ideas Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        512,
        800
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "6157f47a-e94c-4376-abcd-007640a41169",
              "name": "keyword ideas",
              "type": "string",
              "value": "={{ $json.keyword }}"
            },
            {
              "id": "a32d363d-ab61-4b41-b493-59758bb3b63c",
              "name": "msv",
              "type": "number",
              "value": "={{ $json.keyword_info.search_volume }}"
            },
            {
              "id": "bdb9e1ef-3aab-47bd-8049-124598a99490",
              "name": "search intent",
              "type": "string",
              "value": "={{ $json.search_intent_info.main_intent }}"
            },
            {
              "id": "4182ed56-b8ec-4948-b5c5-ce46b37f1e55",
              "name": "kw difficulty",
              "type": "number",
              "value": "={{ $json.keyword_properties.keyword_difficulty }}"
            },
            {
              "id": "e22a02ec-3176-426e-9307-9e0d36e52f31",
              "name": "competition",
              "type": "string",
              "value": "={{ $json.keyword_info.competition_level }}"
            },
            {
              "id": "f60d01f8-43c2-4ad3-834b-9be2a7753714",
              "name": "type",
              "type": "string",
              "value": "KW Idea"
            },
            {
              "id": "7aa0d762-6e43-4033-a4df-8d669cf99e3a",
              "name": "CPC",
              "type": "string",
              "value": "={{ $json.keyword_info.cpc }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "03e057ab-4ed8-497b-9e09-ee2545b1d444",
      "name": "Set Autocomplete Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        512,
        1152
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "6157f47a-e94c-4376-abcd-007640a41169",
              "name": "autocomplete",
              "type": "string",
              "value": "={{ $json.suggestion }}"
            },
            {
              "id": "f4368147-ae57-4d1e-b1e0-ff7a27f9f2c3",
              "name": "primary keyword",
              "type": "string",
              "value": "={{ $('Set Fields for API Request').item.json['Primary Keyword'] }}"
            },
            {
              "id": "50ff7db5-6b18-447d-bd31-7869afce6e38",
              "name": "type",
              "type": "string",
              "value": "={{ $json.type }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "f84a649a-ff99-4fe2-90dd-edad5865d89c",
      "name": "Set SERP Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        704,
        1488
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "67f7b4e0-2628-4b15-a0d7-b64a46d88271",
              "name": "url",
              "type": "string",
              "value": "={{ $json.url }}"
            },
            {
              "id": "55b8c458-7260-49dc-b788-06f1c4c72de8",
              "name": "title",
              "type": "string",
              "value": "={{ $json.title }}"
            },
            {
              "id": "8ce734f9-91b4-47ab-ad97-292922167bb1",
              "name": "description",
              "type": "string",
              "value": "={{ $json.description }}"
            },
            {
              "id": "0f00585b-dbb9-4907-8856-b39c05d14935",
              "name": "domain",
              "type": "string",
              "value": "={{ $json.domain }}"
            },
            {
              "id": "2928795b-ce40-471c-888d-21c1474300ce",
              "name": "type",
              "type": "string",
              "value": "SERP"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "0cac24b9-eefd-4ec5-8a16-5a1978d1da7b",
      "name": "Set PAA Fileds",
      "type": "n8n-nodes-base.set",
      "position": [
        928,
        1664
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "bd7308fb-28af-4482-b8aa-9fbd8cfe0496",
              "name": "People Also Ask",
              "type": "string",
              "value": "={{ $json.title }}"
            },
            {
              "id": "28e516f8-b4b9-45e4-85a8-98239dcaa652",
              "name": "type ",
              "type": "string",
              "value": "=People Also Ask"
            },
            {
              "id": "ceb1c8db-bb27-4b95-bea3-f529fe927a7e",
              "name": "Description",
              "type": "string",
              "value": "={{ $json.expanded_element[0].description }}"
            },
            {
              "id": "bed2fe8e-6934-4a46-8b65-e8bb39b87a93",
              "name": "primary keyword",
              "type": "string",
              "value": "={{ $('Set Fields for API Request').item.json['Primary Keyword'] }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "f28b1467-1257-4b97-a77a-8c3c5145ca40",
      "name": "Set Generate Subtopics Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        544,
        1968
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "31bbeb23-007a-449d-8d91-214c28c64c40",
              "name": "Subtopic",
              "type": "string",
              "value": "={{ $json['tasks[0].result[0].sub_topics'] }}"
            },
            {
              "id": "e4ab10bc-5688-4aa7-b179-86f39ae3918b",
              "name": "primary keyword",
              "type": "string",
              "value": "={{ $('Set Fields for API Request').item.json['Primary Keyword'] }}"
            },
            {
              "id": "875b6252-5c5e-499b-a83c-589b65bf1f60",
              "name": "type",
              "type": "string",
              "value": "Subtopic"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "26c3e0c3-5902-4c0a-8c61-c96bae0099ba",
      "name": "Airtable",
      "type": "n8n-nodes-base.airtable",
      "position": [
        0,
        2304
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblewTSMwBdGQKUuZ",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblewTSMwBdGQKUuZ",
          "cachedResultName": "Primary Keywords"
        },
        "columns": {
          "value": {
            "id": "={{ $('Set Airtable Fields').item.json.airtable_record_id }}",
            "Trigger": "KW Research Complete"
          },
          "schema": [
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": true,
              "required": false,
              "displayName": "id",
              "defaultMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Trigger",
              "type": "options",
              "display": true,
              "options": [
                {
                  "name": "Waiting",
                  "value": "Waiting"
                },
                {
                  "name": "Get Keyword Research",
                  "value": "Get Keyword Research"
                },
                {
                  "name": "KW Research Complete",
                  "value": "KW Research Complete"
                }
              ],
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Trigger",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Location",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Language",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Language",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Limit",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Limit",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Depth",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Depth",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "id",
            "Primary Keyword"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "update"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "b1afe7a0-5103-4288-b08a-6974af8d8815",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2080,
        864
      ],
      "parameters": {
        "color": 3,
        "width": 540,
        "height": 1220,
        "content": "# Setup \n\n## 1. Copy this Airtable base: [KW Research Content Ideation](https://airtable.com/apphzhR0wI16xjJJs/shrsojqqzGpgMJq9y)\n## Important: Copy the base. Please do not ask for access. \n## 2. Set Airtable Base Id\nWith your (copied) Airtable base open (to any table), copy the base id from the url.\n\nThe base id begins with app. For example: https://airtable.com/apphzhR0wI16xjJJs/tblewTSMwBdGQKUuZ/\napphzhR0wI16xjJJs is the base id. Enter this into the Set Airtable Fields node.\n\n## 3. Set up the Airtable Automation to trigger the workflow.\nCreate an Airtable Automation called Start KW Research.\n\nAdd a 'When a record matches conditions' trigger. Set the table to Primary Keywords. And condition to When Trigger is Get Keyword Research.\n\nAdd a script to the automation to trigger n8n.\n\n### Airtable Script\nlet params = input.config();\nlet recordID = params.recordID;\nlet n8nWebhookURL = params.n8nWebhookURL\nconst webhook = (n8nWebhookURL + \"?recordID=\" + recordID);\nconsole.log(webhook);\nawait fetch(webhook, {\n    method: 'POST'\n});\n\n### Input Variables\n\nName: recordID\nValue: Airtable record ID (click on the +, find the field, and add it here.)\n\nName:\nn8nWebhookURL\nValue: Paste your n8n webhook url here.\n\nRemember:** Change the webhook url in n8n when you change from testing to production in n8n.\n## 4. Test your automation\nSelect test automation in Airtable. It should run successfully. If it doesn't, it will not work to trigger the n8n workflow."
      },
      "typeVersion": 1
    },
    {
      "id": "f7937b9e-a913-4b19-bcd0-58073575ad6f",
      "name": "Set Airtable Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -1232,
        1168
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "9838f724-a2ac-4875-8de4-0513bab64ede",
              "name": "airtable_base_id",
              "type": "string",
              "value": "apprrQ0Dv1cJOfMi9"
            },
            {
              "id": "2b2143fe-f247-4585-bf89-e9967bc7f1a0",
              "name": "airtable_record_id",
              "type": "string",
              "value": "={{ $json.query.recordID }}"
            },
            {
              "id": "b10395bd-1f04-4f0b-b04e-5baf9099c630",
              "name": "primary_keywords_table_id",
              "type": "string",
              "value": "tblewTSMwBdGQKUuZ"
            },
            {
              "id": "c3515f7b-299b-4028-a367-4d77f7fe4e1a",
              "name": "article_writer_table_id",
              "type": "string",
              "value": "tblVTpv8JG5lZRiF2"
            },
            {
              "id": "1270cecf-2f83-4d26-918c-4b8375c7167f",
              "name": "brand_guidelines_table_id",
              "type": "string",
              "value": "tblLLfZPMNRJxUmge"
            },
            {
              "id": "7b5e26a8-f1a9-488c-b262-4593bb189797",
              "name": "master_kw_variations_table_id",
              "type": "string",
              "value": "tblHz4bwclrB24afu"
            },
            {
              "id": "54d5e18f-5efe-4153-9822-397a1c5c3962",
              "name": "keyword_content_table_id",
              "type": "string",
              "value": "tblRDR7uE4b73ZpRt"
            },
            {
              "id": "52241dca-0859-4eda-86b7-68a4dc6c9660",
              "name": "clusters_content_table_id",
              "type": "string",
              "value": "tbl7trYCu9sSGdRTJ"
            },
            {
              "id": "40f0c007-119b-4573-8475-0da76f00f0f7",
              "name": "serp_results_table_id",
              "type": "string",
              "value": "tbl3V1Zz2nGtlc5xI"
            },
            {
              "id": "e104b7cb-9994-4cd1-92cf-b7c99f1730e9",
              "name": "keyword_categories_table_id",
              "type": "string",
              "value": "tblD8sMi6W4EikkN4"
            },
            {
              "id": "80466248-ff78-4034-bea9-141d0b189836",
              "name": "clusters_table_id",
              "type": "string",
              "value": "tblDRGVjI1vPuJxvm"
            },
            {
              "id": "41828ec1-afdd-4df2-91fd-5280f1e8cb66",
              "name": "primary_keyword",
              "type": "string",
              "value": ""
            },
            {
              "id": "ba2903be-1a4b-4a08-a4fd-ed5f2bb3259f",
              "name": "type",
              "type": "string",
              "value": ""
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "7deec2ca-7ec8-4fc2-b742-aa0b6295d5ac",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        784,
        0
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 320,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "62451803-acb2-4fa8-8d7f-c4175555edce",
      "name": "Add Related KWs to Master Table",
      "type": "n8n-nodes-base.airtable",
      "position": [
        864,
        144
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "CPC": "={{ $json.CPC }}",
            "MSV": "={{ $json.msv }}",
            "Type": "={{ $json.type }}",
            "Keyword": "={{ $json['related keyword'] }}",
            "Competition": "={{ $json.Competition }}",
            "KW Difficulty": "={{ $json['KW Difficulty'] }}",
            "Search Intent": "={{ $json['search intent'] }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "ff23feaf-f51a-4d1f-8153-f5e2a7e58e7a",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        784,
        368
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 300,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "89eeb233-f403-4aab-819e-02ef62f8edaf",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        784,
        704
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 300,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "8285997a-5bd2-4c62-ae11-02fff7678436",
      "name": "Add KW Suggestions to Master table",
      "type": "n8n-nodes-base.airtable",
      "position": [
        864,
        464
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "CPC": "={{ $json.CPC }}",
            "MSV": "={{ $json.msv }}",
            "Type": "={{ $json.type }}",
            "Keyword": "={{ $json['keyword suggestion'] }}",
            "Competition": "={{ $json.competition }}",
            "KW Difficulty": "={{ $json['kw difficulty'] }}",
            "Search Intent": "={{ $json['search intent'] }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "f85c31e7-e5b1-4e82-92ae-8f935fb2edd6",
      "name": "Add KW Ideas to Master table",
      "type": "n8n-nodes-base.airtable",
      "position": [
        864,
        800
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "CPC": "={{ $json.CPC }}",
            "MSV": "={{ $json.msv }}",
            "Type": "={{ $json.type }}",
            "Keyword": "={{ $json['keyword ideas'] }}",
            "Competition": "={{ $json.competition }}",
            "KW Difficulty": "={{ $json['kw difficulty'] }}",
            "Search Intent": "={{ $json['search intent'] }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "54d98218-3f1e-482d-b5d2-303952e0bdfb",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        784,
        1040
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 300,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "319537e0-1a78-48ae-b0be-7b80eaa9eaf8",
      "name": "Add Autocomplete to Master table",
      "type": "n8n-nodes-base.airtable",
      "position": [
        864,
        1152
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "Type": "={{ $json.type }}",
            "Keyword": "={{ $json.autocomplete }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "fc2c7e15-7ed1-4659-a714-ad971e009d93",
      "name": "Filter SERPs",
      "type": "n8n-nodes-base.filter",
      "position": [
        528,
        1488
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "79fc8440-e131-4d3f-858d-653e0f210cde",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.type }}",
              "rightValue": "organic"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "c00a926d-c89f-409f-b50f-5a8a7681802c",
      "name": "Filter PAA",
      "type": "n8n-nodes-base.filter",
      "position": [
        528,
        1664
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "79fc8440-e131-4d3f-858d-653e0f210cde",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.type }}",
              "rightValue": "people_also_ask"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "0ee130c4-4526-448f-ba6a-4425d6518d58",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        1520
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 300,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "44e0ccde-399a-44c2-9a7f-0fa082eb0b13",
      "name": "Add PAA to Master Table",
      "type": "n8n-nodes-base.airtable",
      "position": [
        1200,
        1648
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "Type": "={{ $json['type '] }}",
            "Keyword": "={{ $json['People Also Ask'] }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "638fcf15-05b1-479d-938a-2c3b522dee28",
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        800,
        1872
      ],
      "parameters": {
        "color": 4,
        "width": 260,
        "height": 300,
        "content": "## Add to Master All KW Variations table.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "510835f0-53cd-41c1-aef4-e33733b81efd",
      "name": "Add PAA to Master Table1",
      "type": "n8n-nodes-base.airtable",
      "position": [
        880,
        1968
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Set Airtable Fields').item.json.airtable_base_id }}"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblHz4bwclrB24afu",
          "cachedResultUrl": "https://airtable.com/appuvbLPrnVBj88Eb/tblHz4bwclrB24afu",
          "cachedResultName": "Master All KW Variations"
        },
        "columns": {
          "value": {
            "Type": "={{ $json.type }}",
            "Keyword": "={{ $json.Subtopic }}",
            "Primary Keyword": "={{ $('Get Primary Keyword').item.json['Primary Keyword'] }}",
            "Date Pulled from D4SEO": "={{ $now.format('MM-dd-yyyy') }}"
          },
          "schema": [
            {
              "id": "Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Primary Keyword",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Primary Keyword",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Pulled from D4SEO",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Date Pulled from D4SEO",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MSV",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "MSV",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Search Intent",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Search Intent",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "KW Difficulty",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "KW Difficulty",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Competition",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Competition",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CPC",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "CPC",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "create"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "IdMuG6Ja3xc0kVnw",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "b6434069-8abb-451d-842b-add1e9fe88a9",
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1504,
        1440
      ],
      "parameters": {
        "color": 3,
        "width": 660,
        "height": 640,
        "content": "# How to Use\n## 1. Enter the keyword you would like to research in the Primary Keywords table along with location, language, limit, and depth.\nFor U.S. based searches, a good starting point for these settings are:\nLocation: United States\nLanguage: English\nLimit: 100 (The max number of results to be returned. D4SEO default is 100.)\nDepth: 2 (How deeply the API explores related data.) \n\nRefer to DataForSEO documentation for more information. https://dataforseo.com/help-center\n## 2. If testing, click test workflow. \nIt begins waiting for the Airtable trigger. Go to Airtable and change the trigger status field in the Primary Keywords table to Get Keyword Research. \n\nWorkflow will run and send all keyword research data back to the Master All KW Variations table.\n## 3. If your workflow is active, make sure that you change the webhook in the Airtable automation to trigger the workflow.\nTrigger the keyword research by changing the Primary Keywords trigger to Get Keyword Research as described in step 2. "
      },
      "typeVersion": 1
    },
    {
      "id": "288e16ab-6f73-47cc-a464-af6d2070f9b7",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -1440,
        1168
      ],
      "webhookId": "20d50a4c-b0cf-4f32-82ba-09ca88f3a699",
      "parameters": {
        "path": "20d50a4c-b0cf-4f32-82ba-09ca88f3a699",
        "options": {},
        "httpMethod": "POST"
      },
      "typeVersion": 2.1
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1adcd411-94ca-4802-a961-ee3a13b14233",
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Set Airtable Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter PAA": {
      "main": [
        [
          {
            "node": "Split Out People Also Ask",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter SERPs": {
      "main": [
        [
          {
            "node": "Set SERP Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set PAA Fileds": {
      "main": [
        [
          {
            "node": "Add PAA to Master Table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out SERP": {
      "main": [
        [
          {
            "node": "Filter SERPs",
            "type": "main",
            "index": 0
          },
          {
            "node": "Filter PAA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set SERP Fields": {
      "main": [
        [
          {
            "node": "Create SERPS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Serp API Request1": {
      "main": [
        [
          {
            "node": "Split Out SERP",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out KW Ideas": {
      "main": [
        [
          {
            "node": "Set Keyword Ideas Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Primary Keyword": {
      "main": [
        [
          {
            "node": "Set Fields for API Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Related API Request": {
      "main": [
        [
          {
            "node": "Split Out Result Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Airtable Fields": {
      "main": [
        [
          {
            "node": "Get Primary Keyword",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Subtopics": {
      "main": [
        [
          {
            "node": "Set Generate Subtopics Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KW Ideas API Request": {
      "main": [
        [
          {
            "node": "Split Out KW Ideas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set KW Related Fields": {
      "main": [
        [
          {
            "node": "Add Related KWs to Master Table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Autocomplete": {
      "main": [
        [
          {
            "node": "Set Autocomplete Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Result Items": {
      "main": [
        [
          {
            "node": "Set KW Related Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Autocomplete Fields": {
      "main": [
        [
          {
            "node": "Add Autocomplete to Master table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Suggested KWs": {
      "main": [
        [
          {
            "node": "Set KW Suggestion Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Autocomplete API Request": {
      "main": [
        [
          {
            "node": "Split Out Autocomplete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set KW Suggestion Fields": {
      "main": [
        [
          {
            "node": "Add KW Suggestions to Master table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Keyword Ideas Fields": {
      "main": [
        [
          {
            "node": "Add KW Ideas to Master table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out People Also Ask": {
      "main": [
        [
          {
            "node": "Set PAA Fileds",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KW Suggestions API Request": {
      "main": [
        [
          {
            "node": "Split Out Suggested KWs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Fields for API Request": {
      "main": [
        [
          {
            "node": "Related API Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "KW Suggestions API Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "KW Ideas API Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Autocomplete API Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Serp API Request1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Generate Subtopics API Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Generate Subtopics Fields": {
      "main": [
        [
          {
            "node": "Add PAA to Master Table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Subtopics API Request": {
      "main": [
        [
          {
            "node": "Split Out Subtopics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}