{
  "id": "xmOsgkv5077DUdwA",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "üéì Learn Evaluate tool. Tutorial for Beginners with Gemini and Google Sheets",
    "wechat": "youandme10086",
    "id": 8227,
    "update_time": "2025-11-10"
  },
  "name": "Learn Evaluate tool. Tutorial for Beginners",
  "tags": [],
  "nodes": [
    {
      "id": "22780f9e-13f3-456d-9c5e-65cba74c648c",
      "name": "When fetching a dataset row",
      "type": "n8n-nodes-base.evaluationTrigger",
      "position": [
        -320,
        -320
      ],
      "parameters": {
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit#gid=0",
          "cachedResultName": "Foglio1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit?usp=drivesdk",
          "cachedResultName": "Simple Evaluation Test"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JYR6a64Qecd6t8Hb",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "8e5f86a4-75eb-4eaa-a1c5-3d772a068f00",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        176,
        -192
      ],
      "parameters": {
        "text": "={{ $json.text }}",
        "options": {
          "systemMessage": "You are a helpful assistant.\n\nUse the calculator for math operations or tasks. \n\nReply only with the result",
          "returnIntermediateSteps": true
        },
        "promptType": "define"
      },
      "typeVersion": 2.2
    },
    {
      "id": "f64d8c51-0bba-4af6-9215-fac691b5b2ae",
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "position": [
        336,
        16
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "34454af4-4bf8-4f01-a5fc-ead383a33cbc",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        176,
        16
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "googlePalmApi": {
          "id": "AaNPKXAphyMzRgfA",
          "name": "Google Gemini(PaLM) (Eure)"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "c909b2c0-a6f3-430c-890b-e5d808384bea",
      "name": "Google Gemini Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        1344,
        -144
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "googlePalmApi": {
          "id": "AaNPKXAphyMzRgfA",
          "name": "Google Gemini(PaLM) (Eure)"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "932c05a1-d041-46f6-9908-caa7f751796f",
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -320,
        -48
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "08627269-df4a-44e9-80a2-566006be0712",
      "name": "Evaluation?",
      "type": "n8n-nodes-base.evaluation",
      "position": [
        480,
        -192
      ],
      "parameters": {
        "operation": "checkIfEvaluating"
      },
      "typeVersion": 4.7
    },
    {
      "id": "07c2955e-bb88-4e85-85af-930f03981216",
      "name": "Return chat response",
      "type": "n8n-nodes-base.noOp",
      "position": [
        736,
        -96
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "4f910377-a0ea-4f9e-a1ce-31b4c1cef790",
      "name": "Set output Evaluation",
      "type": "n8n-nodes-base.evaluation",
      "position": [
        960,
        -304
      ],
      "parameters": {
        "outputs": {
          "values": [
            {
              "outputName": "actual_output",
              "outputValue": "={{ $json.output }}"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit#gid=0",
          "cachedResultName": "Foglio1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit?usp=drivesdk",
          "cachedResultName": "Simple Evaluation Test"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JYR6a64Qecd6t8Hb",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.7
    },
    {
      "id": "bc2b70a6-8761-4ded-8453-36d0f3661885",
      "name": "Get output",
      "type": "n8n-nodes-base.set",
      "position": [
        736,
        -304
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "f9cbadca-1b23-48f3-9362-8c83f6580912",
              "name": "output",
              "type": "string",
              "value": "={{ $json.output }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "88732929-f06b-42ec-8e87-166f8074a802",
      "name": "Get input",
      "type": "n8n-nodes-base.set",
      "position": [
        -48,
        -320
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "9bba92a2-259f-4b52-8d8c-33e0c8aadeae",
              "name": "text",
              "type": "string",
              "value": "={{ $json.input }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "171ac411-e369-4e43-a8b5-f655fcd8bace",
      "name": "Get manual input",
      "type": "n8n-nodes-base.set",
      "position": [
        -48,
        -48
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "cac1815d-78eb-4df9-9ad0-e1926a3bafab",
              "name": "text",
              "type": "string",
              "value": "=How much is 8 * 3?"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "53e78ed8-5af7-4d88-9446-08ae12a8bfd7",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -320,
        -656
      ],
      "parameters": {
        "width": 576,
        "height": 240,
        "content": "## Learn Evaluate tool. Tutorial for Beginners\n\nThis workflow is a beginner-friendly tutorial demonstrating how to use the **Evaluation tool** to automatically score the AI‚Äôs output against a known correct answer (‚Äúground truth‚Äù) stored in a Google Sheet.\n\nEvaluate the factual correctness of a given output compared to the provided ground truth on a scale from 1 to 5.\n\n\n- Clone this [sheet](https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit?usp=sharing)\n"
      },
      "typeVersion": 1
    },
    {
      "id": "7d232a78-21cd-473a-82b5-8dcc883c7b3d",
      "name": "Corectness",
      "type": "n8n-nodes-base.evaluation",
      "position": [
        1152,
        -304
      ],
      "parameters": {
        "options": {
          "metricName": "Correctness"
        },
        "operation": "setMetrics",
        "actualAnswer": "={{ $('Get output').item.json.output }}",
        "expectedAnswer": "={{ $('When fetching a dataset row').item.json.expected_output }}"
      },
      "typeVersion": 4.7
    },
    {
      "id": "a1f6b120-ad00-48a8-938c-c137911c416b",
      "name": "Set correctness",
      "type": "n8n-nodes-base.evaluation",
      "position": [
        1472,
        -304
      ],
      "parameters": {
        "outputs": {
          "values": [
            {
              "outputName": "correctness",
              "outputValue": "={{ $json.Correctness }}"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit#gid=0",
          "cachedResultName": "Foglio1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y6Gyjws8se12QX0uG4eS9il5-v29IpsgdFx3VqIYzWQ/edit?usp=drivesdk",
          "cachedResultName": "Simple Evaluation Test"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JYR6a64Qecd6t8Hb",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.7
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "bc99c4ad-2614-4cc7-b823-b0fabf05e7d9",
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "Evaluation?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get input": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Corectness": {
      "main": [
        [
          {
            "node": "Set correctness",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get output": {
      "main": [
        [
          {
            "node": "Set output Evaluation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Evaluation?": {
      "main": [
        [
          {
            "node": "Get output",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Return chat response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set correctness": {
      "main": [
        []
      ]
    },
    "Get manual input": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set output Evaluation": {
      "main": [
        [
          {
            "node": "Corectness",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Corectness",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "When fetching a dataset row": {
      "main": [
        [
          {
            "node": "Get input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Get manual input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}