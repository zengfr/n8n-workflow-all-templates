{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Create Deepfake Videos by Swapping Faces with Fal.ai Wan 2.2 and AWS S3",
    "wechat": "youandme10086",
    "id": 9541,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "073ccc86-cbe3-486a-bd65-e86766334ac5",
      "name": "Fal.ai Animate Request1",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        336,
        640
      ],
      "parameters": {
        "url": "https://queue.fal.run/fal-ai/wan/v2.2-14b/animate/replace",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "authentication": "genericCredentialType",
        "bodyParameters": {
          "parameters": [
            {
              "name": "video_url",
              "value": "={{ $json.Video_URL }}"
            },
            {
              "name": "image_url",
              "value": "={{ $json.Image_URL }}"
            }
          ]
        },
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "9Q9Lcvaao4pwx1Cw",
          "name": "Fal.ai Key"
        }
      },
      "typeVersion": 4.1
    },
    {
      "id": "02e67b2b-32a6-4cb9-95b5-bf4c003e6fd6",
      "name": "Edit Fields2",
      "type": "n8n-nodes-base.set",
      "position": [
        -112,
        544
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "983df8ae-2727-4f17-baa0-7de3687e66a8",
              "name": "Video_URL",
              "type": "string",
              "value": "=https://n8n-marketplace.s3.us-east-1.amazonaws.com/{{ $('On form for S3').item.json.Video[0].filename }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "0e24c0e3-5441-4984-82d2-6e868c0ea96c",
      "name": "Edit Fields3",
      "type": "n8n-nodes-base.set",
      "position": [
        -112,
        736
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "983df8ae-2727-4f17-baa0-7de3687e66a8",
              "name": "Image_URL",
              "type": "string",
              "value": "=https://n8n-marketplace.s3.us-east-1.amazonaws.com/{{ $('On form for S3').item.json.Image[0].filename }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "adc6f12a-1819-49e2-b8b4-71796ce17194",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        112,
        640
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineByPosition"
      },
      "typeVersion": 3.2
    },
    {
      "id": "8dbec768-8afc-4454-8101-92e50522e3e4",
      "name": "Get Video Status",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        784,
        576
      ],
      "parameters": {
        "url": "=https://queue.fal.run/fal-ai/wan/requests/{{ $json.request_id }}/status",
        "options": {},
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "9Q9Lcvaao4pwx1Cw",
          "name": "Fal.ai Key"
        }
      },
      "typeVersion": 4.1
    },
    {
      "id": "c7211176-fcce-48f9-a815-f4e1925ce89d",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        1008,
        640
      ],
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.status }}",
              "value2": "COMPLETED"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "25275875-e329-42b0-b949-d98a8780193e",
      "name": "Get Final Video",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1232,
        640
      ],
      "parameters": {
        "url": "=https://queue.fal.run/fal-ai/wan/requests/{{ $json.request_id }}",
        "options": {},
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "9Q9Lcvaao4pwx1Cw",
          "name": "Fal.ai Key"
        }
      },
      "typeVersion": 4.1
    },
    {
      "id": "9bf0f066-7457-4c0c-9e97-7f975383296c",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        560,
        640
      ],
      "webhookId": "16e0e8fa-477f-40f5-8d56-4bbe5ad3dd7c",
      "parameters": {
        "unit": "minutes",
        "amount": 1
      },
      "typeVersion": 1.1
    },
    {
      "id": "9a8c2e31-54b5-44c8-ab4c-c31b64857948",
      "name": "Upload Video1",
      "type": "n8n-nodes-base.awsS3",
      "position": [
        -336,
        544
      ],
      "parameters": {
        "fileName": "={{ $json.Video[0].filename }}",
        "operation": "upload",
        "bucketName": "n8n-marketplace",
        "additionalFields": {},
        "binaryPropertyName": "Video"
      },
      "credentials": {
        "aws": {
          "id": "Qgww0HLZ5WpHbq2R",
          "name": "sandy4v AWS account"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "3ffe6642-89bb-428a-af58-d41b034ed109",
      "name": "Upload Image1",
      "type": "n8n-nodes-base.awsS3",
      "position": [
        -336,
        736
      ],
      "parameters": {
        "fileName": "={{ $json.Image[0].filename }}",
        "operation": "upload",
        "bucketName": "n8n-marketplace",
        "additionalFields": {},
        "binaryPropertyName": "Image"
      },
      "credentials": {
        "aws": {
          "id": "Qgww0HLZ5WpHbq2R",
          "name": "sandy4v AWS account"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "7cbaae7f-5b31-4c0f-9950-b4fdf36bc794",
      "name": "On form for S3",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -832,
        624
      ],
      "webhookId": "69576610-16a8-4058-80be-ac3c0db7598e",
      "parameters": {
        "options": {},
        "formTitle": "Input",
        "formFields": {
          "values": [
            {
              "fieldType": "file",
              "fieldLabel": "Video",
              "requiredField": true
            },
            {
              "fieldType": "file",
              "fieldLabel": "Image",
              "requiredField": true
            }
          ]
        }
      },
      "typeVersion": 2.3
    },
    {
      "id": "cd5fb29d-aab9-41de-a90c-3d570a316afe",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -960,
        400
      ],
      "parameters": {
        "color": 4,
        "width": 400,
        "height": 528,
        "content": "## Form Entry\n1. Upload Video - face from this video will be swapped with the \n2. Image - This is the source that will be used to swap the character in the video"
      },
      "typeVersion": 1
    },
    {
      "id": "883b98db-8517-4990-b6e7-ea5a1e889ad7",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -448,
        400
      ],
      "parameters": {
        "color": 6,
        "width": 528,
        "height": 528,
        "content": "## Public Storage\nVideo and Images stored on a publicly accesssible URL"
      },
      "typeVersion": 1
    },
    {
      "id": "a6ae45f1-9a31-4bbd-adf5-86b4f8083c57",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        272,
        384
      ],
      "parameters": {
        "color": 4,
        "width": 1216,
        "height": 624,
        "content": "## Wan 2.2 model is called via HTTP node via the Fal.ai \n* (You can use Replicateai also)\n"
      },
      "typeVersion": 1
    },
    {
      "id": "fd5f1cd9-10f8-4abb-8f48-742ae23fee53",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1312,
        528
      ],
      "parameters": {
        "color": 5,
        "width": 2800,
        "height": 320,
        "content": "## Enterprise Setup\n**AWS S3** Bucket storage used here"
      },
      "typeVersion": 1
    },
    {
      "id": "e2603964-af07-4f43-b3b3-7693f4a68715",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2048,
        80
      ],
      "parameters": {
        "width": 672,
        "height": 1312,
        "content": "\n# Title\n## Replace the face in the Video with the Image avatar using Fal.ai\n\n### **Description**\n\n## Who's it for?\n\nThis workflow is for content creators, marketers, and developers who want to automatically generate animated images from videos. It's particularly useful for creating engaging social media posts, dynamic ad creatives, or unique visual content for websites and presentations without needing complex video editing software.\n\n## How it works / What it does\n\nThis workflow automates the process of creating an animated image by replacing the subject in a video with a provided image. It starts with a form where you upload a video and an image. These files are then uploaded to an AWS S3 bucket to be publicly accessible. The workflow sends these file URLs to the Fal.ai API to begin the animation process. It then periodically checks the status of the animation job and, once completed, retrieves the final animated video.\n\n## How to set up\n\n1.  **Configure AWS S3 Credentials:** Make sure your AWS S3 credentials are set up in n8n to allow for file uploads.\n2.  **Set up Fal.ai Credentials:** You'll need an API key from Fal.ai. Add this as an HTTP header credential in n8n.\n3.  **Form Trigger:** The workflow is initiated by submitting a form. You can use the provided form trigger to upload your video and image files.\n4.  **Activate the Workflow:** Once your credentials are in place, activate the workflow. It will then be ready to receive form submissions.\n\n## Requirements\n\n*   Enterprise accounts - An active AWS account with S3 bucket permissions.\n*   Personal Setup - Cloudinary account for object storage \n*   A Fal.ai account and API key.\n*   An n8n instance.\n\n## üí¨ Need Help or Want to Learn More?\n\n* Join my **Skool community** for n8n + AI automation tutorials, live Q&A sessions, and exclusive workflows:  \nüëâ https://www.skool.com/n8n-ai-automation-champions\n\n---\n\n**Template Author:** Sandeep Patharkar  \n**Category:** Content Generation / Content Marketing \n**Difficulty:** Intermediate  \n**Estimated Setup Time:** ‚è±Ô∏è 20 minutes"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Get Final Video",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Get Video Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Fal.ai Animate Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Upload Image1": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Video1": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form for S3": {
      "main": [
        [
          {
            "node": "Upload Video1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Upload Image1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Video Status": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fal.ai Animate Request1": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}