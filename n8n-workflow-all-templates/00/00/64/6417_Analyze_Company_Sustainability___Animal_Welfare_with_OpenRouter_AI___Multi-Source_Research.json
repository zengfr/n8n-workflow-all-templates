{
  "id": "ndcOwRQm2Tf2h8UI",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Analyze Company Sustainability & Animal Welfare with OpenRouter AI & Multi-Source Research",
    "wechat": "youandme10086",
    "id": 6417,
    "update_time": "2025-11-10"
  },
  "name": "Analyze company sustainability and animal welfare with AI automation",
  "tags": [],
  "nodes": [
    {
      "id": "56364f47-02a4-4c56-9f09-5f253ed00859",
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        -1380,
        220
      ],
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "credentials": {
        "openRouterApi": {
          "id": "QqgKARn52qQiKICN",
          "name": "OpenRouter account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "02616056-a3a2-4d34-b812-c06b3314733b",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        -1300,
        80
      ],
      "parameters": {
        "autoFix": true,
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"type\": {\n      \"type\": \"string\",\n      \"enum\": [\"university\", \"corporation\", \"government\", \"NGO\", \"other\"]\n    },\n    \"environmental_policy\": { \"type\": \"string\" },\n    \"carbon_emissions\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"latest_report\": { \"type\": \"string\", \"format\": \"uri\" },\n        \"emission_details\": { \"type\": \"string\" }\n      },\n      \"required\": [\"latest_report\", \"emission_details\"]\n    },\n    \"animal_welfare_policy\": { \"type\": \"string\" },\n    \"vegan_options\": { \"type\": [\"string\", \"null\"] },\n    \"certifications\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"ratings_or_reviews\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"CDP\": { \"type\": \"string\" },\n        \"MSCI\": { \"type\": \"string\" },\n        \"Other NGOs\": { \"type\": \"string\" }\n      },\n      \"required\": [\"CDP\", \"MSCI\", \"Other NGOs\"]\n    },\n    \"scores\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"environmental_impact\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"percentage\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 100 }\n          },\n          \"required\": [\"percentage\"]\n        },\n        \"animal_welfare\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"percentage\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 100 }\n          },\n          \"required\": [\"percentage\"]\n        },\n        \"vegan_accommodation\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"percentage\": {\n              \"anyOf\": [\n                { \"type\": \"number\", \"minimum\": 0, \"maximum\": 100 },\n                { \"type\": \"string\", \"enum\": [\"NA\"] }\n              ]\n            }\n          },\n          \"required\": [\"percentage\"]\n        }\n      },\n      \"required\": [\"environmental_impact\", \"animal_welfare\", \"vegan_accommodation\"]\n    },\n    \"overall_percentile\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"total_score\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 100 }\n      },\n      \"required\": [\"total_score\"]\n    },\n    \"overall_grade\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"grade\": {\n          \"type\": \"string\",\n          \"enum\": [\"A+\", \"A\", \"B+\", \"B\", \"C+\", \"C\", \"D\", \"NA\"]\n        }\n      },\n      \"required\": [\"grade\"]\n    },\n    \"sources\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\", \"format\": \"uri\" }\n    },\n    \"overall_assessment\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"environmental\": { \"type\": \"string\" },\n        \"animal_welfare\": { \"type\": \"string\" },\n        \"vegan\": { \"type\": \"string\" }\n      },\n      \"required\": [\"environmental\", \"animal_welfare\", \"vegan\"]\n    }\n  },\n  \"required\": [\n    \"name\",\n    \"type\",\n    \"environmental_policy\",\n    \"carbon_emissions\",\n    \"animal_welfare_policy\",\n    \"vegan_options\",\n    \"certifications\",\n    \"ratings_or_reviews\",\n    \"scores\",\n    \"overall_percentile\",\n    \"overall_grade\",\n    \"sources\",\n    \"overall_assessment\"\n  ]\n}"
      },
      "typeVersion": 1.3
    },
    {
      "id": "c8f9ab58-b3f8-41a4-99d1-02814844b641",
      "name": "Trigger Research Agent",
      "type": "n8n-nodes-base.executeWorkflow",
      "position": [
        -1620,
        106.25
      ],
      "parameters": {
        "options": {},
        "workflowId": {
          "__rl": true,
          "mode": "list",
          "value": "k053fXGjIF7dUIQZ",
          "cachedResultName": "‚ôªÔ∏è üß© üìö General Research Agent"
        },
        "workflowInputs": {
          "value": {
            "chatInput": "=# Comprehensive Environmental and Animal Welfare Assessment\n\nYou are a research analyst specializing in sustainability and ethical practices evaluation. Conduct a thorough assessment of **{{ $json.companyName }}** focusing on environmental impact and animal welfare policies.\n\n## Research Guidelines\n\n**Priority Sources (in order):**\n1. Official company/institution sustainability reports and policies\n2. Third-party certifications and ratings (CDP, MSCI ESG, B-Corp, etc.)\n3. Regulatory filings (10-K forms, CSR reports)\n4. Peer-reviewed studies and academic research\n5. Reputable NGO evaluations (PETA, Greenpeace, WWF assessments)\n6. Industry benchmarking reports\n7. Recent news from established financial/environmental media\n\n**Research Methodology:**\n- Search for information from the last 2-3 years to ensure currency\n- Cross-reference multiple sources to verify claims\n- Look for quantitative data and specific metrics where possible\n- Identify any contradictory information and note discrepancies\n- Check for greenwashing indicators vs. substantive action\n\n## Information to Gather\n\n### Organizational Profile\n- Full legal name and primary classification (university, corporation, government entity, NGO, or other)\n- Industry sector and primary business activities\n- Size/scale indicators (revenue, employees, student body, etc.)\n\n### Environmental Assessment\n**Policy Framework:**\n- Published environmental/sustainability policies and commitments\n- Climate targets (net-zero commitments, science-based targets)\n- Environmental management systems (ISO 14001, etc.)\n\n**Carbon Footprint & Emissions:**\n- Latest greenhouse gas emissions data (Scope 1, 2, 3 if available)\n- Carbon reduction initiatives and progress against targets\n- Link to most recent sustainability/environmental report\n- Renewable energy usage and commitments\n\n**Additional Environmental Factors:**\n- Water usage and conservation efforts\n- Waste management and circular economy initiatives\n- Biodiversity and ecosystem impact policies\n- Supply chain environmental standards\n\n### Animal Welfare Evaluation\n**Policy Assessment:**\n- Formal animal welfare policies and standards\n- Laboratory animal use policies (if applicable)\n- Food sourcing and procurement standards\n- Third-party animal welfare certifications\n\n**Implementation Evidence:**\n- Concrete actions taken to improve animal welfare\n- Partnerships with animal welfare organizations\n- Research alternatives to animal testing (if relevant)\n\n### Vegan/Plant-Based Accommodation\n- Availability and quality of vegan/plant-based options\n- Food service policies and supplier requirements\n- Institutional support for plant-based initiatives\n- Staff/student dietary accommodation policies\n\n### Certifications and External Recognition\n- B-Corporation certification\n- LEED building certifications\n- Fair Trade, organic, or humane certifications\n- Industry-specific sustainability awards\n- Academic sustainability rankings (if applicable)\n\n### Third-Party Ratings and Scores\n- CDP (Carbon Disclosure Project) climate score\n- MSCI ESG rating and components\n- Sustainalytics ESG Risk Rating\n- Other relevant NGO scorecards or rankings\n\n## Analysis Framework\n\n**Scoring Methodology:**\nProvide percentage scores (0-100) for each category based on:\n- **Environmental Impact (0-100%):** Policy comprehensiveness, target ambition, progress transparency, third-party validation\n- **Animal Welfare (0-100%):** Policy existence and strength, implementation evidence, third-party certifications, industry leadership\n- **Vegan Accommodation (0-100% or \"NA\"):** Availability, quality, institutional support, accessibility\n\n**Overall Assessment:**\n- Calculate weighted total score considering all three categories\n- Assign letter grade (A+ to D, or NA if insufficient data)\n- Provide narrative assessment for each category explaining strengths, weaknesses, and notable practices\n\n## Output Requirements\n\nPresent findings in natural language covering:\n\n1. **Organization overview** with classification and context\n2. **Environmental policy summary** with key commitments and initiatives\n3. **Carbon emissions data** including latest figures and reduction efforts with source links\n4. **Animal welfare policies** and implementation practices\n5. **Vegan accommodation** details and institutional support\n6. **Certifications list** with relevant third-party validations\n7. **External ratings** from CDP, MSCI, and other recognized evaluators\n8. **Quantitative scores** with methodology explanation\n9. **Overall grade and percentile** with justification\n10. **Comprehensive source list** with direct links to reports and data\n11. **Detailed assessment** providing nuanced evaluation of environmental, animal welfare, and vegan practices including industry context and peer comparisons\n\n## Quality Standards\n\n- Cite all sources with direct URLs when possible\n- Distinguish between company claims and third-party verification\n- Note data limitations, gaps, or potential biases\n- Provide industry context and peer benchmarking where relevant\n- Flag any potentially outdated information\n- Acknowledge areas where insufficient data prevents assessment",
            "sessionId": "={{ (Math.random().toString(36).substring(2) + Date.now().toString(36)) }}"
          },
          "schema": [
            {
              "id": "chatInput",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "chatInput",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "sessionId",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "sessionId",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "f5f6363a-3691-403b-a026-541d625e3f8e",
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        -1840,
        106.25
      ],
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "companyName"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "6c922c9d-7dbd-4f6e-bc43-6b9c46714cd2",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        -960,
        140
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "dd5cbb58-9ab2-4089-852c-d50b5898159c",
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "position": [
        -780,
        140
      ],
      "parameters": {
        "options": {},
        "aggregate": "aggregateAllItemData"
      },
      "typeVersion": 1
    },
    {
      "id": "f20d64d2-07ae-41a7-8ce1-b28ea70ff9a6",
      "name": "Return Structured Analysis",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        -1380,
        -140
      ],
      "parameters": {
        "text": "={{ $json.output }}",
        "batching": {},
        "messages": {
          "messageValues": [
            {
              "message": "# Comprehensive Animal Welfare and Sustainability Analysis\n\nYou are a specialized research analyst with expertise in corporate sustainability, environmental impact assessment, and animal welfare evaluation. Your task is to conduct a thorough investigation of a given organization's practices and policies, synthesizing information from multiple authoritative sources to provide an evidence-based assessment.\n\n## Research Methodology\n\n**Source Prioritization (use in this order):**\n1. **Primary Official Sources**: Company sustainability reports, annual reports, ESG disclosures, policy documents\n2. **Regulatory Filings**: SEC 10-K forms, CDP submissions, GRI reports, SASB disclosures\n3. **Third-Party Certifications**: B-Corp, LEED, ISO standards, industry-specific certifications\n4. **Independent Ratings**: CDP Climate Scores, MSCI ESG ratings, Sustainalytics, Bloomberg ESG\n5. **NGO Evaluations**: PETA ratings, Greenpeace scorecards, WWF assessments, industry watchdog reports\n6. **Academic Sources**: Peer-reviewed research, university sustainability rankings, scholarly assessments\n7. **Credible Media**: Financial press (Bloomberg, Reuters), specialized sustainability publications, investigative journalism\n\n**Research Standards:**\n- Prioritize data from the last 24 months for maximum relevance\n- Cross-verify claims across at least 2-3 independent sources\n- Distinguish between aspirational commitments and demonstrated results\n- Look for quantitative metrics and progress tracking\n- Identify potential greenwashing by comparing marketing claims to actual performance\n- Note any controversies, lawsuits, or NGO criticisms\n- Check for industry context and peer benchmarking data\n\n## Data Collection Framework\n\n### Organizational Classification\nDetermine the primary category: university, corporation, government agency, NGO, or other. Consider hybrid organizations and note if classification is complex.\n\n### Environmental Assessment\n**Policy Analysis:**\n- Comprehensive climate commitments (net-zero targets, science-based targets)\n- Environmental management systems and certifications\n- Renewable energy adoption and targets\n- Circular economy and waste reduction initiatives\n- Water stewardship and biodiversity conservation efforts\n- Supply chain environmental standards\n\n**Carbon Footprint Evaluation:**\n- Most recent GHG emissions data (Scope 1, 2, and 3 when available)\n- Year-over-year emission trends and reduction achievements\n- Carbon intensity metrics relative to revenue/activity\n- Renewable energy percentage and expansion plans\n- Carbon offset strategies and quality of offset projects\n- Link to the most comprehensive and recent emissions report\n\n### Animal Welfare Investigation\n**Policy Framework:**\n- Formal animal welfare policies and ethical standards\n- Laboratory animal use guidelines and 3Rs implementation (Replace, Reduce, Refine)\n- Food procurement standards for animal products\n- Supply chain animal welfare requirements and auditing\n- Partnerships with animal welfare organizations\n- Employee/student education on animal welfare issues\n\n**Implementation Evidence:**\n- Third-party animal welfare certifications in supply chain\n- Concrete actions taken to improve animal treatment\n- Investment in animal testing alternatives\n- Transparency in animal welfare reporting\n- Response to animal welfare controversies or campaigns\n\n### Vegan Accommodation Analysis\n**Food Service Evaluation:**\n- Availability, variety, and nutritional quality of plant-based options\n- Proportion of menu items that are vegan/vegetarian\n- Labeling clarity and allergen information\n- Pricing parity with animal-based options\n- Staff training on vegan options and dietary restrictions\n- Institutional policies supporting plant-based eating\n- Special events and vegan food initiatives\n\n### Certification and Recognition Audit\nIdentify and verify all relevant certifications:\n- Environmental: ISO 14001, LEED, Energy Star, Carbon Trust\n- Animal welfare: Certified Humane, Animal Welfare Approved, SPCA Certified\n- Food service: Plant Based Foods Association, Vegan Society certification\n- General sustainability: B-Corp, Fair Trade, Rainforest Alliance\n- Industry-specific: STARS (universities), GRESB (real estate), etc.\n\n### Third-Party Rating Analysis\n**Major Rating Systems:**\n- **CDP Climate Change**: Score (A, A-, B, etc.) and key performance areas\n- **MSCI ESG Rating**: Overall rating and component scores for environmental and social factors\n- **Sustainalytics ESG Risk Rating**: Risk level and risk management assessment\n- **Other Specialized Assessments**: Industry rankings, NGO scorecards, peer benchmarks\n\n## Scoring Methodology\n\n**Environmental Impact Score (0-100%):**\n- Policy comprehensiveness and ambition (25%)\n- Measurable progress against targets (30%)\n- Third-party validation and transparency (20%)\n- Industry leadership and innovation (15%)\n- Supply chain environmental integration (10%)\n\n**Animal Welfare Score (0-100%):**\n- Policy existence and strength (30%)\n- Implementation evidence and verification (25%)\n- Third-party certifications and audits (20%)\n- Transparency and reporting quality (15%)\n- Response to stakeholder concerns (10%)\n\n**Vegan Accommodation Score (0-100% or \"NA\" if not applicable):**\n- Availability and variety of options (40%)\n- Institutional support and policies (25%)\n- Quality and nutritional adequacy (20%)\n- Accessibility and pricing (15%)\n\n**Overall Scoring:**\n- Calculate weighted average: Environmental (40%), Animal Welfare (35%), Vegan Accommodation (25%)\n- Adjust for industry context and organizational type\n- Grade assignment: A+ (95-100%), A (85-94%), B+ (75-84%), B (65-74%), C+ (55-64%), C (45-54%), D (below 45%)\n\n## Output Requirements\n\nStructure your response exactly as shown in the example schema, ensuring:\n\n1. **Accuracy**: All data points must be verifiable through provided sources\n2. **Recency**: Prioritize the most current information available\n3. **Specificity**: Include concrete metrics, dates, and quantifiable achievements\n4. **Balance**: Present both strengths and areas for improvement\n5. **Context**: Consider industry standards and peer performance\n6. **Source Quality**: Ensure all URLs are functional and lead directly to relevant information\n\n**Critical Quality Checks:**\n- Verify all URLs are accessible and contain referenced information\n- Ensure numerical scores are justified by evidence presented\n- Cross-check claims against multiple sources when possible\n- Note any significant data gaps or limitations in assessment\n- Flag potential conflicts of interest in sources\n- Distinguish between company claims and independent verification\n\n**Assessment Narrative Guidelines:**\n- Environmental: Focus on measurable impact, policy ambition, and implementation effectiveness\n- Animal Welfare: Evaluate policy comprehensiveness, implementation evidence, and stakeholder responsiveness  \n- Vegan: Assess practical accessibility, institutional support, and quality of offerings\n\nRemember to maintain objectivity while providing actionable insights that help stakeholders understand the organization's true performance in these critical areas."
            }
          ]
        },
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 1.7
    },
    {
      "id": "eb75ff84-bc0a-42e1-bc49-d570a735ab8b",
      "name": "Return HTML Report",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        -1360,
        400
      ],
      "parameters": {
        "text": "={{ $('Trigger Research Agent').item.json.output }}",
        "batching": {},
        "messages": {
          "messageValues": [
            {
              "message": "=You are generating an **HTML-formatted summary report** of an institution's environmental and animal welfare practices based on extracted data.\n\n**Instructions:**\n\n* Output should be in **HTML** format suitable for email or web display.\n* Keep the tone clear, professional, and concise.\n* Use **HTML tags for structure and emphasis** (e.g. `<h1>`, `<h2>`, `<p>`, `<ul>`, `<li>`, `<strong>`, `<em>`).\n* Include the following structured sections:\n\n  * Greeting and introductory line\n  * **Animal Welfare** section\n\n    * Initiative\n    * Performance\n    * Criticisms (bulleted)\n  * **Environmental Practices** section\n\n    * Goal\n    * Initiatives (bulleted)\n    * Key concerns\n  * **Scores** section\n\n    * Animal Welfare Score\n    * Environmental Sustainability Score\n  * Closing line and sign-off\n\n**Output format example:**\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>EcoImpact Report for [Company Name]</title>\n  </head>\n  <body style=\"font-family: Arial, sans-serif; line-height: 1.6;\">\n    <h1>EcoImpact Report: [Company Name]</h1>\n    \n    <p>Hi,</p>\n    <p>Here‚Äôs a summary of <strong>[Company Name]</strong>‚Äôs environmental and animal welfare practices:</p>\n\n    <h2>Animal Welfare</h2>\n    <p><strong>Initiative:</strong> [initiative name]</p>\n    <p><strong>Performance:</strong> [summary]</p>\n    <p><strong>Criticisms:</strong></p>\n    <ul>\n      <li>[criticism 1]</li>\n      <li>[criticism 2]</li>\n    </ul>\n\n    <h2>Environmental Practices</h2>\n    <p><strong>Goal:</strong> [goal]</p>\n    <p><strong>Initiatives:</strong></p>\n    <ul>\n      <li>[initiative 1]</li>\n      <li>[initiative 2]</li>\n    </ul>\n    <p><strong>Concerns:</strong> [key concern]</p>\n\n    <h2>Scores</h2>\n    <p><strong>Animal Welfare:</strong> [x]/10</p>\n    <p><strong>Environmental Sustainability:</strong> [x]/10</p>\n\n    <p>Best regards,<br>EcoImpact Team</p>\n  </body>\n</html>\n```\n\nMake sure all placeholder values (e.g. `[Company Name]`, `[initiative name]`, `[x]/10`) are dynamically populated from the extracted data.\n\nBegin your response directly with <!DOCTYPE html>, do not give any preamble"
            }
          ]
        },
        "promptType": "define"
      },
      "typeVersion": 1.7
    },
    {
      "id": "0330b9ce-124c-44ea-bea1-9117341e9988",
      "name": "Set Output",
      "type": "n8n-nodes-base.set",
      "position": [
        -600,
        140
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "714e81ab-7d1f-421a-a26a-3f43424b24fc",
              "name": "Company Name",
              "type": "string",
              "value": "={{ $json.data[0].output.name }}"
            },
            {
              "id": "8073a2ae-0fec-4d3c-9b10-e15a836f766f",
              "name": "Company Type",
              "type": "string",
              "value": "={{ $json.data[0].output.type }}"
            },
            {
              "id": "059ccde6-e895-487b-b27e-3b5e6964bbf4",
              "name": "Environmental Policy",
              "type": "string",
              "value": "={{ $json.data[0].output.environmental_policy }}"
            },
            {
              "id": "6a93482e-9041-44d6-8ed0-2a66dc3b721b",
              "name": "Carbon Emissisons Report Link",
              "type": "string",
              "value": "={{ $json.data[0].output.carbon_emissions.latest_report }}"
            },
            {
              "id": "5fe4da77-029f-43ac-af26-810579be1cb3",
              "name": "Carbon Emissions Details",
              "type": "string",
              "value": "={{ $json.data[0].output.carbon_emissions.emission_details }}"
            },
            {
              "id": "b0ccbe9b-66ad-4264-9cae-362640ae9255",
              "name": "Animal Welfare Policy",
              "type": "string",
              "value": "={{ $json.data[0].output.animal_welfare_policy }}"
            },
            {
              "id": "4b84e8cc-ec90-4ad8-a4d9-b3f76b645b9b",
              "name": "Availability of Vegan Options",
              "type": "string",
              "value": "={{ $json.data[0].output.vegan_options }}"
            },
            {
              "id": "537ae6d2-69d1-4015-a5ad-cdf835ef7086",
              "name": "Certifications",
              "type": "array",
              "value": "={{ $json.data[0].output.certifications }}"
            },
            {
              "id": "7342f592-081f-4d66-a310-f8f1f4375810",
              "name": "Ratings or Review",
              "type": "object",
              "value": "={{ $json.data[0].output.ratings_or_reviews }}"
            },
            {
              "id": "45e0983c-c7cc-4630-adc2-7d18f50a3b70",
              "name": "Scores",
              "type": "object",
              "value": "={{ $json.data[0].output.scores }}"
            },
            {
              "id": "ae2b161a-d679-4389-a7f7-faa2e64dcdec",
              "name": "Overall Percentile",
              "type": "number",
              "value": "={{ $json.data[0].output.overall_percentile.total_score }}"
            },
            {
              "id": "f88c2150-b03a-44fc-865c-3df3c2133b16",
              "name": "Overall Grade",
              "type": "string",
              "value": "={{ $json.data[0].output.overall_grade.grade }}"
            },
            {
              "id": "5f80950e-1798-45aa-9985-c3706b945a97",
              "name": "Sources",
              "type": "array",
              "value": "={{ $json.data[0].output.sources }}"
            },
            {
              "id": "e1f9bd48-3e65-47f4-a8ee-aa3ffe5378c3",
              "name": "Overall Environmental Assessment",
              "type": "string",
              "value": "={{ $json.data[0].output.overall_assessment.environmental }}"
            },
            {
              "id": "cd0febcb-cb5e-480d-9cc1-fddf97438702",
              "name": "Overall Animal Welfare Assessment",
              "type": "string",
              "value": "={{ $json.data[0].output.overall_assessment.animal_welfare }}"
            },
            {
              "id": "c2b30b03-6a8a-46a8-aa5f-553ab84c2b70",
              "name": "Overall Vegan-Friendliness Assessment",
              "type": "string",
              "value": "={{ $json.data[0].output.overall_assessment.vegan }}"
            },
            {
              "id": "7e589d43-5a73-42db-aedd-4b7be0fb6a72",
              "name": "HTML Report",
              "type": "string",
              "value": "={{ $json.data[1].text }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "1b33808e-39c0-4deb-ba5a-f1e20a00bbaf",
      "name": "OpenRouter Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        -1200,
        220
      ],
      "parameters": {
        "model": "anthropic/claude-sonnet-4",
        "options": {}
      },
      "credentials": {
        "openRouterApi": {
          "id": "QqgKARn52qQiKICN",
          "name": "OpenRouter account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "cdedec8e-1fa1-4d96-a6a9-49b2be5c3362",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1880,
        -360
      ],
      "parameters": {
        "width": 360,
        "height": 380,
        "content": "## **Company Sustainability Assessment Workflow**\n- **Purpose**: Automated end-to-end analysis of company environmental and animal welfare practices\n- **Input**: Company name (string)\n- **Process**: Multi-source research ‚Üí Parallel analysis ‚Üí Combined output\n- **Final Output**: JSON structured data + HTML report with scores, grades, and comprehensive assessment\n- **Use Cases**: ESG screening, investment decisions, consumer guidance, compliance reporting\n- **Validates**: Non-empty company name input\n- **Passes to**: Research Agent"
      },
      "typeVersion": 1
    },
    {
      "id": "5718d343-4671-4e30-a441-110c431a39dc",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1800,
        320
      ],
      "parameters": {
        "width": 280,
        "height": 420,
        "content": "## üîç Research Agent\n**Multi-Source Data Collection Hub**\n- **PREREQUISITE**: Download and install subworkflow from: \n  https://creators.n8n.io/workflows/5588\n- **Setup**: Save as workflow in your n8n instance, then link this node to that flow\n- **Function**: Executes comprehensive research using specialized tools:\n  - OpenPaws database for animal welfare data\n  - Web search for sustainability reports\n  - Web scraping for policy documents\n  - Social media monitoring for recent developments"
      },
      "typeVersion": 1
    },
    {
      "id": "70268511-761f-4b71-851c-3d72852c91c4",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1400,
        -460
      ],
      "parameters": {
        "width": 300,
        "height": 280,
        "content": "## üìä LLM Chain 1: Structured Scoring\n**JSON Analysis Engine**\n- Uses: Schema-based prompt\n- Processes: Research data ‚Üí structured scores\n- Generates: JSON with percentages, grades, ratings\n- Output: Standardized assessment object"
      },
      "typeVersion": 1
    },
    {
      "id": "b6e27b2c-4284-43ed-a8ce-5b0ef81a573c",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1380,
        600
      ],
      "parameters": {
        "width": 300,
        "height": 260,
        "content": "## üìÑ LLM Chain 2: HTML Report\n**Report Generation Engine**\n- Uses: Report formatting prompt\n- Processes: Research data ‚Üí narrative analysis\n- Generates: Formatted HTML report with insights\n- Output: Human-readable assessment document"
      },
      "typeVersion": 1
    },
    {
      "id": "ca9473e0-ec30-4933-84c6-4198ce719041",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -900,
        -140
      ],
      "parameters": {
        "width": 360,
        "height": 200,
        "content": "## üîó Merge & Aggregate\n**Final Output Combiner**\n- Receives: JSON scores + HTML report\n- Combines: Structured data with narrative\n- Validates: Data consistency between outputs\n- Outputs: Complete assessment package\n- Format: Combined JSON + embedded HTML"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "d48262e1-1bae-4c40-ae78-892c9ba72b67",
  "connections": {
    "Merge": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Set Output",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Return HTML Report": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Return Structured Analysis",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Return HTML Report",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Trigger Research Agent": {
      "main": [
        [
          {
            "node": "Return Structured Analysis",
            "type": "main",
            "index": 0
          },
          {
            "node": "Return HTML Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Return Structured Analysis",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Return Structured Analysis": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Trigger Research Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}