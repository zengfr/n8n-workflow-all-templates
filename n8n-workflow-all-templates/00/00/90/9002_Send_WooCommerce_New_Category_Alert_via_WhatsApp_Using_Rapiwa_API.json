{
  "id": "SKKy045wmeQJJw0r",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Send WooCommerce New Category Alert via WhatsApp Using Rapiwa API",
    "wechat": "youandme10086",
    "id": 9002,
    "update_time": "2025-11-10"
  },
  "name": "Send WooCommerce New Category Alert via WhatsApp Using Rapiwa API",
  "tags": [],
  "nodes": [
    {
      "id": "a541b71e-e2c2-4996-ac24-254cac3b1520",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        784,
        0
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3
    },
    {
      "id": "b8aa1d94-1cde-49cd-bcfa-dd2888491155",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -128,
        0
      ],
      "webhookId": "1c217a0f-503f-49a4-b0c5-1aa431616177",
      "parameters": {
        "path": "1c217a0f-503f-49a4-b0c5-1aa431616177",
        "options": {},
        "httpMethod": "POST"
      },
      "typeVersion": 2
    },
    {
      "id": "08e7182d-9173-44a1-8619-e1132003bfdb",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        1360,
        64
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "3ab8725a-9268-45fd-b91c-0e055fe6fa7c",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              },
              "leftValue": "={{ $json.data.exists }}",
              "rightValue": "=\"true\""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "2c2889d2-31a2-43a0-9ddd-bc0245fb65cb",
      "name": "unverified append row in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1600,
        192
      ],
      "parameters": {
        "columns": {
          "value": {
            "email": "={{ $('Clean Number').item.json.email }}",
            "name ": "={{ $('Clean Number').item.json.name }}",
            "number": "={{ $('Clean Number').item.json.number }}",
            "status": "unverified",
            "address": "={{ $('Clean Number').item.json.address }}",
            "catagoris": "={{ $('Format Webhook Response Data').item.json.name }}",
            "description": "={{ $('Format Webhook Response Data').item.json.description }}"
          },
          "schema": [
            {
              "id": "name ",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "name ",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "number",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "number",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "email",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "email",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "address",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "catagoris",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "catagoris",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "description",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "append",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA/edit?usp=drivesdk",
          "cachedResultName": "Sales - Send product catalog"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "gFH3Wjq6yYqSEAei",
          "name": "Google Sheets"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "c13d178c-44d1-43b9-abb4-b2ef2fd4339c",
      "name": "verified append row in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1824,
        -112
      ],
      "parameters": {
        "columns": {
          "value": {
            "email": "={{ $('Clean Number').item.json.email }}",
            "name ": "={{ $('Clean Number').item.json.name }}",
            "number": "={{ $('Check valid whatsapp number Using Rapiwa').item.json.data.number }}",
            "status": "verified",
            "address": "={{ $('Clean Number').item.json.address }}",
            "catagoris": "={{ $('Format Webhook Response Data').item.json.name }}",
            "description": "={{ $('Format Webhook Response Data').item.json.description }}"
          },
          "schema": [
            {
              "id": "name ",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "name ",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "number",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "number",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "email",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "email",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "address",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "catagoris",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "catagoris",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "description",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "append",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1yTxkAM1kq2udndvG5M2jUuQCY8SkvoLgrspQ100LvKs/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA/edit?usp=drivesdk",
          "cachedResultName": "Sales - Send product catalog"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "gFH3Wjq6yYqSEAei",
          "name": "Google Sheets"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "57be7f7a-83a3-4d90-8482-dde77c36af9c",
      "name": "Limit",
      "type": "n8n-nodes-base.limit",
      "position": [
        592,
        0
      ],
      "parameters": {
        "maxItems": 10
      },
      "typeVersion": 1
    },
    {
      "id": "ef0dd016-434e-4ebf-8702-3873296e9d15",
      "name": "Get many customers",
      "type": "n8n-nodes-base.wooCommerce",
      "position": [
        368,
        0
      ],
      "parameters": {
        "filters": {},
        "resource": "customer",
        "operation": "getAll",
        "returnAll": true
      },
      "credentials": {
        "wooCommerceApi": {
          "id": "BZ5Lp9IB4Phney4R",
          "name": "WooCommerce (get customer)"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "06ea3912-3b01-45c3-907b-68d40574f6c3",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1888,
        -624
      ],
      "parameters": {
        "color": 4,
        "width": 1568,
        "height": 4288,
        "content": "# Send WooCommerce New Category Alert via WhatsApp Using Rapiwa API\n\n# Overview\nThis n8n workflow sends a WhatsApp message to customers when a new WooCommerce product category is created. It checks customersâ€™ phone numbers with Rapiwa, sends the promotional message only to verified WhatsApp numbers, and logs results in Google Sheets.\n\n---\n\n## Features\n- Listens to **WooCommerce category creation** via **Webhook**\n- Fetches all **WooCommerce customers**\n- **Cleans and formats** phone numbers\n- **Validates WhatsApp numbers** using Rapiwa's verification API\n- Sends **promotional WhatsApp messages** to valid numbers\n- Logs verified and unverified contacts in separate **Google Sheet rows**\n- Includes **Wait node** to space out API calls and Google Sheet writes\n\n---\n\n## Requirements\n### Tools & Services\n- **A Google Sheet** formatted like this âž¤ [sample](https://docs.google.com/spreadsheets/d/1SbBOtdqaA9eUmgv2W4MXU0-TODjHix-IrmQmuapiSJA/edit?usp=sharing)  \n- Valid **Google Sheets OAuth2** credentials connected to n8n\n- **Rapiwa API account** with:\n - Your WhatsApp number connected and authorized in Rapiwa\n- A **WhatsApp Account** (Personal or Business) \n- Active **Rapiwa account** with a valid **Bearer YOUR_TOKEN_HERE**\n- Your **WhatsApp number** connected to Rapiwa\n  - Access to `verify-whatsapp` and `send-message` endpoints\n  - Valid **Bearer YOUR_TOKEN_HERE** (added in `httpBearerAuth` credentials)\n- **WooCommerce store** with REST API access\n- **Google Sheets** with two appendable sheets:\n  - One for `verified` users\n  - One for `unverified` users\n\n### n8n Credentials\n- **WooCommerce API Credentials**\n- **Rapiwa Bearer YOUR_TOKEN_HERE** (connected via HTTP Request nodes)\n- **Google Sheets OAuth2** credentials\n\n### Google Sheet Required Columns:\n- `name `\n- `number`\n- `email`\n- `address`\n- `catagoris`\n- `description`\n- `status` (either `verified` or `unverified`)\n\n> **Note:** Field `name ` contains a trailing space. Keep it as-is.\n\n---\n\n## Nodes Used in the Workflow\n- **Webhook**\n- **Code (for category & customer formatting)**\n- **WooCommerce: Get Customers**\n- **Limit (max 10 customers)**\n- **Split In Batches**\n- **Code: Cleane Number**\n- **HTTP Request: Verify WhatsApp Number (Rapiwa)**\n- **If: Number Exists**\n- **HTTP Request: Send WhatsApp Message (Rapiwa)**\n- **Google Sheets: Append Verified Row**\n- **Google Sheets: Append Unverified Row**\n- **Wait**\n\n---\n\n## How to Use This Workflow\n### 1. Trigger: New Category Created\n- **Node**: `Webhook`\n- **Method**: `POST`\n- **URL**:  \n  `https://n8.spagreen.net/webhook-test/1c217a0f-503f-49a4-b0c5-1aa431616177`\n- **Function**: WooCommerce sends payload when a new product category is created.\n\n### 2. Extract Category Info\n- **Node**: `Code`\n- **Function**: Parses category details like:\n  - `name`, `slug`, `description`, etc.\n\n### 3. Fetch WooCommerce Customers\n- **Node**: `Get many customers`\n- Retrieves all customers from your WooCommerce store.\n\n### 4. Limit & Split\n- **Node**: `Limit` â†’ Limits to 10 customers (for testing or batching)\n- **Node**: `Loop Over Items` â†’ Processes customers one at a time\n\n### 5. Clean Phone Numbers\n- **Node**: `Cleane Number`\n- Extracts phone number from customer billing info\n- Removes all non-numeric characters\n- Formats name and full address\n- Extracts email if available\n\n### 6. Verify WhatsApp Number\n- **Node**: `check valid whatsapp number`\n- Sends number to:  \n  `https://app.rapiwa.com/api/verify-whatsapp`\n- Checks if the number is active on WhatsApp\n\n### 7. Branch Based on Validity\n- **Node**: `If`\n- **Condition**: If `data.exists === true`, then verified\n\n### 8. Send WhatsApp Message (if verified)\n- **Node**: `Rapiwa Sender`\n- Sends a promotional WhatsApp message using:  \n  `https://app.rapiwa.com/api/send-message`\n\n#### Message Template:\n```\nHey [Name],\nWe just launched a new category: [Category Name]!\nExplore nowðŸ‘‰ https://rahim.spagreen.info/product-category/[slug]\nDonâ€™t miss it!\n\nCheers,\nTeam SpaGreen Creative\n```\n\n### Step 9: Log to Google Sheets\n- **Node**: `Google Sheets: Append Verified Row` â†’ Logs verified users\n- **Node**: `Google Sheets: Append Unverified Row` â†’ Logs unverified users\n- **Node**: `Wait` â†’ Adds delay to avoid API or Sheets rate limits\n\n---\n\n## Google Sheet Column Reference\n\n| name        | number        | email                        | address                                              | catagoris   | description                                                                                         | status     |\n|-------------|---------------|------------------------------|------------------------------------------------------|-------------|-------------------------------------------------------------------------------------------------|------------|\n| Abdul Mannan | 8801322827799 | contact@spagreen.net              |                                                      | Electronics | Shop top-brand Electronics with warranty and excellent customer support. Discover everything you need from audio devices to wearable tech. | unverified |\n| Abdul Mannan | 8801322827799 | contact@spagreen.net |                                                      | Electronics | Shop top-brand Electronics with warranty and excellent customer support. Discover everything you need from audio devices to wearable tech. | verified   |\n| Abdul Mannan  | 8801322827799 | contact@spagreen.net | mirpur dohs, h#1168 rd#10 av#10 mirpur dohs dhaka, dhaka, BD-13, BD                            | Electronics | Shop top-brand Electronics with warranty and excellent customer support. Discover everything you need from audio devices to wearable tech. | verified   |\n\n\n## Nodes Used in the Workflow\n- **Webhook**: Receives category creation event\n- **Code**: Parses category and customer data\n- **WooCommerce: Get many customers**\n- **Limit**: Restricts batch size (optional)\n- **Split In Batches**: Loops customers one by one\n- **Cleane Number**: Formats phone numbers and extracts details\n- **HTTP Request: Verify WhatsApp Number (Rapiwa)**\n- **If**: Checks if number is valid\n- **HTTP Request: Send WhatsApp Message (Rapiwa)**\n- **Google Sheets: Append Verified Row**\n- **Google Sheets: Append Unverified Row**\n- **Wait**: Adds spacing between actions\n\n---\n\n## Customization Ideas\n- Use WooCommerce customer metadata for more personalized messages\n- Modify the WhatsApp message template for different product categories\n- Create separate sheets for different campaigns\n- Extend logic to notify store admin on failed messages\n\n---\n\n## Notes & Warnings\n- Ensure your Rapiwa account has a valid, connected WhatsApp number\n- Google Sheets credentials must allow write access\n- Rate-limiting can cause errorsâ€”adjust the wait time accordingly\n- Avoid spamming customers by using opt-in lists only\n- Rapiwa is unofficial and may not guarantee 100% delivery rates\n\n## Useful Links\n- **Dashboard:** [https://app.rapiwa.com](https://app.rapiwa.com/login)\n- **Official Website:** [https://rapiwa.com](https://rapiwa.com/)\n- **Documentation:** [https://docs.rapiwa.com](https://docs.rapiwa.com/)\n\n## Support & Help\n- **WhatsApp**: [Chat on WhatsApp](https://wa.me/8801322827799)\n- **Discord**: [SpaGreen Community](https://discord.gg/SsCChWEP)\n- **Facebook Group**: [SpaGreen Support](https://www.facebook.com/groups/spagreenbd)\n- **Website**: [https://spagreen.net](https://spagreen.net)\n- **Developer Portfolio**: [Codecanyon SpaGreen](https://codecanyon.net/user/spagreen/portfolio)\n"
      },
      "typeVersion": 1
    },
    {
      "id": "f4e1ca03-818e-46a9-8638-ea516a43ee62",
      "name": "Format Webhook Response Data",
      "type": "n8n-nodes-base.code",
      "position": [
        80,
        0
      ],
      "parameters": {
        "jsCode": "const data = items[0].json.body;\n\nconst category = {\n  id: data.id,\n  name: data.name,\n  slug: data.slug,\n  description: data.description,\n  parent: data.parent,\n  display_type: data.args?.display_type,\n  thumbnail_id: data.args?.product_cat_thumbnail_id\n};\n\nreturn [\n  {\n    json: category\n  }\n];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "b4337fa3-2263-431c-bf80-13af7754dd24",
      "name": "Check valid whatsapp number Using Rapiwa",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1184,
        64
      ],
      "parameters": {
        "url": "=https://app.rapiwa.com/api/verify-whatsapp",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "authentication": "genericCredentialType",
        "bodyParameters": {
          "parameters": [
            {
              "name": "number",
              "value": "={{ $json.number }}"
            }
          ]
        },
        "genericAuthType": "httpBearerAuth"
      },
      "credentials": {
        "httpBearerAuth": {
          "id": "jnaHCyYia9OAFozh",
          "name": "Rapiwa Bearer YOUR_TOKEN_HERE"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "558447c8-a3e5-43b2-8e5a-dbb82041f7a1",
      "name": "Send Message Using Rapiwa",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1600,
        -112
      ],
      "parameters": {
        "url": "=https://app.rapiwa.com/api/send-message",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "authentication": "genericCredentialType",
        "bodyParameters": {
          "parameters": [
            {
              "name": "number",
              "value": "={{ $json.data.number }}"
            },
            {
              "name": "message_type",
              "value": "text"
            },
            {
              "name": "message",
              "value": "=Hey {{ $('Clean Number').item.json.name }},\n\nWe just launched a new category: *{{ $('Format Webhook Response Data').item.json.name }}*!  \nExplore nowðŸ‘‰ https://rahim.spagreen.info/product-category/{{ $('Format Webhook Response Data').item.json.slug }}\nDonâ€™t miss it!\n\nCheers,  \nTeam SpaGreen Creative"
            }
          ]
        },
        "genericAuthType": "httpBearerAuth"
      },
      "credentials": {
        "httpBearerAuth": {
          "id": "jnaHCyYia9OAFozh",
          "name": "Rapiwa Bearer YOUR_TOKEN_HERE"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "1d88ede8-16a5-463a-87c6-b9004a4249ed",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        1824,
        192
      ],
      "webhookId": "6c474e54-eb3c-4fcd-b455-948322cd0121",
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "2e148087-cfa0-48a5-a290-7ea909e4c84e",
      "name": "Clean Number",
      "type": "n8n-nodes-base.code",
      "position": [
        1008,
        64
      ],
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst updatedItems = items.map((item) => {\n  const billing = item?.json?.billing || {};\n\n  // number extract & clean\n  const waNo = billing.phone;\n  const waNoStr = typeof waNo === 'string' ? waNo : (waNo !== undefined && waNo !== null ? String(waNo) : \"\");\n  const cleanedNumber = waNoStr.replace(/\\D/g, \"\");\n\n  // Email extract\n  const email = billing.email || item?.json?.email || \"\";\n\n  // Full address generate\n  const addressParts = [\n    billing.address_1,\n    billing.address_2,\n    billing.city,\n    billing.state,\n    billing.postcode,\n    billing.country\n  ].filter(Boolean); // remove empty values\n  const fullAddress = addressParts.join(', ');\n\n  // Output format\n  return {\n    json: {\n      number: cleanedNumber,\n      email: email,\n      address: fullAddress,\n      name: `${billing.first_name || ''} ${billing.last_name || ''}`.trim()\n    }\n  };\n});\n\nreturn updatedItems;\n"
      },
      "typeVersion": 2
    },
    {
      "id": "836df614-c61d-4ca8-8b9f-f5029fbbf33f",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        -336
      ],
      "parameters": {
        "color": 2,
        "width": 528,
        "height": 736,
        "content": "## Webhook\n**Node Name:** Webhook  \n**Function:** Listens for incoming HTTP POST requests â€” specifically, product category creation data from WooCommerce. Triggers the workflow.\n\n## & Format Webhook Response Data\n**Node Name:** Format Webhook Response Data  \n**Function:** Parses and reformats the incoming category data into a structured JSON format for later use (e.g., extracting name, slug, description).\n"
      },
      "typeVersion": 1
    },
    {
      "id": "a083b897-58f2-447c-81c2-3e7d4b24e9ca",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        304,
        -336
      ],
      "parameters": {
        "color": 6,
        "height": 736,
        "content": "## Get many customers\n**Node Name:** Get many customers  \n**Function:** Fetches all customer data from WooCommerce using the WooCommerce API.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "5f9330bf-928d-4b65-bb80-2a0d679c3356",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        560,
        -336
      ],
      "parameters": {
        "color": 4,
        "width": 384,
        "height": 736,
        "content": "## Limit\n**Node Name:** Limit  \n**Function:** Limits the number of customers processed to 10 (likely for performance or testing purposes).\n\n## & Loop Over Items\n**Node Name:** Loop Over Items  \n**Function:** Iterates over the customer list in batches (controlled loop) for further processing.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "5f6e6d5f-60ee-4bbd-91f9-46a6ce25c2ff",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        -624
      ],
      "parameters": {
        "color": 5,
        "width": 544,
        "height": 1024,
        "content": "## Clean Number\n**Node Name:** Clean Number  \n**Function:** Cleans up customer phone numbers by removing non-digit characters and prepares name, email, and address from billing info.\n\n## & Check valid WhatsApp number Using Rapiwa\n**Node Name:** Check valid WhatsApp number Using Rapiwa  \n**Function:** Sends a POST request to the Rapiwa API to check if the cleaned number is a valid WhatsApp number.\n\n## & If\n**Node Name:** If  \n**Function:** Evaluates the `exists` field in the API response to determine if the number is a valid WhatsApp number (true) or not (false).\n"
      },
      "typeVersion": 1
    },
    {
      "id": "e7d53496-d99d-448f-9470-50788743d86e",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        -624
      ],
      "parameters": {
        "color": 4,
        "width": 720,
        "height": 1024,
        "content": "## Send Message Using Rapiwa\n**Node Name:** Send Message Using Rapiwa  \n**Function:** If the number is valid, sends a WhatsApp message to the user with the new category info using the Rapiwa API.\n\n## & verified append row in sheet\n**Node Name:** verified append row in sheet  \n**Function:** Appends the verified user's data (with status \"verified\") to a specific Google Sheet.\n\n## & unverified append row in sheet\n**Node Name:** unverified append row in sheet  \n**Function:** Appends the unverified user's data (with status \"unverified\") to the same Google Sheet.\n\n## & Wait\n**Node Name:** Wait  \n**Function:** Introduces a pause before looping back to the next batch â€” helps avoid API throttling or limits.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "0c112f0e-e944-43d9-87cb-8e1419c77d64",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        -624
      ],
      "parameters": {
        "color": 3,
        "width": 1184,
        "height": 272,
        "content": "## Summary Flow:\n\n1. Webhook receives category data  \n2. Formats category data  \n3. Fetches WooCommerce customers  \n4. Cleans their info  \n5. Verifies WhatsApp number  \n6. Sends message if valid  \n7. Logs each user to Google Sheets (verified/unverified)  \n8. Waits and loops to the next customer\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "3d8b9b9f-6741-459d-af2b-e6160d2f6eab",
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Send Message Using Rapiwa",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "unverified append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Format Webhook Response Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Clean Number": {
      "main": [
        [
          {
            "node": "Check valid whatsapp number Using Rapiwa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Clean Number",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many customers": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Message Using Rapiwa": {
      "main": [
        [
          {
            "node": "verified append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Webhook Response Data": {
      "main": [
        [
          {
            "node": "Get many customers",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "verified append row in sheet": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "unverified append row in sheet": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check valid whatsapp number Using Rapiwa": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}