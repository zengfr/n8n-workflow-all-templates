{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "ðŸš€ Automated Stripe Payment Recovery: Track Failures & Follow-Up Emails",
    "wechat": "youandme10086",
    "id": 5702,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "497e2fda-6782-4bc0-b594-11d545667b43",
      "name": "Detect Failed Payments",
      "type": "n8n-nodes-base.stripeTrigger",
      "position": [
        -2500,
        160
      ],
      "webhookId": "c23dd369-5c11-4166-ad55-0af41858c0d6",
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "7e739ab1-372e-45a1-bf66-69376d8615b0",
      "name": "Extract User and Payment Info",
      "type": "n8n-nodes-base.set",
      "position": [
        -2280,
        160
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "1b2195ec-be80-401d-a504-498266bfb9a0",
      "name": "Append or update row in sheet",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -1840,
        160
      ],
      "parameters": {},
      "typeVersion": 4.6
    },
    {
      "id": "7edfaea7-a11f-4335-b17c-f7707049bd2c",
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "position": [
        -2060,
        160
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "e6498365-7e61-4d17-81e6-435776bdd96f",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -1000,
        100
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "572cc980-ab25-4a65-a63b-21633c4b28c3",
      "name": "Update Email Count",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        0,
        0
      ],
      "parameters": {},
      "typeVersion": 4.6
    },
    {
      "id": "740421e1-2a63-440a-aba2-f6848fa3ab25",
      "name": "Get Payment Failure Leads",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -780,
        100
      ],
      "parameters": {},
      "typeVersion": 4.6
    },
    {
      "id": "ecb53f48-4515-4bad-9a3e-3191bf985d29",
      "name": "Check for no. of emails sent",
      "type": "n8n-nodes-base.switch",
      "position": [
        -560,
        100
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "1fcea8aa-f547-48bc-92d5-2b3cd954a216",
      "name": "Send First Email",
      "type": "n8n-nodes-base.sendInBlue",
      "position": [
        -220,
        0
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "ec8849dc-47e0-4a47-acf7-15bbdc0905bf",
      "name": "Send Second Email",
      "type": "n8n-nodes-base.sendInBlue",
      "position": [
        -220,
        200
      ],
      "parameters": {},
      "executeOnce": false,
      "typeVersion": 1
    },
    {
      "id": "07d8a522-cd9b-451c-a45e-3b2074746b51",
      "name": "Quit Sending Emails to these Leads",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        0,
        200
      ],
      "parameters": {},
      "typeVersion": 4.6
    },
    {
      "id": "a6591c76-c5de-468c-b36e-23d867a5d1cb",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2840,
        -220
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "81c80cf6-b0ed-4dc5-8cd1-4e8b7d7f3409",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1560,
        -220
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get Payment Failure Leads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send First Email": {
      "main": [
        [
          {
            "node": "Update Email Count",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates": {
      "main": [
        [
          {
            "node": "Append or update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Second Email": {
      "main": [
        [
          {
            "node": "Quit Sending Emails to these Leads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Detect Failed Payments": {
      "main": [
        [
          {
            "node": "Extract User and Payment Info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Payment Failure Leads": {
      "main": [
        [
          {
            "node": "Check for no. of emails sent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check for no. of emails sent": {
      "main": [
        [
          {
            "node": "Send First Email",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Second Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract User and Payment Info": {
      "main": [
        [
          {
            "node": "Remove Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}