{
  "id": "YLSKn2I6JNP4P8CK",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Transform Email Responses with GPT-4O Mini and Telegram Human-in-the-Loop",
    "wechat": "youandme10086",
    "id": 5722,
    "update_time": "2025-11-10"
  },
  "name": "My workflow",
  "tags": [],
  "nodes": [
    {
      "id": "4f162485-7021-436f-ad6e-762d7a7dcb86",
      "name": "Email Received (IMAP)",
      "type": "n8n-nodes-base.emailReadImap",
      "position": [
        -1160,
        400
      ],
      "parameters": {
        "mailbox": "Inbox",
        "options": {}
      },
      "typeVersion": 2
    },
    {
      "id": "de1cf386-a4c9-4ec9-a398-117ad7de8b03",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        -720,
        400
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineByPosition"
      },
      "typeVersion": 3.2
    },
    {
      "id": "857f71d6-76b9-44b9-8b4e-22aa1c3775c7",
      "name": "Extract Text",
      "type": "n8n-nodes-base.set",
      "position": [
        -940,
        480
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "f59b00c0-290c-4aed-8ab8-596ec721663a",
              "name": "text",
              "type": "string",
              "value": "={{ $json.textPlain }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "64182ab8-9ad7-493c-a81c-41b505905050",
      "name": "Send Chick-fil-A Style Reply",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        840,
        560
      ],
      "webhookId": "b0ec56ac-ef76-4be0-bfa3-54021ab45812",
      "parameters": {
        "text": "={{ $json.message.content }}",
        "options": {
          "appendAttribution": false
        },
        "subject": "SUBJECT",
        "toEmail": "={{ $json.email }}",
        "fromEmail": "YOUR_EMAIL",
        "emailFormat": "text"
      },
      "typeVersion": 2.1
    },
    {
      "id": "370254c1-2025-436b-8434-975a20147142",
      "name": "Merge1",
      "type": "n8n-nodes-base.merge",
      "position": [
        620,
        560
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineByPosition"
      },
      "typeVersion": 3.2
    },
    {
      "id": "3d921b92-5f5c-44e1-b1e3-ae2fe7629af1",
      "name": "Chick-Fil-A Translator",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        260,
        280
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "GPT-4O-MINI"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "Your are a simple translator basically. Your job is to output a pure plain text of what I say rewritten in customer support level of Chick-Fil-A. You give only the translated text without any comments!"
            },
            {
              "content": "={{ $json.data.text }}"
            }
          ]
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "9c6c536d-acae-4549-ad99-7d73cf459c71",
      "name": "Extract Email",
      "type": "n8n-nodes-base.code",
      "position": [
        -940,
        280
      ],
      "parameters": {
        "jsCode": "const from = $input.first().json.from;\n\nconst match = from.match(/<([^>]+)>/);\nconst email = match ? match[1] : null;\n\nreturn [{ email }];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "d64efd1c-f977-4451-94fc-7cd559683a14",
      "name": "Ask for Response",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -200,
        300
      ],
      "webhookId": "63671f5d-7478-4a12-b034-ca783d537919",
      "parameters": {
        "chatId": "YOUR_CHAT_ID",
        "message": "=Email from {{ $json.email.replace(/[_*[\\]()~`>#+-=|{}.!]/g, '\\\\$&') }}\n\n{{ $json.text.replace(/[_*[\\]()~`>#+-=|{}.!]/g, '\\\\$&') }}",
        "options": {
          "appendAttribution": false
        },
        "operation": "sendAndWait",
        "responseType": "freeText"
      },
      "typeVersion": 1.2
    },
    {
      "id": "3f4bc908-c160-4188-b379-e932b5506674",
      "name": "If Respond",
      "type": "n8n-nodes-base.if",
      "position": [
        40,
        300
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "f08ff1ce-2ecc-436d-9edb-daa7829145a1",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": "\"\""
            },
            {
              "id": "410531e3-b90d-4056-bcd8-46ece6adf675",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": ""
            },
            {
              "id": "dd88ac54-ff03-429e-932d-6bebbf387a93",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": " "
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "906dc2e6-df99-4fe6-a35d-e2444b60b165",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -260,
        120
      ],
      "parameters": {
        "color": 5,
        "content": "This will send a Telegram message and wait for a response\n\nMake sure to set your Chat ID and Bot credentials"
      },
      "typeVersion": 1
    },
    {
      "id": "6658a91d-ccdb-4ef0-b672-a01f3beb2325",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        100
      ],
      "parameters": {
        "color": 5,
        "content": "This is the translator\n\nAdd credentials and modify prompt if your use-case is hyper specific"
      },
      "typeVersion": 1
    },
    {
      "id": "399978fc-c851-45ea-a666-6fd6533295b2",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        780,
        740
      ],
      "parameters": {
        "color": 5,
        "content": "Remember to add your email & subject (optional)"
      },
      "typeVersion": 1
    },
    {
      "id": "f20f34ec-4d8f-42ea-b785-1a9c2c2f0c4c",
      "name": "üöÄ SETUP GUIDE - START HERE",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1300,
        20
      ],
      "parameters": {
        "content": "üìã SETUP CHECKLIST:\n\n‚úÖ 1. Configure IMAP credentials for email reading\n‚úÖ 2. Set up SMTP credentials for email sending\n‚úÖ 3. Create Telegram bot and get Chat ID\n‚úÖ 4. Add OpenAI API key\n‚úÖ 5. Update YOUR_EMAIL and YOUR_CHAT_ID placeholders\n‚úÖ 6. Test the workflow with a sample email\n\nüí° This workflow automatically responds to emails with Chick-fil-A style customer service tone!"
      },
      "typeVersion": 1
    },
    {
      "id": "b1b6e37b-8d8b-4638-bbfd-c3d7a03598e5",
      "name": "üìß EMAIL SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1300,
        200
      ],
      "parameters": {
        "color": 3,
        "content": "STEP 1: Configure Email Credentials\n\n‚Ä¢ IMAP: For reading incoming emails\n‚Ä¢ SMTP: For sending replies\n\nCommon IMAP settings:\n‚Ä¢ Gmail: imap.gmail.com:993\n‚Ä¢ Outlook: imap-mail.outlook.com:993\n‚Ä¢ Yahoo: imap.mail.yahoo.com:993\n\n‚ö†Ô∏è Enable \"Less secure app access\" or use app passwords for Gmail/Outlook"
      },
      "typeVersion": 1
    },
    {
      "id": "284470f1-c4bd-4b55-9b74-39879c75121c",
      "name": "üí¨ TELEGRAM SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -260,
        -240
      ],
      "parameters": {
        "color": 4,
        "height": 340,
        "content": "STEP 2: Setup Telegram Bot\n\n1. Message @BotFather on Telegram\n2. Use /newbot command\n3. Follow instructions to create bot\n4. Copy the bot token\n5. Get your Chat ID:\n   ‚Ä¢ Message @userinfobot\n   ‚Ä¢ Copy your Chat ID number\n\n‚ö†Ô∏è Replace YOUR_CHAT_ID in the node parameters!"
      },
      "typeVersion": 1
    },
    {
      "id": "5cc3a026-7ed7-4b1d-8d39-34518fc08d72",
      "name": "ü§ñ OPENAI SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        -320
      ],
      "parameters": {
        "color": 6,
        "height": 400,
        "content": "STEP 3: Configure OpenAI\n\n1. Get OpenAI API key from platform.openai.com\n2. Add credentials to n8n\n3. Model: gpt-4o-mini (cost-effective)\n\nüí° CUSTOMIZE THE PROMPT:\nChange the system message to match your brand voice:\n‚Ä¢ Professional\n‚Ä¢ Casual\n‚Ä¢ Technical support\n‚Ä¢ Sales-oriented\n\nCurrent: Chick-fil-A customer service style"
      },
      "typeVersion": 1
    },
    {
      "id": "cc4e9eb6-a683-46eb-947d-bcc23fdf0b5d",
      "name": "üîÑ WORKFLOW FLOW",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -500,
        540
      ],
      "parameters": {
        "color": 2,
        "height": 400,
        "content": "WORKFLOW PROCESS:\n\n1. üì® Email arrives ‚Üí IMAP reads it\n2. üì§ Extract sender email + text content\n3. üì± Send to Telegram for human review\n4. üë§ Human types response in Telegram\n5. ü§ñ AI translates to Chick-fil-A style\n6. üìß Auto-send styled reply to customer\n\nüéØ RESULT: Professional, consistent customer service responses with human oversight!"
      },
      "typeVersion": 1
    },
    {
      "id": "13ac71b6-1b23-49d1-ae57-ba0dde82aa76",
      "name": "‚öôÔ∏è FINAL CONFIGURATION",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        780,
        20
      ],
      "parameters": {
        "color": 7,
        "height": 420,
        "content": "STEP 4: Final Setup\n\nüìß Send Email Node:\n‚Ä¢ Replace YOUR_EMAIL with your sending email\n‚Ä¢ Update SUBJECT line as needed\n‚Ä¢ Test email delivery\n\nüß™ TESTING:\n1. Send test email to monitored inbox\n2. Check Telegram for notification\n3. Reply in Telegram\n4. Verify AI translation\n5. Confirm email delivery\n\nüîÑ Activate workflow when ready!"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "82956e8f-af60-4f1e-871d-0dad735af10c",
  "connections": {
    "Merge": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          },
          {
            "node": "Ask for Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Send Chick-fil-A Style Reply",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Respond": {
      "main": [
        [
          {
            "node": "Chick-Fil-A Translator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Text": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Extract Email": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ask for Response": {
      "main": [
        [
          {
            "node": "If Respond",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email Received (IMAP)": {
      "main": [
        [
          {
            "node": "Extract Email",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chick-Fil-A Translator": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}