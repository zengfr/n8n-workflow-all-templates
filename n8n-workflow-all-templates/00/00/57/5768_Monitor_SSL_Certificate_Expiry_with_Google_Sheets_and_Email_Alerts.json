{
  "id": "KUuDj4PoKCazr0Wb",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Monitor SSL Certificate Expiry with Google Sheets and Email Alerts",
    "wechat": "youandme10086",
    "id": 5768,
    "update_time": "2025-11-10"
  },
  "name": "SSL Monitoring",
  "tags": [],
  "nodes": [
    {
      "id": "da9f42ab-bb5a-4d32-850b-ce08e2804700",
      "name": "Get SSL",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        800,
        880
      ],
      "parameters": {
        "url": "=https://ssl-checker.io/api/v1/check/{{ $json.Link.replace(/^https?:\\/\\//, \"\").replace(/\\/$/, \"\") }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {}
          ]
        }
      },
      "typeVersion": 4.2,
      "alwaysOutputData": true
    },
    {
      "id": "08b036d0-7f3a-498a-a40e-3e655a651232",
      "name": "Loop",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        440,
        540
      ],
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "typeVersion": 3
    },
    {
      "id": "7b3979db-434a-4e45-9735-f16020beac14",
      "name": "Update SSL in Spreadsheet",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1460,
        1100
      ],
      "parameters": {
        "columns": {
          "value": {
            "Name": "={{ $('Get Website List').item.json.Name }}",
            "SSL Issued On": "={{ $json.result.valid_from }}",
            "SSL Expired On": "={{ $json.result.valid_till }}"
          },
          "schema": [
            {
              "id": "No",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "No",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Link",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Link",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "SSL Issued On",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "SSL Issued On",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "SSL Expired On",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "SSL Expired On",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "SSL Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "SSL Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "row_number",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Name"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "update",
        "sheetName": {
          "__rl": true,
          "mode": "url",
          "value": "https://docs.google.com/spreadsheets/d/1-8BOhL2xpJtVJeH6rrLcgegFXkq2NtqjChSp2DrCqoM/edit#gid=0",
          "__regex": "https:\\/\\/docs\\.google\\.com\\/spreadsheets\\/d\\/[0-9a-zA-Z\\-_]+.*\\#gid=([0-9]+)"
        },
        "documentId": {
          "__rl": true,
          "mode": "url",
          "value": "https://docs.google.com/spreadsheets/d/1-8BOhL2xpJtVJeH6rrLcgegFXkq2NtqjChSp2DrCqoM/edit?usp=drivesdk",
          "__regex": "https:\\/\\/(?:drive|docs)\\.google\\.com(?:\\/.*|)\\/d\\/([0-9a-zA-Z\\-_]+)(?:\\/.*|)"
        },
        "authentication": "serviceAccount"
      },
      "credentials": {
        "googleApi": {
          "id": "hieVDK2geFfUQ5r3",
          "name": "Google Service Account account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "652529e3-a42d-4786-b5ff-efc56cdd1b75",
      "name": "Trigger Every Monday",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -420,
        680
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                1
              ],
              "triggerAtHour": 7
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "38845019-8a36-499f-9904-e8b11d1abcfd",
      "name": "SSL Not Good?",
      "type": "n8n-nodes-base.if",
      "position": [
        1200,
        420
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "3dfd4edd-6a4d-4a41-b2f3-647bc7308aaa",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              },
              "leftValue": "={{ $json.message }}",
              "rightValue": "All Good"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "98615825-9ba9-4a56-a6c9-a4c49ceeb79c",
      "name": "Get Website List",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -40,
        680
      ],
      "parameters": {
        "options": {},
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1FWZ8vT5bMQXxDToguBW30LjQV_8sU9UN1wXk-2vCFTE/edit#gid=0",
          "cachedResultName": "List"
        },
        "documentId": {
          "__rl": true,
          "mode": "url",
          "value": "https://docs.google.com/spreadsheets/d/1FWZ8vT5bMQXxDToguBW30LjQV_8sU9UN1wXk-2vCFTE/edit?usp=sharing"
        },
        "authentication": "serviceAccount"
      },
      "credentials": {
        "googleApi": {
          "id": "hieVDK2geFfUQ5r3",
          "name": "Google Service Account account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "fac5d72b-37b1-42ad-905e-daf3d7b8f93b",
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "position": [
        800,
        440
      ],
      "parameters": {
        "jsCode": "// Get the current date and time\nconst now = new Date();\n\n// Set the threshold (in days) for SSL expiration warning\nconst thresholdDays = 14;\n\n// Filter the input data to only include entries where the SSL certificate\n// expires within the threshold (i.e., 14 days or fewer from today)\nconst filtered = $input.all().filter(item => {\n  const expiry = new Date(item.json[\"SSL Expired On\"]);\n  const daysLeft = (expiry - now) / (1000 * 60 * 60 * 24); // Convert milliseconds to days\n  return daysLeft <= thresholdDays;\n});\n\n// If no certificates are expiring soon, return a simple \"All Good\" message\nif (filtered.length === 0) {\n  return [\n    {\n      json: {\n        message: \"All Good\"\n      }\n    }\n  ];\n} else {\n  // If some certificates are expiring soon, build a message listing them\n  const websiteNames = filtered.map(entry => {\n    const daysLeft = Math.ceil((new Date(entry.json[\"SSL Expired On\"]) - now) / (1000 * 60 * 60 * 24));\n    return `- ${entry.json.Name} (expires in ${daysLeft} days)`;\n  }).join('\\n');\n\n  // Create the final message to return\n  const message = `SSL certificates expiring soon:\\n${websiteNames}`;\n\n  return [\n    {\n      json: {\n        message: message\n      }\n    }\n  ];\n}\n"
      },
      "typeVersion": 2
    },
    {
      "id": "cb3170e5-448a-4310-8e16-68d3db5e831e",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -500,
        480
      ],
      "parameters": {
        "width": 260,
        "height": 360,
        "content": "## Weekly Trigger\n\nThis workflow trigger is scheduled to run every Monday at 7:00 AM.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "ffa881ff-90d1-4909-bc30-4492de897a26",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -120,
        480
      ],
      "parameters": {
        "width": 260,
        "height": 360,
        "content": "## Fetch URL Website\n\nThis step reads a list of website URLs from a connected spreadsheet.\nEach row should contain a valid URL in the designated column.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "7133cfce-67a8-4527-b731-78afe30ecb64",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        660
      ],
      "parameters": {
        "width": 260,
        "height": 360,
        "content": "## Get SSL Status\n\nThis step checks the SSL certificate status for each URL using the ssl-checker.io API.\nIt retrieves information such as certificate validity, expiration date, and overall SSL health, helping monitor website security.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "f3752261-5bea-48c7-8058-d37b7165427c",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1300,
        720
      ],
      "parameters": {
        "width": 400,
        "height": 560,
        "content": "## Update Spreadsheet\n\nThis step updates the spreadsheet with the latest SSL information for each website.\nEnsure your spreadsheet includes the following columns:\n\n* No\n* Name\n* Link\n* SSL Issued On\n* SSL Expired On\n* SSL Status\n\nThe node will automatically fill in or update the Issued On, Expired On, and SSL Status fields based on the SSL data retrieved.\n\n\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "77fb04f5-94bf-4536-9095-2d67781a3fa8",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        60
      ],
      "parameters": {
        "width": 260,
        "height": 520,
        "content": "\n## Check SSL Expiry Threshold Code\n\nThis step checks if any SSL certificates will expire within 14 days.\n\n- If none are expiring soon, it returns \"All Good\".\n\n- If some are expiring, it lists the website names and how many days are left.\n\nUse this to stay ahead of SSL renewals."
      },
      "typeVersion": 1
    },
    {
      "id": "3d732b6d-fb05-4872-afe5-df13ed0b5ab2",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1120,
        120
      ],
      "parameters": {
        "width": 260,
        "height": 440,
        "content": "\n## Check Condition\nThis step checks if any SSL certificates are expiring soon (within 14 days).\nIf any are found, it will trigger an email alert with the details.\n\nUse this to notify you when SSL action is needed."
      },
      "typeVersion": 1
    },
    {
      "id": "6c0f7e6c-5a41-48d0-84e2-4ba058160809",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1480,
        120
      ],
      "parameters": {
        "width": 260,
        "height": 440,
        "content": "\n## Send Email Alert\nThis step sends an email notification when SSL certificates are close to expiring.\nIt includes the list of affected websites and how many days are left until expiration.\n\nMake sure your email settings are properly configured to receive alerts.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "69aa3a4f-2b96-446b-b221-ab808912d8ef",
      "name": "Send Email Alert",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        1560,
        400
      ],
      "webhookId": "ef8c71c7-bf7e-4749-adbb-a66d19161c89",
      "parameters": {
        "text": "={{ $json.message }}",
        "options": {},
        "subject": "‚ö†Ô∏è ALERT!! SSL EXPIRED",
        "toEmail": "example@gmail.com, example2@gmail.com",
        "fromEmail": "admin@balimandira.com",
        "emailFormat": "text"
      },
      "credentials": {
        "smtp": {
          "id": "ZBpj1LGDDnZEdwLw",
          "name": "SMTP account"
        }
      },
      "retryOnFail": true,
      "typeVersion": 2.1
    },
    {
      "id": "3f2e390b-882f-45fe-9855-dfd1542ed188",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1120,
        320
      ],
      "parameters": {
        "width": 560,
        "height": 640,
        "content": "# üîí SSL Monitoring Workflow\n‚úÖ What It Does:\nThis workflow automatically checks the SSL certificates of websites and alerts you if any are expiring soon (within 14 days). It helps you stay ahead of SSL issues before they cause downtime or security warnings.\n\n‚öôÔ∏è Flow:\n1. Trigger (Weekly):\nRuns every Monday at 7:00 AM to start the SSL check.\n\n2. Fetch URLs from Spreadsheet:\nReads website URLs from a spreadsheet with the following columns:\nNo, Name, Link, SSL Issued On, SSL Expired On, SSL Status\n\n3. Get SSL Status:\nUses ssl-checker.io API to fetch the SSL details (issued date, expiry date, status).\n\n4. Update Spreadsheet:\nAutomatically updates the spreadsheet with the latest SSL data.\n\n5. Check SSL Expiry:\nFilters websites with certificates expiring in 14 days or less.\n\n6. SSL Not Good?:\nIf expiring certificates are found, it triggers an alert.\n\n7. Send Email Alert:\nSends an email listing the websites that need attention.\n\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "timezone": "Asia/Singapore",
    "callerPolicy": "workflowsFromSameOwner",
    "executionOrder": "v1"
  },
  "versionId": "12e76c0c-93fb-4b34-8c87-44a0ecaca1ed",
  "connections": {
    "Code": {
      "main": [
        [
          {
            "node": "SSL Not Good?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get SSL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get SSL": {
      "main": [
        [
          {
            "node": "Update SSL in Spreadsheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SSL Not Good?": {
      "main": [
        [
          {
            "node": "Send Email Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Website List": {
      "main": [
        [
          {
            "node": "Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger Every Monday": {
      "main": [
        [
          {
            "node": "Get Website List",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update SSL in Spreadsheet": {
      "main": [
        [
          {
            "node": "Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}