{
  "id": "3UYpKpNGvAhavb0g",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "WhatsApp Fact-Checking Bot with Perplexity AI and Twilio",
    "wechat": "youandme10086",
    "id": 6842,
    "update_time": "2025-11-10"
  },
  "name": "WhatsApp Fact-Checking Bot",
  "tags": [],
  "nodes": [
    {
      "id": "5a66e287-a2c6-48bc-ad4b-9812fdf0c19a",
      "name": "Receive Whatsapp Messages",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -384,
        -48
      ],
      "webhookId": "885a0e87-c3f0-486a-9cbd-c59941cc412b",
      "parameters": {
        "path": "whatsapp-inbound",
        "options": {},
        "httpMethod": "POST"
      },
      "typeVersion": 2
    },
    {
      "id": "a81de7f9-1bdc-40c8-8f51-2f13f70fe08e",
      "name": "Confirm news with Citations",
      "type": "n8n-nodes-base.perplexity",
      "position": [
        -48,
        -48
      ],
      "parameters": {
        "model": "sonar",
        "options": {},
        "messages": {
          "message": [
            {
              "role": "system",
              "content": "You are a cautious and objective AI fact-checker for a WhatsApp service. Your task is to verify the news or claim provided by the user.\n\n1. Analyze the user's query to understand the core claim being made.\n2. Perform a web search to find information from multiple reliable, neutral sources (like major news outlets, scientific journals, and fact-checking organizations).\n3. Based on the search results, provide a clear, one-phrase verdict at the very beginning of your response. Use one of the following: \"âœ… Likely True\", \"âŒ Likely False\", \"âš ï¸ Misleading\", or \"â“ Unverified\".\n4. After the verdict, write a brief, neutral summary (2-3 sentences) explaining your findings in simple language suitable for a WhatsApp message.\n5. You MUST include citations for your key sources as provided by your search results. This is critical for user trust."
            },
            {
              "content": "={{ $json.body.Body }}"
            }
          ]
        },
        "simplify": true,
        "requestOptions": {}
      },
      "credentials": {
        "perplexityApi": {
          "id": "6FACql65sGWXE02k",
          "name": "Perplexity account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "0f57741e-9a02-47b1-8908-147d7651e7bc",
      "name": "Send Summary to whatsapp",
      "type": "n8n-nodes-base.twilio",
      "position": [
        288,
        -48
      ],
      "parameters": {
        "to": "={{ $('Receive Whatsapp Messages').item.json.body.From.replace('whatsapp:', '')  }}",
        "from": "={{ $('Receive Whatsapp Messages').item.json.body.To.replace('whatsapp:', '') }}",
        "message": "={{$json.message}}\n\n---\n\n*Sources:*\n{{ $json.citations.map((url, index) => `[${index + 1}] ${url}`).join('\\n') }}",
        "options": {},
        "toWhatsapp": true
      },
      "credentials": {
        "twilioApi": {
          "id": "Dm0RKlu8zVyZcEWb",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "eb925e9f-f154-4b84-8405-b5a0a9881930",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -496,
        -368
      ],
      "parameters": {
        "width": 320,
        "height": 512,
        "content": "\n### ðŸ“¬ **WhatsApp Gateway**\n\nThis node is our digital front door! It patiently listens for incoming WhatsApp messages from a user.\n\n* **Triggers on:** A new message.\n* **Outputs:** The user's message (`Body`) and their phone number (`From`)."
      },
      "typeVersion": 1
    },
    {
      "id": "cb07fac9-16cb-4be9-94c2-537623eb43a8",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        -368
      ],
      "parameters": {
        "color": 7,
        "width": 320,
        "height": 512,
        "content": "### ðŸ¤– **The Digital Detective**\n\nThis is where the magic happens! We hand the user's question over to our AI detective. It follows strict instructions to scour the web for facts.\n\n* **Input:** The user's raw text from the webhook.\n* **Action:** Fact-checks the claim against reliable sources.\n* **Output:** A structured response with a verdict, a simple summary, and source citations."
      },
      "typeVersion": 1
    },
    {
      "id": "fa055749-49e5-452d-ab25-5aa6475a3f70",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        176,
        -368
      ],
      "parameters": {
        "color": 3,
        "width": 320,
        "height": 512,
        "content": "### ðŸ“² **WhatsApp Reply Service**\n\nMission complete! This node takes the carefully crafted answer from our AI detective and sends it directly back to the user.\n\n* **Input:** The AI's formatted verdict, summary, and citations.\n* **Action:** Delivers the final message to the original user via Twilio."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {
    "Send Summary to whatsapp": [
      {
        "json": {
          "to": "whatsapp:+918128789012",
          "sid": "SM85f7d0c655e70148d15d38e51217377e",
          "uri": "/2010-04-01/Accounts/ACcf9b41cb7dcc9fbc5aa39c8a6d924915/Messages/SM85f7d0c655e70148d15d38e51217377e.json",
          "body": "âœ… Likely True\n\nElon Musk announced plans to start a new political party called the \"America Party\" in early July 2025, aiming to represent the political middle and \"give you back your freedom.\" He indicated this move was motivated by his disagreement with President Trump and the current two-party system, and announced intentions to target a few key Senate and House seats, though significant legal and logistical challenges remain for establishing a third party. While Musk has publicly committed to forming the party once certain legislation passed, it is still in the early stages of organization and ballot access hurdles must be overcome[1][2][3][4][5].\n\n---\n\n*Sources:*\n[1] https://abcnews.go.com/US/elon-musk-YOUR_OPENAI_KEY_HERE-new-political-party-america/story?id=123587743\n[2] https://www.cbsnews.com/news/elon-musk-YOUR_OPENAI_KEY_HERE-america-political-party-trump-feud-harder-than-it-sounds/\n[3] https://en.wikipedia.org/wiki/America_Party\n[4] https://www.youtube.com/watch?v=Y1Um0o7J0fw\n[5] https://www.youtube.com/watch?v=PKlkLX8oGoY",
          "from": "whatsapp:+14155238886",
          "price": null,
          "status": "queued",
          "date_sent": null,
          "direction": "outbound-api",
          "num_media": "0",
          "error_code": null,
          "price_unit": null,
          "account_sid": "ACcf9b41cb7dcc9fbc5aa39c8a6d924915",
          "api_version": "2010-04-01",
          "date_created": "Sat, 02 Aug 2025 08:09:01 +0000",
          "date_updated": "Sat, 02 Aug 2025 08:09:01 +0000",
          "num_segments": "1",
          "error_message": null,
          "subresource_uris": {
            "media": "/2010-04-01/Accounts/ACcf9b41cb7dcc9fbc5aa39c8a6d924915/Messages/SM85f7d0c655e70148d15d38e51217377e/Media.json"
          },
          "messaging_service_sid": null
        }
      }
    ],
    "Receive Whatsapp Messages": [
      {
        "json": {
          "body": {
            "To": "whatsapp:+14155238886",
            "Body": "Elon musk is going to start a new political party?",
            "From": "whatsapp:+918128789012",
            "WaId": "918128789012",
            "SmsSid": "SM8c34b122365b9103774a3185b53068f8",
            "NumMedia": "0",
            "SmsStatus": "received",
            "AccountSid": "ACcf9b41cb7dcc9fbc5aa39c8a6d924915",
            "ApiVersion": "2010-04-01",
            "MessageSid": "SM8c34b122365b9103774a3185b53068f8",
            "MessageType": "text",
            "NumSegments": "1",
            "ProfileName": "Harsh Maniya",
            "SmsMessageSid": "SM8c34b122365b9103774a3185b53068f8",
            "ChannelMetadata": "{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Harsh Maniya\",\"WaId\":\"918128789012\"}}}",
            "ReferralNumMedia": "0"
          },
          "query": {},
          "params": {},
          "headers": {
            "host": "ancient-insect-88.hooks.n8n.cloud",
            "accept": "*/*",
            "x-real-ip": "44.223.68.95",
            "connection": "close",
            "user-agent": "TwilioProxy/1.1",
            "content-type": "application/x-www-form-urlencoded",
            "x-home-region": "us1",
            "x-nginx-proxy": "true",
            "content-length": "612",
            "x-forwarded-for": "44.223.68.95",
            "x-forwarded-proto": "https",
            "x-twilio-signature": "q+cHv0JlfdRZSL3ROvbORF0bgIg=",
            "i-twilio-idempotency-token": "73b77768-8f38-4235-805c-c82fd9422f69"
          },
          "webhookUrl": "https://ancient-insect-88.hooks.n8n.cloud/webhook-test/whatsapp-inbound",
          "executionMode": "test"
        }
      }
    ],
    "Confirm news with Citations": [
      {
        "json": {
          "id": "56311cce-88b0-48fb-9945-3cf2bfec0fc1",
          "created": 1754122140,
          "message": "âœ… Likely True\n\nElon Musk announced plans to start a new political party called the \"America Party\" in early July 2025, aiming to represent the political middle and \"give you back your freedom.\" He indicated this move was motivated by his disagreement with President Trump and the current two-party system, and announced intentions to target a few key Senate and House seats, though significant legal and logistical challenges remain for establishing a third party. While Musk has publicly committed to forming the party once certain legislation passed, it is still in the early stages of organization and ballot access hurdles must be overcome[1][2][3][4][5].",
          "citations": [
            "https://abcnews.go.com/US/elon-musk-YOUR_OPENAI_KEY_HERE-new-political-party-america/story?id=123587743",
            "https://www.cbsnews.com/news/elon-musk-YOUR_OPENAI_KEY_HERE-america-political-party-trump-feud-harder-than-it-sounds/",
            "https://en.wikipedia.org/wiki/America_Party",
            "https://www.youtube.com/watch?v=Y1Um0o7J0fw",
            "https://www.youtube.com/watch?v=PKlkLX8oGoY"
          ]
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6e1e2210-99c2-422e-ade8-41bfc6645333",
  "connections": {
    "Receive Whatsapp Messages": {
      "main": [
        [
          {
            "node": "Confirm news with Citations",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Confirm news with Citations": {
      "main": [
        [
          {
            "node": "Send Summary to whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}