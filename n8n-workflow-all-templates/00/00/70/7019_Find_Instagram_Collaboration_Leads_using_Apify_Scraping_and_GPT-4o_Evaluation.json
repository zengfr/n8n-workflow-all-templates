{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Find Instagram Collaboration Leads using Apify Scraping and GPT-4o Evaluation",
    "wechat": "youandme10086",
    "id": 7019,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "82533369-cc25-43f8-9698-c852ff0c6feb",
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -480,
        440
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "d55cb854-75f0-4cfd-98dc-16a1560fcfcd",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        760,
        280
      ],
      "parameters": {
        "text": "=followers: {{ $json.followersCount }} bio: {{ $json.bio }} ",
        "options": {
          "systemMessage": "You are a helpful assistant. I'm lookig for n8n creators to collaborate with. read their bio, and output yes or no if they are a good person for me to reach out to in order to collaborate on a project. I need the follower count to be 2k at leaset. \n\noutput like this. \n\n{\n\t\"lead status\": \"Yes or No\",\n\t\"Reasoning\": \"reasoning for why they are a good or bad lead. \"\n}"
        },
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 2
    },
    {
      "id": "de7abe87-394e-49d1-b049-286ee6d1d477",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        760,
        480
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "ghJTvay8CvwXDsXz",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "c3ffa5c7-8ebd-4be3-a9f3-2232ecb19c97",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        940,
        460
      ],
      "parameters": {
        "jsonSchemaExample": "{\n\t\"lead status\": \"Yes or No\",\n\t\"Reasoning\": \"reasoning for why they are a good or bad lead. \"\n}"
      },
      "typeVersion": 1.2
    },
    {
      "id": "ba19cddd-f3e4-4b1f-8c19-c5ebeca3d72a",
      "name": "Find Recent Posts",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -40,
        440
      ],
      "parameters": {
        "url": "=https://api.apify.com/v2/acts/apify~instagram-hashtag-scraper/run-sync-get-dataset-items\n",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n    \"hashtags\": [\n        \"{{ $json.Search_Term }}\"\n    ],\n    \"resultsLimit\": 5,\n    \"resultsType\": \"posts\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth"
      },
      "credentials": {
        "httpQueryAuth": {
          "id": "yLUXsSPePLOGnHmf",
          "name": "Query Auth account"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "7e3e1c9a-3bcc-4cbc-880d-e2f8c6440159",
      "name": "Create Search Term",
      "type": "n8n-nodes-base.set",
      "position": [
        -260,
        300
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "ad5c9a23-7fe0-4ed4-b1e7-d3da417bcb86",
              "name": "Search_Term",
              "type": "string",
              "value": "n8n"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "b34f82fa-0286-4913-abc6-6b35eb155e44",
      "name": "Scrape Accounts",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        320,
        200
      ],
      "parameters": {
        "url": "=https://api.apify.com/v2/acts/apify~instagram-profile-scraper/run-sync-get-dataset-items\n",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n    \"usernames\": [\n        \"{{ $json.ownerUsername }}\"\n    ]\n}",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth"
      },
      "credentials": {
        "httpQueryAuth": {
          "id": "yLUXsSPePLOGnHmf",
          "name": "Query Auth account"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "8c2b4344-0b26-4eca-98b7-136593e21c7b",
      "name": "Set bio and follower count",
      "type": "n8n-nodes-base.set",
      "position": [
        500,
        400
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "f2cfdd81-ee6c-4b27-885a-6cf21f6efffb",
              "name": "bio",
              "type": "string",
              "value": "={{ $json.biography }}"
            },
            {
              "id": "2761d89a-2de3-4aeb-8a05-fc61a20f9ed4",
              "name": "followersCount",
              "type": "number",
              "value": "={{ $json.followersCount }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "3a1e36af-6e34-4ded-85cd-45f7f6788b22",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -580,
        -160
      ],
      "parameters": {
        "color": 3,
        "width": 780,
        "height": 800,
        "content": "#### 1Ô∏è‚É£ Manual Trigger  \n- **Node**: `When clicking ‚ÄòExecute workflow‚Äô`  \n- **Use**: Allows you to run the workflow manually while testing.\n\n#### 2Ô∏è‚É£ Define Hashtag  \n- **Node**: `Create Search Term`  \n- **Value**: Sets `\"n8n\"` as the default Instagram hashtag to scan.  \n- You can edit this to any other hashtag you'd like.\n\n#### 3Ô∏è‚É£ Find Recent Posts  \n- **Node**: `Find Recent Posts`  \n- **API**: [Apify Instagram Hashtag Scraper](https://console.apify.com/actors/apify/instagram-hashtag-scraper)  \n- **Auth Setup**:  \n  - Go to your [Apify Console](https://console.apify.com/)  \n  - Click ‚ÄúCreate new token‚Äù  \n  - In n8n, create a new **HTTP Query Auth** credential  \n    - Set token in the `token` query param (e.g., `?token=yourTokenHere`)  \n  - Choose the credential in this node"
      },
      "typeVersion": 1
    },
    {
      "id": "196cab38-3830-4a0e-8885-f1bc1fc0c57a",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        220,
        -160
      ],
      "parameters": {
        "color": 4,
        "width": 440,
        "height": 800,
        "content": "#### 4Ô∏è‚É£ Scrape Each Profile  \n- **Node**: `Scrape Accounts`  \n- **API**: [Apify Instagram Profile Scraper](https://console.apify.com/actors/apify/instagram-profile-scraper)  \n- **Body**: JSON with `usernames` from the hashtag search  \n- **Note**: Uses the same `httpQueryAuth` credential as the previous node.\n\n#### 5Ô∏è‚É£ Extract Fields  \n- **Node**: `Set bio and follower count`  \n- **What it does**: Extracts `biography` and `followersCount` from the profile JSON and stores them in clean variables for AI input.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "d0c8ca4e-519c-452c-b906-7d07782ed166",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        680,
        -160
      ],
      "parameters": {
        "color": 6,
        "width": 420,
        "height": 800,
        "content": "#### 6Ô∏è‚É£ AI Lead Scoring  \n- **Node**: `AI Agent`  \n- **Purpose**: Uses GPT-4o-mini to analyze the bio and follower count  \n- **Prompt Details**:\n#### 7Ô∏è‚É£ AI Model  \n- **Node**: `OpenAI Chat Model`  \n- **Model**: `gpt-4o-mini`  \n- **Credential**: Connect your OpenAI account via API Key.  \n- Go to [OpenAI API Keys](https://platform.openai.com/account/api-keys)  \n- Copy your key and create a new **OpenAI API** credential in n8n.\n\n#### 8Ô∏è‚É£ Output Parser  \n- **Node**: `Structured Output Parser`  \n- **What it does**: Parses the response from the AI into structured JSON for further use \n\n---"
      },
      "typeVersion": 1
    },
    {
      "id": "7c5fb223-1d60-4134-96f8-e3bb03de25e5",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -580,
        -340
      ],
      "parameters": {
        "width": 1680,
        "content": "## üì¨ Need More Help?\n\n**üë§ Robert Breen**  \nAutomation Consultant | AI Workflow Designer | n8n Expert  \nüìß [robert@ynteractive.com](mailto:robert@ynteractive.com)  \nüîó [LinkedIn](https://www.linkedin.com/in/robert-breen-29429625/)\n"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Scrape Accounts": {
      "main": [
        [
          {
            "node": "Set bio and follower count",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Find Recent Posts": {
      "main": [
        [
          {
            "node": "Scrape Accounts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Create Search Term": {
      "main": [
        [
          {
            "node": "Find Recent Posts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Set bio and follower count": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Create Search Term",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}