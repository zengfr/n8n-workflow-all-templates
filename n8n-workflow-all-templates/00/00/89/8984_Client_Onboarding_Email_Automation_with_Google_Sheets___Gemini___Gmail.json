{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Client Onboarding Email Automation with Google Sheets + Gemini + Gmail",
    "wechat": "youandme10086",
    "id": 8984,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "fc6370ed-4336-4b79-ace5-d8237948f460",
      "name": "Error Handler",
      "type": "n8n-nodes-base.errorTrigger",
      "position": [
        2368,
        1264
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "c2016a43-f619-48cd-98e5-84a4efd95594",
      "name": "Execution Completed",
      "type": "n8n-nodes-base.noOp",
      "position": [
        3168,
        1136
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "8e7e7958-ed6e-420f-aa4f-ae84ddb456fe",
      "name": "Execution Failure",
      "type": "n8n-nodes-base.noOp",
      "position": [
        2592,
        1264
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "0e7be1c3-28cd-4747-a8e8-43666b762b80",
      "name": "Client Checklist",
      "type": "n8n-nodes-base.set",
      "position": [
        2592,
        1040
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "c9c81e80-f2f2-436d-a6cf-48882b0f72ea",
              "name": "=Checklist",
              "type": "string",
              "value": "=\"Checklist\": \"\n1. Account setup\n2. Welcome call scheduled\n3. Document collection\n4. Service configuration\n5. Onboarding session\n6. First milestone review"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "c80117c6-0d0d-43cc-b986-8996e03a60a2",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        2896,
        1264
      ],
      "parameters": {
        "options": {},
        "modelName": "models/gemini-2.0-flash"
      },
      "credentials": {
        "googlePalmApi": {
          "id": "6a9OTOyTQOIKnKAq",
          "name": "Google Gemini(PaLM) Api account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "557143d0-abaa-410d-9117-2b60fce3086e",
      "name": "Trigger on New Client Form Submission",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "position": [
        2144,
        1040
      ],
      "parameters": {
        "event": "rowAdded",
        "options": {},
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 1635870855,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19Hvti1sX6SvjP1Kj8dWFEiksiqn1FJVBoMToP2X6xBw/edit#gid=1635870855",
          "cachedResultName": "Form Responses 1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "19Hvti1sX6SvjP1Kj8dWFEiksiqn1FJVBoMToP2X6xBw",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19Hvti1sX6SvjP1Kj8dWFEiksiqn1FJVBoMToP2X6xBw/edit?usp=drivesdk",
          "cachedResultName": "Onboarding"
        }
      },
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "ciFJ21F7Wq3VZJYU",
          "name": "Google Sheets Trigger account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "de000539-7f90-49df-9b42-1ceed11b09be",
      "name": "Extract and Structure Client Data",
      "type": "n8n-nodes-base.set",
      "position": [
        2368,
        1040
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "7c333d8f-04cd-4987-9c30-4c7bc26baecb",
              "name": "fields",
              "type": "string",
              "value": "=Name:  {{ $json['Client name'] }} \nEmail:  {{ $json[' email '] }}\nCompany: {{ $json['  Company Name  '] }}\nService Needed: {{ $json['  Services Needed  '] }}\nOther info: {{ $json['  Any other onboarding info  '] }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "f762750d-85c5-4932-97c7-a40817950af1",
      "name": "Personalize Using Gemini",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        2816,
        1040
      ],
      "parameters": {
        "text": "=Give me an onboarding check list for an email to the client, give me only email body and don't generate extra text like \"Okay, here's an email template ...\" and start and end on new lines\nstart with:\nHi {{ $('Trigger on New Client Form Submission').item.json['Client name'] }}, \nand end with \nBest regards,\nYour {{ $('Trigger on New Client Form Submission').item.json['  Company Name  '] }} Team\n\n:\nAlso use information from checklist and Fields below\n {{ $json.Checklist }}\n\nFields: {{ $('Extract and Structure Client Data').item.json.fields }}",
        "promptType": "define"
      },
      "typeVersion": 1.5
    },
    {
      "id": "58f03de6-b01a-45bd-b3ce-85c74a17aef5",
      "name": "Send Email to Client",
      "type": "n8n-nodes-base.gmail",
      "position": [
        3168,
        944
      ],
      "webhookId": "2a07b507-23a6-4bfb-adff-997d30ea3dfa",
      "parameters": {
        "sendTo": "={{ $('Trigger on New Client Form Submission').item.json[' email '] }}",
        "message": "= {{ $json.text }}",
        "options": {},
        "subject": "=Welcome to Our Service,  {{ $('Trigger on New Client Form Submission').item.json['Client name'] }} "
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "vdI9VLsEmuPzPxxo",
          "name": "Gmail account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "b405a300-66ea-47b3-9a9f-7a146536764f",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2080,
        768
      ],
      "parameters": {
        "color": 4,
        "width": 288,
        "height": 256,
        "content": "## STEP 1 路 Trigger & Intake\n**Google Sheets Trigger** fires on new form row.\n**Extract & Structure** maps fields into a single string (Name/Email/Company/Service/Notes).\nTip: Column keys include spaces (e.g. `\" email \"`, `\"  Company Name  \"`). Match them exactly."
      },
      "typeVersion": 1
    },
    {
      "id": "02ad7e7f-f94c-40dd-839c-ca7064eab2e2",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2480,
        768
      ],
      "parameters": {
        "color": 5,
        "height": 224,
        "content": "## STEP 2 路 Checklist Context\n**Client Checklist (Set)** provides a default onboarding checklist.\nUsed together with the extracted fields to enrich the email prompt.\nEdit this list to fit your service offering."
      },
      "typeVersion": 1
    },
    {
      "id": "3e8be3db-0223-4b39-a6dd-9e8db01d801a",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2800,
        688
      ],
      "parameters": {
        "color": 6,
        "height": 304,
        "content": "## STEP 3 路 Personalize with Gemini\n**Chain (Gemini)** generates the **email body only** (no extra wrapper text).\nPrompt forces greeting with client name and sign-off with company team.\nModel: Google Gemini via LLM node; output available as `{{ $json.text }}`."
      },
      "typeVersion": 1
    },
    {
      "id": "133ced0e-168a-4332-afd8-d0216b7b3a38",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3136,
        672
      ],
      "parameters": {
        "color": 7,
        "height": 256,
        "content": "## STEP 4 路 Send & Run State\n**Gmail** sends to the form email, subject prefilled.\nIf body includes HTML, set Gmail node to HTML mode.\n**Execution Completed / Failure**: NoOps mark success/failure; **Error Trigger** catches unhandled errors."
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Error Handler": {
      "main": [
        [
          {
            "node": "Execution Failure",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Client Checklist": {
      "main": [
        [
          {
            "node": "Personalize Using Gemini",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Personalize Using Gemini",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Personalize Using Gemini": {
      "main": [
        [
          {
            "node": "Send Email to Client",
            "type": "main",
            "index": 0
          },
          {
            "node": "Execution Completed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract and Structure Client Data": {
      "main": [
        [
          {
            "node": "Client Checklist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger on New Client Form Submission": {
      "main": [
        [
          {
            "node": "Extract and Structure Client Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}