{
  "id": "TXzwSeIj2lNw8Pr7",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Smart Email Draft Generator",
    "wechat": "youandme10086",
    "id": 5196,
    "update_time": "2025-11-10"
  },
  "name": "Smart Email Draft Generator",
  "tags": [],
  "nodes": [
    {
      "id": "2f4d2db0-f825-4064-b9c4-059570ca28e8",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        840,
        -20
      ],
      "parameters": {
        "content": "This workflow triggers from Mail (IMAP), processes text with Basic LLM or Ollama Model, sets up an email field, and saves it as a draft."
      },
      "typeVersion": 1
    },
    {
      "id": "8cc89e3d-ab69-4c3e-8753-ef79a105fd62",
      "name": "Check New Email (IMAP)",
      "type": "n8n-nodes-base.emailReadImap",
      "position": [
        500,
        220
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "imap": {
          "id": "D3nLrSlP1dHWcIDE",
          "name": "IMAP account"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "d4098fe8-b946-441a-8f7d-1aada1cb6625",
      "name": "Process Email with AI",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        700,
        220
      ],
      "parameters": {
        "text": "={{ $json.textPlain }}",
        "messages": {
          "messageValues": [
            {
              "message": "=this is email\n\n{{ $json.textPlain }}\n\ni need reply of this "
            }
          ]
        },
        "promptType": "define"
      },
      "typeVersion": 1.6
    },
    {
      "id": "1bb72900-6d50-449a-bf8a-49cbeb0cfc86",
      "name": "Custom AI Model",
      "type": "@n8n/n8n-nodes-langchain.lmOllama",
      "position": [
        700,
        420
      ],
      "parameters": {
        "model": "llama3.2-16000:latest",
        "options": {}
      },
      "credentials": {
        "ollamaApi": {
          "id": "h9CEBFmYALm3FvZf",
          "name": "Ollama account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "2308c0c8-c232-4560-b120-598addd7e4c5",
      "name": "Prepare Email Content",
      "type": "n8n-nodes-base.set",
      "position": [
        1100,
        220
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "7d428c48-4809-45d8-ba1e-c96d68c02c07",
              "name": "from",
              "type": "string",
              "value": "={{ $('Check New Email (IMAP)').first().json.from }}"
            },
            {
              "id": "63b99545-3d2d-4563-b9d7-078cbc20dbcc",
              "name": "subject",
              "type": "string",
              "value": "=Re: {{ $('Check New Email (IMAP)').first().json.subject }}"
            },
            {
              "id": "11d94d3f-2170-4b54-b5f9-b85bb95ad472",
              "name": "text",
              "type": "string",
              "value": "={{ $json.text }} "
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "f2c81d97-0b15-4fbb-a050-4f2750b1af9c",
      "name": "Save as Gmail Draft",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1320,
        220
      ],
      "webhookId": "18c29d10-9bf5-4678-b6ba-c93ed6865317",
      "parameters": {
        "message": "={{ $json.text }}",
        "options": {},
        "subject": "={{ $json.subject }}",
        "resource": "draft"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "by23DyfIoJ8iWfSI",
          "name": "Gmail account"
        }
      },
      "typeVersion": 2.1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "66359f5c-1ada-4470-bc27-4796360c2fe8",
  "connections": {
    "Custom AI Model": {
      "ai_languageModel": [
        [
          {
            "node": "Process Email with AI",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Save as Gmail Draft": {
      "main": [
        []
      ]
    },
    "Prepare Email Content": {
      "main": [
        [
          {
            "node": "Save as Gmail Draft",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Email with AI": {
      "main": [
        [
          {
            "node": "Prepare Email Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check New Email (IMAP)": {
      "main": [
        [
          {
            "node": "Process Email with AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}