{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Tracking Cold Email Engagement Metrics using Smartlead and Google Sheets",
    "wechat": "youandme10086",
    "id": 7710,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "6c683cf8-6c56-4891-816a-79207b1e0ebb",
      "name": "Schedule Trigger2",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        1040,
        480
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours"
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "804456e5-05df-4512-9129-4a9ca7c852e1",
      "name": "HTTP Request7",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1744,
        480
      ],
      "parameters": {
        "url": "=https://server.smartlead.ai/api/v1/campaigns/your_campaign_id/statistics?",
        "options": {
          "pagination": {}
        },
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "your api key"
            },
            {
              "name": "offset",
              "value": "={{ $json.offset }}"
            },
            {
              "name": "limit",
              "value": "={{ $json.limit }}"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "ceed6469-52f1-4a32-927c-213fd3dd806f",
      "name": "Append or update row in sheet7",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        2224,
        480
      ],
      "parameters": {
        "columns": {
          "value": {
            "stats_id": "={{ $json.stats_id }}",
            "lead_name": "={{ $json.lead_name }}",
            "open_time": "={{ $json.open_time }}",
            "sent_time": "={{ $json.sent_time }}",
            "click_time": "={{ $json.click_time }}",
            "is_bounced": "={{ $json.is_bounced }}",
            "lead_email": "={{ $json.lead_email }}",
            "open_count": "={{ $json.open_count }}",
            "reply_time": "={{ $json.reply_time }}",
            "click_count": "={{ $json.click_count }}",
            "email_subject": "={{ $json.email_subject }}",
            "lead_category": "={{ $json.lead_category }}",
            "seq_variant_id": "={{ $json.seq_variant_id }}",
            "is_unsubscribed": "={{ $json.is_unsubscribed }}",
            "sequence_number": "={{ $json.sequence_number }}",
            "email_campaign_seq_id": "={{ $json.email_campaign_seq_id }}"
          },
          "schema": [
            {
              "id": "Linkedin",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "Linkedin",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "lead_name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "lead_name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "lead_email",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "lead_email",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "lead_category",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "lead_category",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "sequence_number",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "sequence_number",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "stats_id",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "stats_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "email_campaign_seq_id",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "email_campaign_seq_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "seq_variant_id",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "seq_variant_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "email_subject",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "email_subject",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "sent_time",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "sent_time",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "open_time",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "open_time",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "click_time",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "click_time",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "reply_time",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "reply_time",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "open_count",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "open_count",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "click_count",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "click_count",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "is_unsubscribed",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "is_unsubscribed",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "is_bounced",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "is_bounced",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "stats_id"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        },
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 1154787797,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1U8CC_vlv80vZeeDJc41YTEiWA-efikXBur6XDurtQoQ/edit#gid=1154787797",
          "cachedResultName": "EngagedLeads"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1U8CC_vlv80vZeeDJc41YTEiWA-efikXBur6XDurtQoQ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1U8CC_vlv80vZeeDJc41YTEiWA-efikXBur6XDurtQoQ/edit?usp=drivesdk",
          "cachedResultName": "Email Analytics"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "b8b3df0e-e003-4713-aa7c-69e1dd82e8d1",
      "name": "Split Out7",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        1904,
        480
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "data"
      },
      "typeVersion": 1
    },
    {
      "id": "8db2cb5f-dfe7-4020-a746-644dc2c68ca9",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        976,
        224
      ],
      "parameters": {
        "width": 1572,
        "height": 488,
        "content": "### **Update Engaged Leads Stats**\n\nBefore running the workflow, make sure to:  \n- Update the **`campaign_id`** with your Smartlead campaign’s ID.  \n- Add your **Smartlead API key** in the HTTP Request node.  \n- Connect your **Google Sheets** credentials.  \n\nOnce configured, the workflow will automatically fetch **lead-level sequence analytics** — showing how many times each lead opened, clicked, or replied to your email sequences.  \n\nThis helps you understand **how engaged your leads are with your content** and identify which sequences are performing best.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "f7b5353a-7c0e-45f9-b097-968a310ff7ba",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        1504,
        480
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3
    },
    {
      "id": "f4a2b0a5-dfd4-435a-9ae5-766104f48dfe",
      "name": "Code4",
      "type": "n8n-nodes-base.code",
      "position": [
        1264,
        480
      ],
      "parameters": {
        "jsCode": "const times = 100; // <-- X times you want to loop\nconst limit = 100;\n\nconst results = [];\nfor (let i = 0; i < times; i++) {\n  results.push({\n    json: {\n      offset: i * limit,\n      limit,\n    }\n  });\n}\n\nreturn results;\n"
      },
      "typeVersion": 2
    }
  ],
  "pinData": {},
  "connections": {
    "Code4": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out7": {
      "main": [
        [
          {
            "node": "Append or update row in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request7": {
      "main": [
        [
          {
            "node": "Split Out7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "HTTP Request7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger2": {
      "main": [
        [
          {
            "node": "Code4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet7": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}