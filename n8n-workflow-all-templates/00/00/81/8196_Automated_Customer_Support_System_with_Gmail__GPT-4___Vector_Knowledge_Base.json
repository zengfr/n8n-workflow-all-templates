{
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automated Customer Support System with Gmail, GPT-4 & Vector Knowledge Base",
    "wechat": "youandme10086",
    "id": 8196,
    "update_time": "2025-11-10"
  },
  "nodes": [
    {
      "id": "dff6847c-c448-484d-9d17-b56038cdbb48",
      "name": "Get Thread History",
      "type": "n8n-nodes-base.gmail",
      "position": [
        -1824,
        1808
      ],
      "webhookId": "b9d2f8fc-ba53-4fdb-a7df-b01c297ffb87",
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "6d7bcf76-5e0f-4c31-be1b-2eafee23e0d4",
      "name": "Process Thread History",
      "type": "n8n-nodes-base.code",
      "position": [
        -1648,
        1808
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "400f9dac-96ab-449d-be52-769f68f4ac9e",
      "name": "AI Analysis Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -1088,
        1984
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "33f40c6f-b611-47ad-b191-fc8580cdb0d9",
      "name": "Process AI Analysis",
      "type": "n8n-nodes-base.set",
      "position": [
        -720,
        1984
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "89979abb-b901-435a-a0c4-f730ed4bfa67",
      "name": "Needs Escalation?",
      "type": "n8n-nodes-base.if",
      "position": [
        -304,
        1984
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "a9668608-2076-4149-adb0-4f7a93c679c9",
      "name": "Send Automated Reply",
      "type": "n8n-nodes-base.gmail",
      "position": [
        0,
        1808
      ],
      "webhookId": "fed72075-afad-49e2-a0c9-4421b72d133a",
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "166db4bd-1247-45a5-99f2-e32f4059bfa7",
      "name": "Log Ticket to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        528,
        1984
      ],
      "parameters": {},
      "typeVersion": 4.4
    },
    {
      "id": "29592047-bfaa-4933-bea5-c80e0e5665f1",
      "name": "Send Status Update",
      "type": "n8n-nodes-base.telegram",
      "position": [
        768,
        1984
      ],
      "webhookId": "3c149149-0585-4c0c-8664-b307356652bc",
      "parameters": {},
      "executeOnce": true,
      "typeVersion": 1.2
    },
    {
      "id": "4e85fdfb-6b40-418a-a7d4-2475d0a6b7f3",
      "name": "Gmail Trigger1",
      "type": "n8n-nodes-base.gmailTrigger",
      "position": [
        -2416,
        1984
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "1272297d-6f1e-49b6-b04c-6e2d1078ee07",
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -1136,
        2192
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "e1287b4b-770e-489f-8f7b-3d6cbc7bdc19",
      "name": "Qdrant Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "position": [
        -960,
        2192
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "c358ab1b-cb29-4a8f-8718-a9896b4440d1",
      "name": "Embeddings Mistral Cloud",
      "type": "@n8n/n8n-nodes-langchain.embeddingsMistralCloud",
      "position": [
        -960,
        2320
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "87ba9f81-ad93-41b2-bc1d-cd0040f3d206",
      "name": "Filter New Customer Emails",
      "type": "n8n-nodes-base.if",
      "position": [
        -2000,
        1984
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "1b701c63-89c7-4ac6-bbec-745bf99a37a6",
      "name": "Extract Email Data",
      "type": "n8n-nodes-base.set",
      "position": [
        -2224,
        1984
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "f71fd648-15df-433e-a2e4-ba51e5f1fdf3",
      "name": "AI Analysis Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -544,
        2544
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "b6ab5fcd-0093-494b-93aa-76e574871b32",
      "name": "Process AI Analysis1",
      "type": "n8n-nodes-base.set",
      "position": [
        -176,
        2544
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "dad6b53e-cd97-448e-96eb-8751b2c72cc3",
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -608,
        2752
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "6c30cdd7-248a-4aca-a29a-9ee3014e7b74",
      "name": "Qdrant Vector Store1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "position": [
        -496,
        2768
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "99d791ae-7fba-4a24-b5a8-65a18dc34548",
      "name": "Embeddings Mistral Cloud1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsMistralCloud",
      "position": [
        -464,
        2944
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "a7f0f0c8-77b8-4b1e-bc17-8aa6d77004e2",
      "name": "Structured Output Parser1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        -256,
        2720
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "c17395d1-26ea-4097-98e6-39830febe824",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -880,
        2448
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "7501e27e-cdb7-46fa-938f-83d1105857fa",
      "name": "Needs Human Review Label",
      "type": "n8n-nodes-base.gmail",
      "position": [
        80,
        2112
      ],
      "webhookId": "19e98ea6-9d91-460a-8c3a-5ed7601e5463",
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "6b89232a-e6f1-455a-b2da-51829d0cdb5f",
      "name": "Auto Resolved Label",
      "type": "n8n-nodes-base.gmail",
      "position": [
        304,
        1808
      ],
      "webhookId": "19e98ea6-9d91-460a-8c3a-5ed7601e5463",
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "1de2ebce-9b6e-402a-8653-21b2e1fb0956",
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "position": [
        -1456,
        1808
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "a5ded5ae-ce8f-4d7c-ab5c-4ecbbd19ead5",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -528,
        1984
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "c2c9d1d2-78cc-4342-abe8-55a40c3d1c77",
      "name": "Edit Fields1",
      "type": "n8n-nodes-base.set",
      "position": [
        -1328,
        1984
      ],
      "parameters": {},
      "typeVersion": 3.4
    },
    {
      "id": "92ecd5f5-0324-4139-8065-549dfeeddf3f",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -2416,
        2736
      ],
      "webhookId": "5aa2c420-a473-4422-8128-b2861c0f0e9c",
      "parameters": {},
      "typeVersion": 2.2
    },
    {
      "id": "25557f12-f0ca-4412-b069-a8acafe28563",
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "position": [
        -1712,
        2912
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "624b7d08-9f53-4e7a-8d28-86cb03ea1d0e",
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "position": [
        -1696,
        3072
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "4a588f35-5bc1-42f1-811d-6efe27fc1803",
      "name": "create collection1",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueRegularOutput",
      "disabled": true,
      "position": [
        -2160,
        2528
      ],
      "parameters": {},
      "typeVersion": 4.2,
      "alwaysOutputData": true
    },
    {
      "id": "db044436-a22a-409e-940e-5863d7d177a2",
      "name": "Qdrant Vector Store2",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "position": [
        -1856,
        2736
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "aa3f2a30-b780-4317-8884-a2e3c7da6952",
      "name": "Embeddings Mistral Cloud2",
      "type": "@n8n/n8n-nodes-langchain.embeddingsMistralCloud",
      "position": [
        -1888,
        2912
      ],
      "parameters": {},
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Aggregate": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Needs Escalation?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "AI Analysis Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger1": {
      "main": [
        [
          {
            "node": "Extract Email Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Analysis Agent": {
      "main": [
        [
          {
            "node": "Process AI Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Needs Escalation?": {
      "main": [
        [
          {
            "node": "Needs Human Review Label",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Automated Reply",
            "type": "main",
            "index": 0
          },
          {
            "node": "Auto Resolved Label",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Analysis Agent1": {
      "main": [
        [
          {
            "node": "Process AI Analysis1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Email Data": {
      "main": [
        [
          {
            "node": "Filter New Customer Emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Thread History": {
      "main": [
        [
          {
            "node": "Process Thread History",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "create collection1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Qdrant Vector Store2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Analysis Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Analysis Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Auto Resolved Label": {
      "main": [
        [
          {
            "node": "Log Ticket to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process AI Analysis": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "Qdrant Vector Store2",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store1": {
      "ai_tool": [
        [
          {
            "node": "AI Analysis Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Send Automated Reply": {
      "main": [
        [
          {
            "node": "Log Ticket to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Thread History": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Mistral Cloud": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Needs Human Review Label": {
      "main": [
        [
          {
            "node": "Log Ticket to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Mistral Cloud1": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Mistral Cloud2": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "AI Analysis Agent1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Filter New Customer Emails": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Thread History",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log Ticket to Google Sheets": {
      "main": [
        [
          {
            "node": "Send Status Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader1",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    }
  }
}