{
  "id": "fFfhgyxWDNWQCUtY",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Automate Instagram Content Discovery & Repurposing w/ Apify, GPT-4o & Perplexity",
    "wechat": "youandme10086",
    "id": 4658,
    "update_time": "2025-11-10"
  },
  "name": "Apify Scrape New Instagram Reels -> Transcribe -> Add to Sheet",
  "tags": [
    {
      "id": "l8MPK4ZirgwFWMno",
      "name": "N8N Course",
      "createdAt": "2025-01-23T18:12:52.273Z",
      "updatedAt": "2025-01-23T18:12:52.273Z"
    }
  ],
  "nodes": [
    {
      "id": "sticky-note-1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        180,
        -280
      ],
      "parameters": {
        "width": 350,
        "height": 200,
        "content": "## üéØ STEP 1: Instagram Content Discovery\n\nThis node uses Apify to scrape Instagram reels from competitor accounts. Replace <your-apify-api-key-here> with your actual API key.\n\n**Key Setup:**\n- Add your target Instagram usernames to the JSON body\n- Adjust resultsLimit (5 = latest 5 reels per account)\n- Monitor accounts in your niche for trending content"
      },
      "typeVersion": 1
    },
    {
      "id": "sticky-note-2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        600,
        -320
      ],
      "parameters": {
        "width": 380,
        "height": 180,
        "content": "## üîç STEP 2: Smart Duplicate Prevention\n\nThis section prevents processing the same content twice:\n\n1. **Search for Entries**: Checks if reel ID already exists in database\n2. **Drop Duplicates**: Removes already-processed content using merge logic\n3. **Add Entries**: Only adds genuinely new content to Google Sheets\n\n**Critical**: The merge node compares IDs and keeps only non-matches (new content)"
      },
      "typeVersion": 1
    },
    {
      "id": "sticky-note-3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1400,
        -320
      ],
      "parameters": {
        "width": 400,
        "height": 200,
        "content": "## üß† STEP 3: AI-Powered Content Analysis\n\nThe AI pipeline processes each reel:\n\n1. **Transcribe Video**: Uses OpenAI Whisper to extract text from videos\n2. **Filter & Generate**: GPT-4o identifies tools/technologies and creates step-by-step guides\n3. **Search Perplexity**: Researches additional insights about discovered tools\n4. **Write New Script**: Generates original, optimized scripts for your audience\n\n**Result**: Transform competitor content into unique, valuable scripts for your channel"
      },
      "typeVersion": 1
    },
    {
      "id": "sticky-note-4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2400,
        -280
      ],
      "parameters": {
        "width": 350,
        "height": 160,
        "content": "## üìã STEP 4: Database Updates\n\nFinal step saves everything back to Google Sheets:\n\n**Update Entries**: Adds the original transcript and newly generated script to your database for future reference and analysis.\n\n**Note**: This creates a complete content intelligence database where you can track:\n- Which content performed best\n- What tools were most popular\n- Script variations and improvements"
      },
      "typeVersion": 1
    },
    {
      "id": "c55c87f0-868c-4d3a-a0ca-43cc7191cb32",
      "name": "Run Actor Synchronously",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        220,
        0
      ],
      "parameters": {
        "url": "https://api.apify.com/v2/acts/xMc5Ga1oCONPmWJIa/run-sync-get-dataset-items",
        "method": "POST",
        "options": {
          "redirect": {
            "redirect": {}
          }
        },
        "jsonBody": "{\n  \"resultsLimit\": 5,\n  \"username\": [\n    \"nick_saraev\",\n    \"juliangoldieseo\",\n    \"brand.nat\",\n    \"realrileybrown\",\n    \"hamza_automates\",\n    \"100xengineers\",\n    \"mattfarmerai\",\n    \"nathanhodgson.ai\",\n    \"theaisurfer\",\n    \"shedoesai\",\n    \"aitrendz.xyz\",\n    \"thevarunmayya\",\n    \"rohak_arya\",\n    \"digitalsamaritan\"\n  ]\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer YOUR_TOKEN_HERE"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "df030281-6513-45a2-9c72-b1e59ee4c4b6",
      "name": "Limit",
      "type": "n8n-nodes-base.limit",
      "position": [
        440,
        0
      ],
      "parameters": {
        "keep": "lastItems",
        "maxItems": 2
      },
      "typeVersion": 1
    },
    {
      "id": "8a0ea140-f361-4208-be52-c1dcb91270a7",
      "name": "Filter & Generate Suggestions",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1620,
        0
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You are a helpful, intelligent admin assistant."
            },
            {
              "content": "I run an AI & automation Instagram channel. I'm looking through news archives to find mentions of tools that I can repurpose into content for my channel.\n\nYour task is to take as input a transcript of a news archive, and then determine if the transcription is about a tool, a technology, or AI.\n\nIf so, you'll identify the tools, then write a list of step-by-step instructions to use the tool easily (ideally for free or for low cost), and one suggestion on exactly how to make this content more palatable to an AI automation audience.\n\nReturn your output in JSON using this format:\n\n{\n  \"verdict\":\"true or false\",\n  \"tools\":[\"list\",\"of\",\"tools\",\"or\",\"resources\"],\n  \"stepByStep\":\"Detailed instructions on how to use the tool(s).\",\n  \"suggestion\":\"Comprehensive, in-depth suggestions on how to make this content more interesting and palatable to my audience (AI automation).\",\n  \"searchPrompt\":\"A short search prompt we'll use to look up the service. Write it like '{toolName}, the {typeOfTool}'\"\n}\n\nIf verdict is \"false\", leave the rest of the fields empty."
            },
            {
              "content": "={\"transcript\":\"{{ $json.text }}\"}"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "kRhXLl2JwVGc05AE",
          "name": "YouTube_Feb 4"
        }
      },
      "typeVersion": 1.6
    },
    {
      "id": "8dbcc1b2-2bc7-4d4f-bc38-8f2b6384abcf",
      "name": "Search for Entries",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        640,
        -160
      ],
      "parameters": {
        "options": {},
        "filtersUI": {
          "values": [
            {
              "lookupValue": "={{ $json.id }}",
              "lookupColumn": "id"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit#gid=0",
          "cachedResultName": "Reels"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit?usp=drivesdk",
          "cachedResultName": "Instagram Reel Database"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "EOibXIc4U8wcXyRR",
          "name": "YouTube"
        }
      },
      "typeVersion": 4.5,
      "alwaysOutputData": false
    },
    {
      "id": "e2b81a84-6724-4757-8991-a62610943ea0",
      "name": "Drop Duplicates",
      "type": "n8n-nodes-base.merge",
      "position": [
        820,
        0
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "joinMode": "keepNonMatches",
        "fieldsToMatchString": "id"
      },
      "typeVersion": 3
    },
    {
      "id": "a2650df2-9375-40ec-9ede-115cd692c9ca",
      "name": "Add Entries",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1020,
        0
      ],
      "parameters": {
        "columns": {
          "value": {
            "id": "={{ $json.id }}",
            "url": "={{ $json.url }}",
            "caption": "={{ $json.caption }}",
            "hashtags": "={{ $json.hashtags }}",
            "username": "={{ $json.ownerUsername }}",
            "videoUrl": "={{ $json.videoUrl }}",
            "shortCode": "={{ $json.shortCode }}",
            "timestamp": "={{ $json.timestamp }}",
            "displayUrl": "={{ $json.displayUrl }}",
            "likesCount": "={{ $json.likesCount }}",
            "firstComment": "={{ $json.firstComment }}",
            "commentsCount": "={{ $json.commentsCount }}",
            "videoDuration": "={{ $json.videoDuration }}",
            "videoPlayCount": "={{ $json.videoPlayCount }}",
            "videoViewCount": "={{ $json.videoViewCount }}"
          },
          "schema": [
            {
              "id": "timestamp",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "timestamp",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "id",
              "defaultMatch": true,
              "canBeUsedToMatch": true
            },
            {
              "id": "shortCode",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "shortCode",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "caption",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "caption",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "hashtags",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "hashtags",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "url",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "url",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "commentsCount",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "commentsCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "firstComment",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "firstComment",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "displayUrl",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "displayUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoUrl",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "videoUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "likesCount",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "likesCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoViewCount",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "videoViewCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoPlayCount",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "videoPlayCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "username",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "username",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoDuration",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "videoDuration",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "scrapedTranscript",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "scrapedTranscript",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "newTranscript",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "newTranscript",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "inputUrl",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "inputUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "mentions",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "mentions",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "latestComments",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "latestComments",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "dimensionsHeight",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "dimensionsHeight",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "dimensionsWidth",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "dimensionsWidth",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "images",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "images",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "alt",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "alt",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "childPosts",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "childPosts",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerFullName",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerFullName",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerUsername",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerUsername",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerId",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerId",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "productType",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "productType",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "isSponsored",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "isSponsored",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "musicInfo",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "musicInfo",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "id"
          ]
        },
        "options": {},
        "operation": "append",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit#gid=0",
          "cachedResultName": "Reels"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit?usp=drivesdk",
          "cachedResultName": "Instagram Reel Database"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "EOibXIc4U8wcXyRR",
          "name": "YouTube"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "d5f3e37e-af9f-4eee-b184-67104708539b",
      "name": "Download Video",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1240,
        0
      ],
      "parameters": {
        "url": "={{ $json.videoUrl }}",
        "options": {}
      },
      "typeVersion": 4.2
    },
    {
      "id": "be8bc4fc-de39-41e4-bdda-fa6988b4db71",
      "name": "Transcribe Video",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        1440,
        0
      ],
      "parameters": {
        "options": {},
        "resource": "audio",
        "operation": "transcribe"
      },
      "credentials": {
        "openAiApi": {
          "id": "oLLACDYfGm4C4ouV",
          "name": "YouTube "
        }
      },
      "typeVersion": 1.6
    },
    {
      "id": "71217539-540a-447d-9890-76b2b6b32986",
      "name": "Search Perplexity",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1980,
        0
      ],
      "parameters": {
        "url": "https://api.perplexity.ai/chat/completions",
        "method": "POST",
        "options": {
          "redirect": {
            "redirect": {}
          }
        },
        "jsonBody": "={\n  \"model\": \"sonar-pro\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Be precise and concise.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Tell me three interesting (peculiar) things about {{ $json.message.content.searchPrompt }}\"\n    }\n  ]\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer <your-perplexity-api-key-here>"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "3c8706bb-6796-4b02-83a8-b8e39e6e91dd",
      "name": "Write New Script",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        2180,
        0
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {
          "temperature": 0.7
        },
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You are a helpful, intelligent writing assistant."
            },
            {
              "content": "I run an AI & automation Instagram channel.\n\nMy editors would like to make a new video. They've found an interesting tool or technology, compiled a step-by-step guide on how to use it, done some searching on the Internet to find some interesting things about it, wrote a rough draft about it, and we also had our chief editor write concrete suggestions for how to make the content better.\n\nYour task is to take as input all of these things, and then write a new, high quality script for us to feature.\n\nReturn your output in JSON using this format:\n\n{\n  \"script\":\"Your script goes here (~100 words).\n}\n\nRules:\n- Use a casual, spartan tone of voice. No frills. Be straightforward, and don't use poetic language.\n- End the script with a call to action like \"Want {thing}? Just comment {keyword} and I'll send it straight to your DMs\",\n- Add newlines as \\n between sentences."
            },
            {
              "content": "={\n  \"toolNames\":\"Speechma\",\n  \"roughDraftScript\":\"Hey there. So, I just wanted to let you know about a AI text-to-speech generator that has recently become available. It‚Äôs doesn‚Äôt cost anything at all.\\n\\nIt has a lot of voices! And the best part is you don‚Äôt need to sign up for an account in order to use it.\\n\\nThe process is really simple, too. You just go the site and type whatever you want converted into speech. There are lots of voices as well.\\n\\nIf this sounds interesting to you, I‚Äôd highly recommend giving it a try for yourself. Just leave a comment saying \"texttospeech,\" and I‚Äôll make sure to send you the link so you can check it out firsthand.\",\n  \"perplexityOutput\": \"Here are three interesting things about Speechma, the AI text-to-speech tool:\\n\\n1. Speechma offers over 400 premium AI voices for text-to-speech conversion, allowing users to find the perfect voice for any project[1].\\n\\n2. The platform provides unlimited free usage with no restrictions on the number of conversions, which is unusual for a premium text-to-speech service[1].\\n\\n3. Speechma grants users commercial rights to use the generated audio for any purpose, including YouTube videos, TikTok content, and business presentations[1].\",\n  \"stepByStepGuide\":\"1. Visit the Speechma website.\\n2. Enter or paste your text into the provided text box.\\n3. Browse through the available 400+ voices and select one that fits your needs.\\n4. Choose the desired language from the 60 supported options.\\n5. Click the 'Generate' button to create your AI-generated speech.\\n6. Download or use your AI-generated speech as needed for projects like YouTube videos or TikToks.\",\n  \"suggestionsForImprovement\":\"Create a short tutorial video showing how to use Speechma, emphasizing its free nature and ease of use. Highlight its unlimited features and vast voice selection. Consider doing a voice comparison test using Speechma versus other popular tools. Discuss potential use cases such as content creation for social media, especially focusing on platforms like Instagram and TikTok, highlighting the benefit of rapid content creation using AI automation.\"\n}"
            },
            {
              "role": "assistant",
              "content": "={\n  \"script\":\"Hey‚Äîthere‚Äôs a completely new AI text to speech generator that‚Äôs just as good as ElevenLabs, but FREE.\\nIt allows you to choose from over 400 voices, it supports 60 languages, and it‚Äôs all completely unlimited with no signup required.\\nJust head over to this website\\nPaste your text\\nChoose one of the voices\\nAnd click generate\\nThat‚Äôs it! Your AI speech is now ready to use.\\nYou can use this voice for YouTube videos, TikToks, or whatever you like.\\nSo go try it yourself.\\nJust Comment \"speech\" and I‚Äôll share the link with you.\"\n}"
            },
            {
              "content": "={\n  \"toolNames\":\"{{ $('Filter & Generate Suggestions').item.json.message.content.tools.join() }}\",\n  \"roughDraftScript\":\"{{ $('Transcribe Video').all().first().json.text }}\",\n  \"perplexityOutput\": \"{{ $json.choices[0].message.content }}\",\n  \"stepByStepGuide\":\"{{ $('Filter & Generate Suggestions').item.json.message.content.stepByStep }}\",\n  \"suggestionsForImprovement\":\"{{ $('Filter & Generate Suggestions').item.json.message.content.suggestion }}\"\n}"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "kRhXLl2JwVGc05AE",
          "name": "YouTube_Feb 4"
        }
      },
      "typeVersion": 1.6
    },
    {
      "id": "c2e95c8b-cd40-45fd-9b4a-3c7a3c2c35c0",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        20,
        0
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 6
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "c91557c0-1051-42bd-bdbb-484995bdda84",
      "name": "Update Entries",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        2540,
        0
      ],
      "parameters": {
        "columns": {
          "value": {
            "id": "={{ $('Add Entries').item.json.id }}",
            "newTranscript": "={{ $json.message.content.script }}",
            "scrapedTranscript": "={{ $('Transcribe Video').item.json.text }}"
          },
          "schema": [
            {
              "id": "timestamp",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "timestamp",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "id",
              "defaultMatch": true,
              "canBeUsedToMatch": true
            },
            {
              "id": "shortCode",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "shortCode",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "caption",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "caption",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "hashtags",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "hashtags",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "url",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "url",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "commentsCount",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "commentsCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "firstComment",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "firstComment",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "displayUrl",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "displayUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoUrl",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "videoUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "likesCount",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "likesCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoViewCount",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "videoViewCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoPlayCount",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "videoPlayCount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "username",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "username",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "videoDuration",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "videoDuration",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "scrapedTranscript",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "scrapedTranscript",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "newTranscript",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "newTranscript",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "inputUrl",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "inputUrl",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "mentions",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "mentions",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "latestComments",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "latestComments",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "dimensionsHeight",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "dimensionsHeight",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "dimensionsWidth",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "dimensionsWidth",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "images",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "images",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "alt",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "alt",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "childPosts",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "childPosts",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerFullName",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerFullName",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerUsername",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerUsername",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "ownerId",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "ownerId",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "productType",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "productType",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "isSponsored",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "isSponsored",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "musicInfo",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "musicInfo",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "id"
          ]
        },
        "options": {},
        "operation": "update",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit#gid=0",
          "cachedResultName": "Reels"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e1yIubmEXzzUrSCurXdXM2H6ioN2GEb1aOX5UBNNyik/edit?usp=drivesdk",
          "cachedResultName": "Instagram Reel Database"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "EOibXIc4U8wcXyRR",
          "name": "YouTube"
        }
      },
      "typeVersion": 4.5
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e5bf6014-38f0-43a2-be34-025e4291f0b7",
  "connections": {
    "Limit": {
      "main": [
        [
          {
            "node": "Search for Entries",
            "type": "main",
            "index": 0
          },
          {
            "node": "Drop Duplicates",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Add Entries": {
      "main": [
        [
          {
            "node": "Download Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Video": {
      "main": [
        [
          {
            "node": "Transcribe Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Drop Duplicates": {
      "main": [
        [
          {
            "node": "Add Entries",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Run Actor Synchronously",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcribe Video": {
      "main": [
        [
          {
            "node": "Filter & Generate Suggestions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write New Script": {
      "main": [
        [
          {
            "node": "Update Entries",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Perplexity": {
      "main": [
        [
          {
            "node": "Write New Script",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search for Entries": {
      "main": [
        [
          {
            "node": "Drop Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run Actor Synchronously": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter & Generate Suggestions": {
      "main": [
        [
          {
            "node": "Search Perplexity",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}