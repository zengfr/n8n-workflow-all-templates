{
  "id": "0qDhUTSyRmBi8kf1",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Cold Email Icebreakers from Local Business Search with GPT-4 and Dumpling AI",
    "wechat": "youandme10086",
    "id": 6156,
    "update_time": "2025-11-10"
  },
  "name": "Cold Email Icebreakers from Local Business Search with GPT-4 and Dumpling AI",
  "tags": [],
  "nodes": [
    {
      "id": "5d586469-2b68-4eca-9d1b-123382c7df53",
      "name": "Form: Submit Search Keyword",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -360,
        -20
      ],
      "webhookId": "db2ca5f4-62f3-412a-b052-3292212ca865",
      "parameters": {
        "options": {},
        "formTitle": "Keyword",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Keyword"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "25aa6db4-b732-488b-aa62-17512b364e6b",
      "name": "Dumpling AI: Search Google Maps for Businesses",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -140,
        -20
      ],
      "parameters": {
        "url": "https://app.dumplingai.com/api/v1/search-maps",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"query\": \"{{$json.Keyword}}\",\n  \"page\": \"\"\n}\n",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "RLFzAcGRepr5eXZB",
          "name": "Dumpling AI-n8n"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "f1f7cb08-4b00-4552-b7bc-7bd1d74f8268",
      "name": "üßÆ Split: Extract Individual Places",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        80,
        -20
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "places"
      },
      "typeVersion": 1
    },
    {
      "id": "944774ac-686d-40d5-b0f1-8d075367347f",
      "name": "üîÅ Loop: Process Each Business",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        300,
        -20
      ],
      "parameters": {
        "options": {},
        "batchSize": 2
      },
      "typeVersion": 3
    },
    {
      "id": "d6a3f852-bd40-4c31-92c5-c580cc9338be",
      "name": "üß† Dumpling AI: Extract Email + Website Summary",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueRegularOutput",
      "position": [
        480,
        100
      ],
      "parameters": {
        "url": "https://app.dumplingai.com/api/v1/extract",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"url\": \"{{ $json.website }}\",\n  \"schema\": {\n    \"email\": \"string\",\n    \"websiteSummary\": \"string\"\n  }\n}\n",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "RLFzAcGRepr5eXZB",
          "name": "Dumpling AI-n8n"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "bebe9509-1162-418c-8a04-1f4ec9bee0de",
      "name": "‚úçÔ∏è GPT-4: Write Personalized Icebreaker Email",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        720,
        100
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "GPT-4O"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "=Prompt:\n\nYou are a Digital Marketing Specialist writing personalized ice breaker outreach emails.\n\nUsing the information provided below, write a short, friendly, and professional ice breaker message that shows genuine interest in the business and naturally opens the conversation to offer digital marketing help without sounding salesy or generic. The tone should be warm and customized to each business based on what they do.\n\nYour goal is to:\n\nMention something specific about the business using the website summary or keywords\n\nMake it sound like a real person wrote it, not a copy-paste email\n\nGently introduce your digital marketing agency as a potential support partner\n\n\nOutput:\nA short, 4-6 sentence email that:\n\nStarts with a warm ice breaker referencing something specific about the business\n\nExpresses genuine curiosity or admiration for what they do\n\nIntroduces you as someone who runs a digital marketing agency\n\nOpens the door for a conversation without being pushy\n\nExample Format:\n\nHi [First Name or Business Name],\n\nI came across [Business Name] while researching businesses that [reference from keywords or summary], and I was genuinely impressed by [insert insight from website summary]. It‚Äôs clear you're doing something meaningful in your space.\n\nI run a digital marketing agency that helps businesses like yours get even more visibility and drive consistent leads online. I‚Äôd love to explore how we might support your growth goals.\n\nWould it be okay if I shared a few ideas?"
            },
            {
              "content": "=Input:\n\nBusiness Name: {{ $('üßÆ Split: Extract Individual Places').item.json.title }}\n\nKeywords:{{ $('üßÆ Split: Extract Individual Places').item.json.types[1] }}  \n{{ $('üßÆ Split: Extract Individual Places').item.json.types[0] }}\n\nWebsite Summary: {{ $json.results.websiteSummary }}"
            }
          ]
        }
      },
      "credentials": {
        "openAiApi": {
          "id": "dd8NvMC6rvx8RITo",
          "name": "OpenAi account 2"
        }
      },
      "executeOnce": true,
      "typeVersion": 1.8
    },
    {
      "id": "7ba29bb7-c99e-4e3e-98c8-ba4bef80fc64",
      "name": "‚úÖ IF: Email Exists",
      "type": "n8n-nodes-base.filter",
      "position": [
        1100,
        100
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "1cc31bf9-2bc4-4fc3-932e-44d08697cd7a",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              },
              "leftValue": "={{ $('üß† Dumpling AI: Extract Email + Website Summary').item.json.results.email }}",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "d299e441-4a1b-491e-880b-b13c78942e46",
      "name": "üìÑ Log to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1320,
        100
      ],
      "parameters": {
        "columns": {
          "value": {
            "Email": "={{ $('üß† Dumpling AI: Extract Email + Website Summary').item.json.results.email }}",
            "Phone": "={{ $('üßÆ Split: Extract Individual Places').item.json.phoneNumber }}",
            "Title": "={{ $('üßÆ Split: Extract Individual Places').item.json.title }}",
            "Ice Breaker": "={{ $json.message.content }}",
            "Website URL": "={{ $('üßÆ Split: Extract Individual Places').item.json.website }}",
            "Website Summary": "={{ $('üß† Dumpling AI: Extract Email + Website Summary').item.json.results.websiteSummary }}"
          },
          "schema": [
            {
              "id": "Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Ice Breaker",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Ice Breaker",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Website Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Website URL"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1GDIewE5xJMdRWlLJH_b8TnaoahTfRMBgc774VEl95wU/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1GDIewE5xJMdRWlLJH_b8TnaoahTfRMBgc774VEl95wU/edit?usp=drivesdk",
          "cachedResultName": "Cold email outreach"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "GaJqJHuS5mQxap7q",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "9dcf2513-c329-445f-9cdc-cdbceb8b25a5",
      "name": "üì§ Instantly API: Add to Campaign",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        640,
        -140
      ],
      "parameters": {
        "url": "https://api.instantly.ai/api/v1/lead/add",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "authentication": "genericCredentialType",
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "CampaignID"
            },
            {
              "name": "email",
              "value": "={{ $json.title }}"
            },
            {
              "name": "personalization",
              "value": "={{ $('‚úçÔ∏è GPT-4: Write Personalized Icebreaker Email').first().json.message.content }}"
            },
            {
              "name": "phone",
              "value": "={{ $('Dumpling AI: Search Google Maps for Businesses').first().json.places[1].phoneNumber }}"
            },
            {
              "name": "website",
              "value": "={{ $('Dumpling AI: Search Google Maps for Businesses').first().json.places[1].website }}"
            }
          ]
        },
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "Db4bdaRp3JlzPR3a",
          "name": "Instantly"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "9a7f63ba-c5fd-4406-8819-c13331ab025f",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -340,
        -360
      ],
      "parameters": {
        "width": 740,
        "height": 440,
        "content": "### ‚úâÔ∏è Cold Email Icebreaker Generator\n\nThis workflow:\n- Accepts a keyword (e.g. \"dentist in New York\")\n- Searches local businesses using Dumpling AI\n- Extracts website summaries and emails\n- Uses GPT-4 to write short, friendly icebreaker emails\n- Logs results to Google Sheets\n- Optionally adds leads to Instantly.ai campaigns\n\n‚úÖ Tools Used:\n- Dumpling AI\n- GPT-4\n- Google Sheets\n- Instantly.ai (optional)\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {
    "Form: Submit Search Keyword": [
      {
        "json": {
          "Keyword": "Dentist in New york",
          "formMode": "test",
          "submittedAt": "2025-07-18T10:33:34.824+10:00"
        }
      }
    ],
    "üß† Dumpling AI: Extract Email + Website Summary": [
      {
        "json": {
          "results": {
            "email": "info@209nycdental.com",
            "websiteSummary": "209 NYC Dental is a dental practice in New York City offering a variety of services, including general dentistry, cosmetic dentistry, implant dentistry, and periodontics. They have been in practice since 1887 and have a team of experienced dentists and staff. They offer a free consultation and financing options are available."
          },
          "screenshotUrl": "https://pub-1ff5a17124b34b658b5b75065b3a03e8.r2.dev/temp-bbc74f5f-750b-4af9-b8bf-3355f6bd9c92.png"
        }
      },
      {
        "json": {
          "results": {
            "email": null,
            "websiteSummary": "We are committed to providing quality healthcare to families located in the New York area and treat patients of all ages. We provide comprehensive solutions for our patients' oral health needs. Believing in the importance of listening to our patients, we take the time to truly understand each person's needs, goals, and lifestyle. By understanding our patients' objectives we can provide solutions that will improve their health while transforming their smile into something bright and beautiful.\n\nNew York Dental Office is located at 245 E 63rd St #110, New York, NY. We are currently accepting new patients, and you can schedule an appointment by calling 212-548-3261."
          },
          "screenshotUrl": "https://pub-1ff5a17124b34b658b5b75065b3a03e8.r2.dev/temp-6550bf47-d201-47e2-9278-fec56c2f9901.png"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "82424895-4ea4-4891-a151-6bfa542fdc2d",
  "connections": {
    "‚úÖ IF: Email Exists": {
      "main": [
        [
          {
            "node": "üìÑ Log to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìÑ Log to Google Sheets": {
      "main": [
        [
          {
            "node": "üîÅ Loop: Process Each Business",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Form: Submit Search Keyword": {
      "main": [
        [
          {
            "node": "Dumpling AI: Search Google Maps for Businesses",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÅ Loop: Process Each Business": {
      "main": [
        [
          {
            "node": "üì§ Instantly API: Add to Campaign",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "üß† Dumpling AI: Extract Email + Website Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üßÆ Split: Extract Individual Places": {
      "main": [
        [
          {
            "node": "üîÅ Loop: Process Each Business",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dumpling AI: Search Google Maps for Businesses": {
      "main": [
        [
          {
            "node": "üßÆ Split: Extract Individual Places",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚úçÔ∏è GPT-4: Write Personalized Icebreaker Email": {
      "main": [
        [
          {
            "node": "‚úÖ IF: Email Exists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üß† Dumpling AI: Extract Email + Website Summary": {
      "main": [
        [
          {
            "node": "‚úçÔ∏è GPT-4: Write Personalized Icebreaker Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}