{
  "id": "M7Yn4F1dlwkiUFNt",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Track Regional Sentiment from Social Media with Bright Data & OpenAI",
    "wechat": "youandme10086",
    "id": 5973,
    "update_time": "2025-11-10"
  },
  "name": "30  Track Regional Sentiment",
  "tags": [],
  "nodes": [
    {
      "id": "a1c3cd68-4f17-4b37-a65d-aa2708eb037d",
      "name": "ğŸ”˜ Trigger: Manual Execution",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -440,
        -100
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "45d63021-fdb1-449f-a588-fc1263d9ebd0",
      "name": "ğŸŒ Set Yelp URL (Weather Posts - Los Angeles)",
      "type": "n8n-nodes-base.set",
      "position": [
        -240,
        -100
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "01728220-5a24-45b8-aa1c-54d5ea541d7c",
              "name": "URL",
              "type": "string",
              "value": "https://www.yelp.com/search?find_desc=weather&find_loc=Los+Angeles%2C+CA%2C+United+States"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "254f2185-722c-4bf8-85e1-87a36ab88371",
      "name": "ğŸ’¬ AI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -60,
        160
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "kmqnyfHdWfA8k1KC",
          "name": "OpenAi account 3"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "8af55964-2e46-4bff-bcce-51a474e5acdc",
      "name": "ğŸŒ MCP Client: Scrape Weather Posts Data",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "position": [
        80,
        160
      ],
      "parameters": {
        "toolName": "scrape_as_markdown",
        "operation": "executeTool",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"
      },
      "credentials": {
        "mcpClientApi": {
          "id": "dGu6Ys11ijXSTxcV",
          "name": "MCP Client (STDIO) account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "fed36ea2-824e-4052-a58a-a6c9be121f8d",
      "name": "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        20,
        -100
      ],
      "parameters": {
        "text": "=You are a data extraction agent.\n\nScrape the following Yelp search page for weather-related content in Los Angeles:\n{{ $json.URL }}\n\nFor each business or post, extract the following details:\n\n- `business_name`: The name of the business or event.\n- `location`: The location of the business or event.\n- `rating`: The Yelp rating of the business.\n- `reviews_count`: The number of reviews the business has.\n- `post_text`: The description or content provided about the weather (if available).\n- `weather_related`: Any mention, problem, or fun of weather in the description or reviews (if available).\n\nAdditionally, perform **sentiment analysis** on the extracted weather-related text, and categorize the sentiment as **Positive**, **Negative**, or **Neutral**.\n\nBased on the sentiment, create a **tailored campaign** for each weather-related post:\n- **Positive Sentiment**: Recommend promoting **outdoor activities** or **sunny weather products** (e.g., sunscreen, sunglasses).\n- **Negative Sentiment**: Suggest offering **rain-related products**, **indoor activities**, or **solutions** (e.g., umbrellas, warm drinks).\n- **Neutral Sentiment**: Suggest promoting **general services** or **upcoming events**.\n\n",
        "options": {},
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 2
    },
    {
      "id": "56af8e64-3846-4002-b421-99e932cf22a2",
      "name": "ğŸ“‹ Create Trello Card for Weather Campaign",
      "type": "n8n-nodes-base.trello",
      "position": [
        480,
        -100
      ],
      "parameters": {
        "name": "Campaign ",
        "description": "=Campaign for weather in los Angeles:\nTitle : {{ $json.output[0].trello_card.title }}\n\nLocation : {{ $json.output[0].location }}\n\nDescription: {{ $json.output[0].trello_card.description }}\n\n",
        "additionalFields": {
          "due": ""
        }
      },
      "typeVersion": 1
    },
    {
      "id": "e733ffb4-a7c2-423c-af5b-cd0e973f0f5d",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        -820
      ],
      "parameters": {
        "color": 2,
        "width": 400,
        "height": 900,
        "content": "-### ğŸ”¹ **SECTION 1: Input URL & Trigger Workflow**\n\n#### ğŸ§© **Nodes:**\n\n1. **âš¡ Trigger: Manual Execution**\n\n   * *New Name:* `ğŸ”˜ Trigger: Execute Workflow`\n\n2. **ğŸ“ Set Yelp URL for Weather Posts in Los Angeles**\n\n   * *New Name:* `ğŸŒ Set Yelp URL (Weather Posts - Los Angeles)`\n\n#### ğŸ’¡ **What Happens:**\n\n1. **Trigger the Workflow:** You manually **start the workflow** by clicking the **\"Execute\"** button in n8n.\n\n2. **Input the URL for Yelp Data:**\n   You **input the URL** for **weather-related Yelp posts** about **Los Angeles** (for example, `https://www.yelp.com/`). This URL is needed to scrape weather-related posts from Yelp.\n\n#### âœ… **How You Can Use It:**\n\n* **Easily input URLs** for weather posts in any city or about any topic.\n* **No coding needed**â€”just copy-paste the URL to start the process!"
      },
      "typeVersion": 1
    },
    {
      "id": "a910ba45-e62f-4e70-9ed3-f9aaf6963845",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -60,
        -1140
      ],
      "parameters": {
        "color": 3,
        "width": 420,
        "height": 1220,
        "content": "### ğŸ¤– **SECTION 2: Scrape Data and Structure it**\n\n#### ğŸ§© **Node:**\n\n1. **ğŸ¤– AI Agent: Scrape Yelp Weather Posts**\n\n   * *New Name:* `ğŸ¤– Agent: Scrape Yelp Weather Posts (Los Angeles)`\n\n##### ğŸ§  **Sub-Nodes Inside the Agent:**\n\n* **ğŸ§  OpenAI Chat Model**\n\n  * *New Name:* `ğŸ’¬ AI Model: Process Weather Data`\n\n* **ğŸŒ MCP Client: Scrape Weather Posts**\n\n  * *New Name:* `ğŸŒ MCP Client: Scrape Weather Posts from Yelp`\n\n* **ğŸ§¾ Structured Output Parser**\n\n  * *New Name:* `ğŸ“ Parse Scraped Data into JSON`\n\n#### ğŸ’¡ **What Happens:**\n\n* **AI Agent**:\n  The **AI agent** uses the **Bright Data MCP Client** to **scrape weather-related posts** from Yelp about Los Angeles.\n\n* **Sentiment Analysis**: The AI processes the data to identify the sentiment of the weather-related posts (e.g., positive, negative, or neutral).\n\n* **Data Parsing**: After scraping the posts, the **output** is structured into a **JSON format** so it can be used for further analysis or task creation.\n\n#### âœ… **How You Can Use It:**\n\n* This section **automates data scraping** from Yelp.\n* It also provides **structured JSON data** that is easier to work with for further analysis.\n* **No technical skills required**, just input the URL and let the agent scrape and structure the data automatically."
      },
      "typeVersion": 1
    },
    {
      "id": "6edd6577-fe4d-435d-8d9e-02baeb31704c",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        380,
        -860
      ],
      "parameters": {
        "color": 5,
        "width": 300,
        "height": 940,
        "content": "### ğŸ“‹ **SECTION 3: Create Trello Card for Campaign**\n\n#### ğŸ§© **Node:**\n\n1. **ğŸ“¥ Create Trello Card for Weather Campaign**\n\n   * *New Name:* `ğŸ“‹ Create Trello Card: Weather Campaign`\n\n#### ğŸ’¡ **What Happens:**\n\n* After the weather data is scraped and structured, the workflow creates a **Trello card** that contains all the information about the weather-related posts and the sentiment analysis. This Trello card is used for **campaign management** and can be assigned to team members for further action.\n\n#### âœ… **How You Can Use It:**\n\n* The Trello card acts as a **central place** to track and manage **weather-related campaigns**.\n* You can **automatically create Trello cards** with all the campaign details, making it easier for your team to take the next steps in promoting the right products or services based on sentiment."
      },
      "typeVersion": 1
    },
    {
      "id": "42c87047-da6a-4bac-9a02-d7819ef3aa67",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2000,
        -1400
      ],
      "parameters": {
        "color": 4,
        "width": 1300,
        "height": 2720,
        "content": "## ğŸš€ **Weather Campaign Automation Workflow**\n\nThis workflow helps you scrape **weather-related posts** from **Yelp** in **Los Angeles**, analyze the data, and automatically create a **Trello card** for campaign tracking.\n\n---\n\n### ğŸ”¹ **SECTION 1: Input URL & Trigger Workflow**\n\n#### ğŸ§© **Nodes:**\n\n1. **âš¡ Trigger: Manual Execution**\n\n   * *New Name:* `ğŸ”˜ Trigger: Execute Workflow`\n\n2. **ğŸ“ Set Yelp URL for Weather Posts in Los Angeles**\n\n   * *New Name:* `ğŸŒ Set Yelp URL (Weather Posts - Los Angeles)`\n\n#### ğŸ’¡ **What Happens:**\n\n1. **Trigger the Workflow:** You manually **start the workflow** by clicking the **\"Execute\"** button in n8n.\n\n2. **Input the URL for Yelp Data:**\n   You **input the URL** for **weather-related Yelp posts** about **Los Angeles** (for example, `https://www.yelp.com/`). This URL is needed to scrape weather-related posts from Yelp.\n\n#### âœ… **How You Can Use It:**\n\n* **Easily input URLs** for weather posts in any city or about any topic.\n* **No coding needed**â€”just copy-paste the URL to start the process!\n\n---\n\n### ğŸ¤– **SECTION 2: Scrape Data and Structure it**\n\n#### ğŸ§© **Node:**\n\n1. **ğŸ¤– AI Agent: Scrape Yelp Weather Posts**\n\n   * *New Name:* `ğŸ¤– Agent: Scrape Yelp Weather Posts (Los Angeles)`\n\n##### ğŸ§  **Sub-Nodes Inside the Agent:**\n\n* **ğŸ§  OpenAI Chat Model**\n\n  * *New Name:* `ğŸ’¬ AI Model: Process Weather Data`\n\n* **ğŸŒ MCP Client: Scrape Weather Posts**\n\n  * *New Name:* `ğŸŒ MCP Client: Scrape Weather Posts from Yelp`\n\n* **ğŸ§¾ Structured Output Parser**\n\n  * *New Name:* `ğŸ“ Parse Scraped Data into JSON`\n\n#### ğŸ’¡ **What Happens:**\n\n* **AI Agent**:\n  The **AI agent** uses the **Bright Data MCP Client** to **scrape weather-related posts** from Yelp about Los Angeles.\n\n* **Sentiment Analysis**: The AI processes the data to identify the sentiment of the weather-related posts (e.g., positive, negative, or neutral).\n\n* **Data Parsing**: After scraping the posts, the **output** is structured into a **JSON format** so it can be used for further analysis or task creation.\n\n#### âœ… **How You Can Use It:**\n\n* This section **automates data scraping** from Yelp.\n* It also provides **structured JSON data** that is easier to work with for further analysis.\n* **No technical skills required**, just input the URL and let the agent scrape and structure the data automatically.\n\n---\n\n### ğŸ“‹ **SECTION 3: Create Trello Card for Campaign**\n\n#### ğŸ§© **Node:**\n\n1. **ğŸ“¥ Create Trello Card for Weather Campaign**\n\n   * *New Name:* `ğŸ“‹ Create Trello Card: Weather Campaign`\n\n#### ğŸ’¡ **What Happens:**\n\n* After the weather data is scraped and structured, the workflow creates a **Trello card** that contains all the information about the weather-related posts and the sentiment analysis. This Trello card is used for **campaign management** and can be assigned to team members for further action.\n\n#### âœ… **How You Can Use It:**\n\n* The Trello card acts as a **central place** to track and manage **weather-related campaigns**.\n* You can **automatically create Trello cards** with all the campaign details, making it easier for your team to take the next steps in promoting the right products or services based on sentiment.\n\n---\n\n### **Summary of the Workflow**\n\n| **Section**                               | **What Happens**                                                                                                                   |\n| ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |\n| **ğŸ”˜ Section 1: Input URL & Trigger**     | You **input the Yelp URL** for **weather posts in Los Angeles** and manually **trigger** the workflow.                             |\n| **ğŸ¤– Section 2: Scrape & Structure Data** | The **AI Agent** scrapes **weather posts** from Yelp, performs **sentiment analysis**, and **structures** the data into **JSON**.  |\n| **ğŸ“‹ Section 3: Create Trello Card**      | The scraped and structured data is used to **create a Trello card** for the **weather campaign**, allowing for team collaboration. |\n\n---\n\n### âœ… **How This Workflow Helps You:**\n\n| **Use Case**                        | **Benefit**                                                                                                   |\n| ----------------------------------- | ------------------------------------------------------------------------------------------------------------- |\n| ğŸŒ¤ **Weather-Related Campaigns**    | **Automatically scrape weather posts** from Yelp for **Los Angeles**.                                         |\n| ğŸ’¬ **Sentiment Analysis**           | Perform **sentiment analysis** on weather posts to tailor your **marketing campaigns**.                       |\n| ğŸ“ **Trello for Campaign Tracking** | **Automatically create Trello cards** with campaign details for **easy tracking** and **team collaboration**. |\n\n---\n\nThis workflow **automates** your process for scraping **weather-related posts** from Yelp, analyzing **sentiment**, and **tracking campaigns** in **Trello**. It makes it **easier to tailor your marketing strategies** and keeps your team on track.\n"
      },
      "typeVersion": 1
    },
    {
      "id": "340f317f-0113-4a3b-bb31-eb4ce34eef4a",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        -860
      ],
      "parameters": {
        "color": 7,
        "width": 380,
        "height": 240,
        "content": "## Iâ€™ll receive a tiny commission if you join Bright Data through this linkâ€”thanks for fueling more free content!\n\n### https://get.brightdata.com/1tndi4600b25"
      },
      "typeVersion": 1
    },
    {
      "id": "cbc65d92-9fe7-44ea-820c-14d8557c313b",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2000,
        -1740
      ],
      "parameters": {
        "color": 4,
        "width": 1300,
        "height": 320,
        "content": "=======================================\n            WORKFLOW ASSISTANCE\n=======================================\nFor any questions or support, please contact:\n    Yaron@nofluff.online\n\nExplore more tips and tutorials here:\n   - YouTube: https://www.youtube.com/@YaronBeen/videos\n   - LinkedIn: https://www.linkedin.com/in/yaronbeen/\n=======================================\n"
      },
      "typeVersion": 1
    },
    {
      "id": "6b29563e-2b13-4a93-8b68-2086d90892cd",
      "name": "Auto-fixing Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "position": [
        200,
        160
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 1
    },
    {
      "id": "36cfc69b-af9d-4d89-beef-fffba452e27e",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        160,
        380
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "kmqnyfHdWfA8k1KC",
          "name": "OpenAi account 3"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "fc53117e-62fb-49a7-89af-2c0d7d3413af",
      "name": "ğŸ“ Parse Scraped Data into JSON Format1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        340,
        380
      ],
      "parameters": {
        "jsonSchemaExample": "[\n  {\n    \"business_name\": \"About Time\",\n    \"location\": \"Wilshire Center, Los Angeles, CA\",\n    \"rating\": \"3.5\",\n    \"reviews_count\": 478,\n    \"post_text\": \"I love the garden, I want to sit inside in cold weather but there is no space. It is a very nice...\",\n    \"weather_related\": \"Mention of cold weather and a garden suitable for sitting.\",\n    \"sentiment\": \"Positive\",\n    \"campaign_suggestion\": \"Promote outdoor activities and cozy garden seating for cooler weather.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for About Time - Mention of cold weather and a garden suitable for sitting.\",\n      \"description\": \"Location: Wilshire Center, Los Angeles, CA\\nRating: 3.5\\nReviews Count: 478\\nSentiment: Positive\\nCampaign: Promote outdoor activities and cozy garden seating for cooler weather.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Positive\"]\n    }\n  },\n  {\n    \"business_name\": \"Grand Heating and Air Conditioning\",\n    \"location\": \"Los Angeles, CA\",\n    \"rating\": \"3.2\",\n    \"reviews_count\": 34,\n    \"post_text\": \"Well, come the summer of 2015 and the weather was hot enough for me to decide that the time had come...\",\n    \"weather_related\": \"Hot weather leading to decision to use HVAC services.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote HVAC services for summer heat and general weather comfort solutions.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Grand Heating and Air Conditioning - Hot weather leading to HVAC use.\",\n      \"description\": \"Location: Los Angeles, CA\\nRating: 3.2\\nReviews Count: 34\\nSentiment: Neutral\\nCampaign: Promote HVAC services for summer heat and general weather comfort solutions.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  },\n  {\n    \"business_name\": \"Ravenswood Apartments\",\n    \"location\": \"Hancock Park, Los Angeles, CA\",\n    \"rating\": \"1.9\",\n    \"reviews_count\": 14,\n    \"post_text\": \"The weather was getting warmer so I managed to catch Gabriella mgr in the lobby one day, and asked...\",\n    \"weather_related\": \"Mention of warming weather.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote general services or upcoming community events for residents.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Ravenswood Apartments - Mention of warming weather.\",\n      \"description\": \"Location: Hancock Park, Los Angeles, CA\\nRating: 1.9\\nReviews Count: 14\\nSentiment: Neutral\\nCampaign: Promote general services or upcoming community events for residents.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  },\n  {\n    \"business_name\": \"Harbor City\",\n    \"location\": \"Harbor City, Los Angeles, CA\",\n    \"rating\": \"5.0\",\n    \"reviews_count\": 1,\n    \"post_text\": \"South of Carson, North of San Pedro. One of those areas of LA that don't get as much attention as their surrounding neighbors for one reason or...\",\n    \"weather_related\": \"No direct weather mention despite search context.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote local neighborhood features and upcoming events.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Harbor City - Promote local neighborhood features.\",\n      \"description\": \"Location: Harbor City, Los Angeles, CA\\nRating: 5.0\\nReviews Count: 1\\nSentiment: Neutral\\nCampaign: Promote local neighborhood features and upcoming events.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  }\n]\n"
      },
      "typeVersion": 1.3
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c57bb610-51bd-490f-9277-708ec418b40d",
  "connections": {
    "ğŸ’¬ AI Model": {
      "ai_languageModel": [
        [
          {
            "node": "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Auto-fixing Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”˜ Trigger: Manual Execution": {
      "main": [
        [
          {
            "node": "ğŸŒ Set Yelp URL (Weather Posts - Los Angeles)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ Parse Scraped Data into JSON Format1": {
      "ai_outputParser": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "ğŸŒ MCP Client: Scrape Weather Posts Data": {
      "ai_tool": [
        [
          {
            "node": "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸŒ Set Yelp URL (Weather Posts - Los Angeles)": {
      "main": [
        [
          {
            "node": "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¤– AI Agent: Scrape Yelp Weather Posts and tailor campaigns": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Create Trello Card for Weather Campaign",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}