{
  "id": "gKJQLzRtCyqGBHs9",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Create Personalized Diet Plans from Health Reports with Ollama AI and Email Automation",
    "wechat": "youandme10086",
    "id": 7181,
    "update_time": "2025-11-10"
  },
  "name": "Personalized Diet Plan Creator from Medical History",
  "tags": [],
  "nodes": [
    {
      "id": "813c1495-0676-4e00-8d4b-74e9cccf5d3e",
      "name": "Receive Health Report Email",
      "type": "n8n-nodes-base.emailReadImap",
      "position": [
        0,
        -260
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "imap": {
          "id": "zTEGYssr7MSVeCs3",
          "name": "IMAP-test"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "00ef51df-aa58-4a7d-ab4f-6d0f9012e626",
      "name": "Process Report with AI Nutrition Engine",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        220,
        -260
      ],
      "parameters": {
        "batching": {},
        "messages": {
          "messageValues": [
            {
              "message": "=Analyze the following health details or lab report data and generate a personalized diet plan tailored to the user's medical history, dietary restrictions, and nutritional needs:\\n\\n{{json.content}}\\n\\nProvide a detailed diet plan including daily meal suggestions, portion sizes, and nutritional goals."
            }
          ]
        }
      },
      "typeVersion": 1.7
    },
    {
      "id": "88f3646d-3e16-427d-b278-4b123aff9122",
      "name": "AI Nutrition Model",
      "type": "@n8n/n8n-nodes-langchain.lmOllama",
      "position": [
        308,
        -40
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "ollamaApi": {
          "id": "7td3WzXCW2wNhraP",
          "name": "Ollama - test"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "a88117ab-a714-4b50-a32a-00ad830feee6",
      "name": "Wait Before Sending Plan ",
      "type": "n8n-nodes-base.wait",
      "position": [
        596,
        -260
      ],
      "webhookId": "e7d9de4a-ff91-4b46-98eb-781ec764e324",
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "f53c5ed4-ab80-49d7-b955-37b232fc89e7",
      "name": "Send Personalized Diet Plan ",
      "type": "n8n-nodes-base.emailSend",
      "notes": "Sends the PDF diet plan to the user via email",
      "position": [
        816,
        -260
      ],
      "parameters": {
        "text": "Dear User,\n\nAttached is your personalized diet plan based on your health details.\n\nBest regards,\nYour Nutrition Team",
        "options": {},
        "subject": "Your Personalized Diet Plan",
        "toEmail": "{{$node['Webhook'].json['userEmail']}}",
        "fromEmail": "your-email@domain.com",
        "attachments": "{{$node['Generate PDF'].json['filePath']}}"
      },
      "credentials": {
        "smtp": {
          "id": "G1kyF8cSWTZ4vouN",
          "name": "SMTP -test"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "15ab3a4e-3879-4e4b-8789-f97b71594d27",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -120,
        -620
      ],
      "parameters": {
        "color": 6,
        "width": 820,
        "height": 240,
        "content": "## Node Details\n- **Email Trigger**: Triggers the workflow when a new email with health data or lab reports is received via IMAP.\n- **Extract Health Data**: Extracts key health metrics (e.g., cholesterol, glucose) from the email attachment or body.\n- **Send to AI Model**: Sends health data to an AI model (e.g., Ollama) for diet plan generation.\n- **Generate Diet Plan**: Processes AI output to create a personalized diet plan.\n- **Prepare Email Content**: Formats the diet plan into an email-friendly structure.\n- **Send Diet Plan Email**: Sends the diet plan to the userâ€™s email via SMTP.\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "62f85c75-21e4-466d-8afc-d5e80cc36645",
  "connections": {
    "AI Nutrition Model": {
      "ai_languageModel": [
        [
          {
            "node": "Process Report with AI Nutrition Engine",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Wait Before Sending Plan ": {
      "main": [
        [
          {
            "node": "Send Personalized Diet Plan ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Receive Health Report Email": {
      "main": [
        [
          {
            "node": "Process Report with AI Nutrition Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Report with AI Nutrition Engine": {
      "main": [
        [
          {
            "node": "Wait Before Sending Plan ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}