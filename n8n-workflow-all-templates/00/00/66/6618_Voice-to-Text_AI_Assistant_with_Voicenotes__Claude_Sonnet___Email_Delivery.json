{
  "id": "2Ee9KQhkVgnDX89w",
  "meta": {
    "site": "https://github.com/zengfr/n8n-workflow-all-templates",
    "name": "Voice-to-Text AI Assistant with Voicenotes, Claude Sonnet & Email Delivery",
    "wechat": "youandme10086",
    "id": 6618,
    "update_time": "2025-11-10"
  },
  "name": "Voicenotes - send prompts",
  "tags": [],
  "nodes": [
    {
      "id": "7fdda682-e8ee-44c6-bf06-ec541a24c65b",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -448,
        -48
      ],
      "webhookId": "dbedd9a0-e0bd-4e70-8f62-87013f9dd9c3",
      "parameters": {
        "path": "dbedd9a0-e0bd-4e70-8f62-87013f9dd9c3",
        "options": {},
        "httpMethod": "POST"
      },
      "typeVersion": 2
    },
    {
      "id": "0b0463bf-f743-4144-9437-899dc2107e41",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -48,
        -48
      ],
      "parameters": {
        "text": "={{ $json.prompt }}",
        "options": {
          "systemMessage": "Your task is to act as a helpful assistant to the user change-to-your-name. You'll be receiving prompts through a workflow, so should respond with a detailed and thorough answer adhering to a single turn workflow. Daniel likes to receive well structured documents with headers to delineate between sections and when comparing products or information likes to receive a summary table at the end of the document providing a comparison matrix as well as a executive summary section at the start of the document Deliver thorough responses according to these principles, ensure accurate information and provide URLs referenced at the end of the documents in a separate sources section.  "
        },
        "promptType": "define"
      },
      "typeVersion": 2
    },
    {
      "id": "4a13883f-e859-48d6-9388-ae89906186d9",
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        -144,
        208
      ],
      "parameters": {
        "model": "anthropic/claude-sonnet-4",
        "options": {}
      },
      "credentials": {
        "openRouterApi": {
          "id": "ll4HQlhrNWJRj8la",
          "name": "OpenRouter account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "4a5008e9-b7e2-4252-b459-8b1f50d50ca7",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -224,
        -48
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "0dd365bc-aeee-4f50-bc0d-780321756fa3",
              "name": "created",
              "type": "string",
              "value": "={{ $json.body.timestamp }}"
            },
            {
              "id": "e825ab7e-cc54-4695-a825-a3d1553510e5",
              "name": "note_title",
              "type": "string",
              "value": "={{ $json.body.data.title }}"
            },
            {
              "id": "4225bf89-fa21-4491-8b8a-4df7bbf2e819",
              "name": "prompt",
              "type": "string",
              "value": "={{ $json.body.data.transcript }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "39eecfc9-c96d-4a53-884e-e0465ec7650a",
      "name": "Edit Fields1",
      "type": "n8n-nodes-base.set",
      "position": [
        784,
        -224
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "7b71ef88-32ed-4cea-a291-b314ac19505b",
              "name": "note_title",
              "type": "string",
              "value": "={{ $('Edit Fields').item.json.note_title }}"
            },
            {
              "id": "fd4bd3e4-702b-49a4-83c7-bb1ef316c106",
              "name": "prompt",
              "type": "string",
              "value": "={{ $('Edit Fields').item.json.prompt }}"
            },
            {
              "id": "fc6e2202-d7f7-4e2c-9539-88eaf0a5dac4",
              "name": "output",
              "type": "string",
              "value": "={{ $json.output }}"
            },
            {
              "id": "f2e05227-be85-45b5-a4f9-bd6e483b48bf",
              "name": "created",
              "type": "string",
              "value": "={{ $('Webhook').item.json.body.timestamp }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "cf163b6e-fc37-4e60-98ed-8dbc8ad44797",
      "name": "Save Prompt",
      "type": "n8n-nodes-base.nocoDb",
      "position": [
        992,
        -224
      ],
      "parameters": {
        "table": "mg36i2thdctcg5b",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldName": "c76za9u4d0lhiyx",
              "fieldValue": "={{ $json.prompt }}"
            }
          ]
        },
        "operation": "create",
        "projectId": "p624vvyd3bqxgi8",
        "authentication": "nocoDbApiToken"
      },
      "credentials": {
        "nocoDbApiToken": {
          "id": "sb8UbIwHyyMJvHYN",
          "name": "NocoDB"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "052d2a20-72a9-4de4-9d12-e581d051d0ba",
      "name": "Save Output",
      "type": "n8n-nodes-base.nocoDb",
      "position": [
        1200,
        -208
      ],
      "parameters": {
        "table": "mn2ttgi7atggy1t",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldName": "cafb7x2p0a3cstt",
              "fieldValue": "={{ $('AI Agent').item.json.output }}"
            },
            {
              "fieldName": "cu62cluoip9v7v5",
              "fieldValue": "={{ $('Edit Fields1').item.json.prompt }}"
            },
            {
              "fieldName": "c4megtoozksi8kk",
              "fieldValue": "Voicenotes.com Automation (N8N)"
            }
          ]
        },
        "operation": "create",
        "projectId": "p624vvyd3bqxgi8",
        "authentication": "nocoDbApiToken"
      },
      "credentials": {
        "nocoDbApiToken": {
          "id": "sb8UbIwHyyMJvHYN",
          "name": "NocoDB"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "ce569030-9299-4312-86e5-38950ed6cf53",
      "name": "Markdown",
      "type": "n8n-nodes-base.markdown",
      "position": [
        800,
        80
      ],
      "parameters": {
        "mode": "markdownToHtml",
        "options": {},
        "markdown": "={{ $json.output }}"
      },
      "typeVersion": 1
    },
    {
      "id": "de5e068a-bdb0-44c7-9301-3939efd1557b",
      "name": "Edit Fields2",
      "type": "n8n-nodes-base.set",
      "position": [
        1008,
        80
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "d3edb55b-54f0-4136-8e20-768f038ca3f8",
              "name": "title",
              "type": "string",
              "value": "={{ $('Webhook').item.json.body.data.title }}"
            },
            {
              "id": "777e57be-1c0a-4f58-90be-45ad50c9e3d6",
              "name": "prompt",
              "type": "string",
              "value": "={{ $('Webhook').item.json.body.data.transcript }}"
            },
            {
              "id": "9be7988d-ab49-4cae-96fc-3b49463f5c7e",
              "name": "output",
              "type": "string",
              "value": "={{ $json.data }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "d16cba15-86aa-4ddc-97db-0bf9e032aa81",
      "name": "Send a message",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1232,
        80
      ],
      "webhookId": "07dc328c-a713-4a80-b83e-cd72faecbc06",
      "parameters": {
        "sendTo": "ai-outputs@yourdomain.com",
        "message": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>{{ $json.title }}</title>\n</head>\n<body style=\"margin:0; padding:20px; font-family:Arial, sans-serif; background-color:#f9f9f9; color:#333;\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"max-width:600px; margin:0 auto; background:#ffffff; border:1px solid #ddd; border-radius:6px;\">\n    <tr>\n      <td style=\"padding:20px 30px;\">\n        <h1 style=\"font-size:24px; color:#222; margin-top:0;\">{{ $json.title }}</h1>\n\n        <h2 style=\"font-size:18px; color:#555; margin-bottom:10px;\">Prompt</h2>\n        <div style=\"background-color:#f1f1f1; border-left:4px solid #4CAF50; padding:12px 16px; margin-bottom:20px; white-space:pre-wrap;\">\n         {{ $json.prompt }}\n        </div>\n\n        <h2 style=\"font-size:18px; color:#555; margin-bottom:10px;\">AI Response</h2>\n        <div style=\"background-color:#eef6ff; border-left:4px solid #2196F3; padding:12px 16px; white-space:pre-wrap;\">\n        {{ $json.output }}\n        </div>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n",
        "options": {
          "senderName": "DSR Holdings Apps"
        },
        "subject": "={{ $json.title }} (Voicenotes prompt)"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "UuWO2LZYfBum693T",
          "name": "DSRH Apps"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "f5be241c-bc90-4cf1-a874-5952a8e4c810",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        -288
      ],
      "parameters": {
        "content": "New note with 'prompts' tag is delivered by Voicenotes by webhook"
      },
      "typeVersion": 1
    },
    {
      "id": "03bccc9f-ccee-4029-8f43-617c45183054",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -272,
        -288
      ],
      "parameters": {
        "content": "Set the fields to remove CF headers (etc)"
      },
      "typeVersion": 1
    },
    {
      "id": "a540419d-1cc7-45fc-b70e-6915b722ab24",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        16,
        -304
      ],
      "parameters": {
        "content": "Prompt is run into AI agent"
      },
      "typeVersion": 1
    },
    {
      "id": "ed322385-fb1d-4496-a8a9-00014e489dc4",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        432,
        -368
      ],
      "parameters": {
        "content": "Chain 1: the note is saved to NocoDB"
      },
      "typeVersion": 1
    },
    {
      "id": "fc3439d2-bd02-4ec1-9b91-6e236438231a",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        928,
        256
      ],
      "parameters": {
        "content": "Chain 2: the note is converted into HTML and then injected into an email template"
      },
      "typeVersion": 1
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a8412d69-b334-4830-a6dc-eaef324df043",
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Output": {
      "main": [
        []
      ]
    },
    "Save Prompt": {
      "main": [
        [
          {
            "node": "Save Output",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Save Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  }
}